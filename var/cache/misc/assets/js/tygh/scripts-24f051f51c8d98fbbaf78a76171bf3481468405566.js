!function(e,n){function t(e,n){return typeof e===n}function o(){var e,n,o,i,s,r,d;for(var l in f){if(e=[],n=f[l],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(o=0;o<n.options.aliases.length;o++)e.push(n.options.aliases[o].toLowerCase());for(i=t(n.fn,"function")?n.fn():n.fn,s=0;s<e.length;s++)r=e[s],d=r.split("."),1===d.length?Modernizr[d[0]]=i:(!Modernizr[d[0]]||Modernizr[d[0]]instanceof Boolean||(Modernizr[d[0]]=new Boolean(Modernizr[d[0]])),Modernizr[d[0]][d[1]]=i),a.push((i?"":"no-")+d.join("-"))}}function i(e){var n=l.className,t=Modernizr._config.classPrefix||"";if(Modernizr._config.enableJSClass){var o=new RegExp("(^|\\s)"+t+"no-js(\\s|$)");n=n.replace(o,"$1"+t+"js$2")}Modernizr._config.enableClasses&&(n+=" "+t+e.join(" "+t),l.className=n)}function s(){var e=n.body;return e||(e=c("body"),e.fake=!0),e}function r(e,n,t,o){var i,r,a,f,d="modernizr",u=c("div"),p=s();if(parseInt(t,10))for(;t--;)a=c("div"),a.id=o?o[t]:d+(t+1),u.appendChild(a);return i=["&#173;",'<style id="s',d,'">',e,"</style>"].join(""),u.id=d,(p.fake?p:u).innerHTML+=i,p.appendChild(u),p.fake&&(p.style.background="",p.style.overflow="hidden",f=l.style.overflow,l.style.overflow="hidden",l.appendChild(p)),r=n(u,e),p.fake?(p.parentNode.removeChild(p),l.style.overflow=f,l.offsetHeight):u.parentNode.removeChild(u),!!r}var a=[],f=[],d={_version:"3.0.0-alpha.3",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){f.push({name:e,fn:n,options:t})},addAsyncTest:function(e){f.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=d,Modernizr=new Modernizr,Modernizr.addTest("cookies",function(){try{n.cookie="cookietest=1";var e=-1!=n.cookie.indexOf("cookietest=");return n.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch(t){return!1}}),Modernizr.addTest("filereader",!!(e.File&&e.FileList&&e.FileReader));var l=n.documentElement,u=d._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):[];d._prefixes=u;var c=function(){return"function"!=typeof n.createElement?n.createElement(arguments[0]):n.createElement.apply(n,arguments)};Modernizr.addTest("draganddrop",function(){var e=c("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e});var p=function(e){function t(n,t){var i;return n?(t&&"string"!=typeof t||(t=c(t||"div")),n="on"+n,i=n in t,!i&&o&&(t.setAttribute||(t=c("div")),t.setAttribute(n,""),i="function"==typeof t[n],t[n]!==e&&(t[n]=e),t.removeAttribute(n)),i):!1}var o=!("onblur"in n.documentElement);return t}(),v=(d.hasEvent=p,d.testStyles=r);Modernizr.addTest("touchevents",function(){var t;if("ontouchstart"in e||e.DocumentTouch&&n instanceof DocumentTouch)t=!0;else{var o=["@media (",u.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");v(o,function(e){t=9===e.offsetTop})}return t}),o(),i(a),delete d.addTest,delete d.addAsyncTest;for(var h=0;h<Modernizr._q.length;h++)Modernizr._q[h]();e.Modernizr=Modernizr}(window,document);(function(){if("-ms-user-select"in document.documentElement.style&&navigator.userAgent.match(/IEMobile\/10\.0/)){var msViewportStyle=document.createElement("style");msViewportStyle.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}"));document.getElementsByTagName("head")[0].appendChild(msViewportStyle);}})();var Tygh={embedded:typeof(TYGH_LOADER)!=='undefined',doc:typeof(TYGH_LOADER)!=='undefined'?TYGH_LOADER.doc:document,body:typeof(TYGH_LOADER)!=='undefined'?TYGH_LOADER.body:null,otherjQ:typeof(TYGH_LOADER)!=='undefined'&&TYGH_LOADER.otherjQ,facebook:typeof(TYGH_FACEBOOK)!=='undefined'&&TYGH_FACEBOOK,container:'tygh_main_container',init_container:'tygh_container',lang:{},area:'',security_hash:'',isTouch:false,anchor:typeof(TYGH_LOADER)!=='undefined'?'':window.location.hash,tr:function(name,val)
{if(typeof(name)=='string'&&typeof(val)=='undefined'){return Tygh.lang[name];}else if(typeof(val)!='undefined'){Tygh.lang[name]=val;return true;}else if(typeof(name)=='object'){Tygh.$.extend(Tygh.lang,name);return true;}
return false;}};(function(_,$){_.$=$;(function($){var ua=navigator.userAgent.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];var matched={browser:match[1]||"",version:match[2]||"0"};var browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version;}
if(browser.chrome){browser.webkit=true;}else if(browser.webkit){browser.safari=true;}
$.browser=browser;})($);$.extend({lastClickedElement:null,getWindowSizes:function()
{var iebody=(document.compatMode&&document.compatMode!='BackCompat')?document.documentElement:document.body;return{'offset_x':iebody.scrollLeft?iebody.scrollLeft:(self.pageXOffset?self.pageXOffset:0),'offset_y':iebody.scrollTop?iebody.scrollTop:(self.pageYOffset?self.pageYOffset:0),'view_height':self.innerHeight?self.innerHeight:iebody.clientHeight,'view_width':self.innerWidth?self.innerWidth:iebody.clientWidth,'height':iebody.scrollHeight?iebody.scrollHeight:window.height,'width':iebody.scrollWidth?iebody.scrollWidth:window.width};},disable_elms:function(ids,flag)
{$('#'+ids.join(',#')).prop('disabled',flag);},ua:{version:(navigator.userAgent.toLowerCase().indexOf("chrome")>=0)?(navigator.userAgent.match(/.+(?:chrome)[\/: ]([\d.]+)/i)||[])[1]:((navigator.userAgent.toLowerCase().indexOf("msie")>=0)?(navigator.userAgent.match(/.*?msie[\/:\ ]([\d.]+)/i)||[])[1]:(navigator.userAgent.match(/.+(?:it|pera|irefox|ersion)[\/: ]([\d.]+)/i)||[])[1]),browser:(navigator.userAgent.toLowerCase().indexOf("chrome")>=0)?'Chrome':($.browser.safari?'Safari':($.browser.opera?'Opera':($.browser.msie?'Internet Explorer':'Firefox'))),os:(navigator.platform.toLowerCase().indexOf('mac')!=-1?'MacOS':(navigator.platform.toLowerCase().indexOf('win')!=-1?'Windows':'Linux')),language:(navigator.language?navigator.language:(navigator.browserLanguage?navigator.browserLanguage:(navigator.userLanguage?navigator.userLanguage:(navigator.systemLanguage?navigator.systemLanguage:''))))},is:{email:function(email)
{return /\S+@\S+.\S+/i.test(email)?true:false;},blank:function(val)
{if(($.isArray(val)&&val.length==0)||$.type(val)==='null'||(""+val).replace(/[\n\r\t]/gi,'')==''){return true;}
return false;},integer:function(val)
{return(/^[0-9]+$/.test(val)&&!$.is.blank(val))?true:false;},color:function(val)
{return(/^\#[0-9a-fA-F]{6}$/.test(val)&&!$.is.blank(val))?true:false;},phone:function(val)
{var regexp=/^[\s()+-]*([0-9][\s()+-]*){6,20}$/;return(regexp.test(val)&&val.length)?true:false;}},cookie:{get:function(name)
{var arg=name+"=";var alen=arg.length;var clen=document.cookie.length;var i=0;while(i<clen){var j=i+alen;if(document.cookie.substring(i,j)==arg){var endstr=document.cookie.indexOf(";",j);if(endstr==-1){endstr=document.cookie.length;}
return unescape(document.cookie.substring(j,endstr));}
i=document.cookie.indexOf(" ",i)+1;if(i==0){break;}}
return null;},set:function(name,value,expires,path,domain,secure)
{document.cookie=name+"="+escape(value)+((expires)?"; expires="+expires.toGMTString():"")+((path)?"; path="+path:"")+((domain)?"; domain="+domain:"")+((secure)?"; secure":"");},remove:function(name,path,domain)
{if($.cookie.get(name)){document.cookie=name+"="+((path)?"; path="+path:"")+((domain)?"; domain="+domain:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT";}}},redirect:function(url,replace)
{replace=replace||false;if($('base').length&&url.indexOf('/')!=0&&url.indexOf('http')!==0){url=$('base').prop('href')+url;}
if(_.embedded){$.ceAjax('request',url,{result_ids:_.container});}else{if(replace){window.location.replace(url);}else{window.location.href=url;}}},dispatchEvent:function(e)
{var jelm=$(e.target);var elm=e.target;var s;e.which=e.which||1;if((e.type=='click'||e.type=='mousedown')&&$.browser.mozilla&&e.which!=1){return true;}
var processed={status:false,to_return:true};$.ceEvent('trigger','dispatch_event_pre',[e,jelm,processed]);if(processed.status){return processed.to_return;}
if(e.type=='click'){if($.getProcessItemsMeta(elm)){if(!$.checkSelectedItems(elm)){return false;}}else if((jelm.hasClass('cm-confirm')||jelm.parents().hasClass('cm-confirm'))&&!jelm.parents().hasClass('cm-skip-confirmation')){var confirm_text=_.tr('text_are_you_sure_to_proceed'),$parent_confirm;if(jelm.hasClass('cm-confirm')&&jelm.data('ca-confirm-text')){confirm_text=jelm.data('ca-confirm-text');}else{$parent_confirm=jelm.parents('[class="cm-confirm"][data-ca-confirm-text]').first();if($parent_confirm.get(0)){confirm_text=$parent_confirm.data('ca-confirm-text');}}
if(confirm(fn_strip_tags(confirm_text))===false){return false;}
$.ceEvent('trigger','ce.form_confirm',[jelm]);}
$.lastClickedElement=jelm;if(jelm.hasClass('cm-disabled')){return false;}
if(jelm.hasClass('cm-delete-row')||jelm.parents('.cm-delete-row').length){var holder;if(jelm.is('tr')||jelm.hasClass('cm-row-item')){holder=jelm;}else if(jelm.parents('.cm-row-item').length){holder=jelm.parents('.cm-row-item:first');}else if(jelm.parents('tr').length&&!$('.cm-picker',jelm.parents('tr:first')).length){holder=jelm.parents('tr:first');}else{return false;}
$('.cm-combination[id^=off_]',holder).click();if(holder.parent('tbody.cm-row-item').length){holder=holder.parent('tbody.cm-row-item');}
if(jelm.hasClass('cm-ajax')||jelm.parents('.cm-ajax').length){$.ceAjax('clearCache');holder.remove();}else{if(holder.hasClass('cm-opacity')){$(':input',holder).each(function(){$(this).prop('name',$(this).data('caInputName'));});holder.removeClass('cm-delete-row cm-opacity');if($.browser.msie||$.browser.opera){$('*',holder).removeClass('cm-opacity');}}else{$(':input[name]',holder).each(function(){var $this=$(this),name=$this.prop('name');$this.data('caInputName',name).attr('data-ca-input-name',name).prop('name','');});holder.addClass('cm-delete-row cm-opacity');if(($.browser.msie&&$.browser.version<9)||$.browser.opera){$('*',holder).addClass('cm-opacity');}}}}
if(jelm.hasClass('cm-save-and-close')){jelm.parents('form:first').append('<input type="hidden" name="return_to_list" value="Y" />');}
if(jelm.hasClass('cm-new-window')&&jelm.prop('href')||jelm.closest('.cm-new-window')&&jelm.closest('.cm-new-window').prop('href')){var _e=jelm.hasClass('cm-new-window')?jelm.prop('href'):jelm.closest('.cm-new-window').prop('href');window.open(_e);return false;}
if(jelm.hasClass('cm-select-text')){if(jelm.data('caSelectId')){var c_elm=jelm.data('caSelectId');if(c_elm&&$('#'+c_elm).length){$('#'+c_elm).select();}}else{jelm.get(0).select();}}
if(jelm.hasClass('cm-external-click')||jelm.parents('.cm-external-click').length){var _e=jelm.hasClass('cm-external-click')?jelm:jelm.parents('.cm-external-click:first');var c_elm=_e.data('caExternalClickId');if(c_elm&&$('#'+c_elm).length){$('#'+c_elm).click();}
var opt={need_scroll:true,jelm:_e};$.ceEvent('trigger','ce.needScroll',[opt]);if(_e.data('caScroll')&&opt.need_scroll){$.scrollToElm($('#'+_e.data('caScroll')));}}
if(jelm.closest('.cm-dialog-opener').length){var _e=jelm.closest('.cm-dialog-opener');var params=$.ceDialog('get_params',_e);$('#'+_e.data('caTargetId')).ceDialog('open',params);return false;}
if(jelm.data('toggle')=="modal"&&$.ceDialog('get_last').length){var href=jelm.prop('href');var target=$(jelm.data('target')||(href&&href.replace(/.*(?=#[^\s]+$)/,'')));if(target.length){var minZ=$.ceDialog('get_last').zIndex();target.zIndex(minZ+2);target.on('shown',function(){$(this).data('modal').$backdrop.zIndex(minZ+1);});}}
if(jelm.hasClass('cm-cancel')){var form=jelm.parents('form');if(form.length){form.get(0).reset();if(_.fileuploader){_.fileuploader.clean_form();}
form.find('.error-message').remove();form.find('input[checked]').change();}}
if(jelm.hasClass('cm-scroll')&&jelm.data('caScroll')){$.scrollToElm($(jelm.data('caScroll')));}
if(_.changes_warning=='Y'&&jelm.parents('.cm-confirm-changes').length){if(jelm.parents('form').length&&jelm.parents('form:first').formIsChanged()){if(confirm(fn_strip_tags(_.tr('text_changes_not_saved')))===false){return false;}}}
if(jelm.hasClass('cm-check-items')||jelm.parents('.cm-check-items').length){var form=elm.form;if(!form){form=jelm.parents('form:first');}
var item_class='.cm-item'+(jelm.data('caTarget')?'-'+jelm.data('caTarget'):'');if(jelm.data('caStatus')){$('input'+item_class+'[type=checkbox]:not(:disabled)',form).prop('checked',false);item_class+='.cm-item-status-'+jelm.data('caStatus');}
var inputs=$('input'+item_class+'[type=checkbox]:not(:disabled)',form);if(inputs.length){var flag=true;if(jelm.is('[type=checkbox]')){flag=jelm.prop('checked');}
if(jelm.hasClass('cm-on')){flag=true;}else if(jelm.hasClass('cm-off')){flag=false;}
inputs.prop('checked',flag);}}else if(jelm.prop('type')=='submit'||jelm.closest('button[type=submit]').length){var _jelm=jelm.is('input,button')?jelm:jelm.closest('button[type=submit]');$(_jelm.prop('form')).ceFormValidator('setClicked',_jelm);if(_jelm.length==1&&_jelm.prop('form')==null){return $.submitForm(_jelm);}
return!_jelm.hasClass('cm-no-submit');}else if(jelm.is('a')&&jelm.hasClass('cm-ajax')&&jelm.prop('href')||(jelm.parents('a.cm-ajax').length&&jelm.parents('a.cm-ajax:first').prop('href'))){return $.ajaxLink(e);}else if(jelm.parents('.cm-reset-link').length||jelm.hasClass('cm-reset-link')){var frm=jelm.parents('form:first');$('[type=checkbox]',frm).prop('checked',false).change();$('input[type=text], input[type=password], input[type=file]',frm).val('');$('select',frm).each(function(){$(this).val($('option:first',this).val()).change();});var radio_names=[];$('input[type=radio]',frm).each(function(){if($.inArray(this.name,radio_names)==-1){$(this).prop('checked',true).change();radio_names.push(this.name);}else{$(this).prop('checked',false);}});return true;}else if(jelm.hasClass('cm-submit')||jelm.parents('.cm-submit').length){if(!jelm.is('select,input')){return $.submitForm(jelm);}}else if(jelm.hasClass('cm-popup-switch')||jelm.parents('.cm-popup-switch').length){jelm.parents('.cm-popup-box:first').hide();return false;}else if($.matchClass(elm,/cm-combinations([-\w]+)?/gi)){var s=elm.className.match(/cm-combinations([-\w]+)?/gi)||jelm.parent().get(0).className.match(/cm-combinations(-[\w]+)?/gi);var p_elm=jelm.prop('id')?jelm:jelm.parent();var class_group=s[0].replace(/cm-combinations/,'');var id_group=p_elm.prop('id').replace(/on_|off_|sw_/,'');$('#on_'+id_group).toggle();$('#off_'+id_group).toggle();if(p_elm.prop('id').indexOf('sw_')==0){$('[data-ca-switch-id="'+id_group+'"]').toggle();}else if(p_elm.prop('id').indexOf('on_')==0){$('.cm-combination'+class_group+':visible[id^="on_"]').click();}else{$('.cm-combination'+class_group+':visible[id^="off_"]').click();}
return true;}else if($.matchClass(elm,/cm-combination(-[\w]+)?/gi)||jelm.parents('.cm-combination').length){var p_elm=(jelm.parents('.cm-combination').length)?jelm.parents('.cm-combination:first'):(jelm.prop('id')?jelm:jelm.parent());var id,prefix;if(p_elm.prop('id')){prefix=p_elm.prop('id').match(/^(on_|off_|sw_)/)[0]||'';id=p_elm.prop('id').replace(/^(on_|off_|sw_)/,'');}
var container=$('#'+id);var flag=(prefix=='on_')?false:(prefix=='off_'?true:(container.is(':visible')?true:false));if(p_elm.hasClass('cm-uncheck')){$('#'+id+' [type=checkbox]').prop('disabled',flag);}
container.removeClass('hidden');container.toggleBy(flag);$.ceEvent('trigger','ce.switch_'+id,[flag]);if(container.is('.cm-smart-position:visible')){container.position({my:'right top',at:'right top',of:p_elm});}
var s_elm=jelm.hasClass('cm-save-state')?jelm:(p_elm.hasClass('cm-save-state')?p_elm:false);if(s_elm){var _s=s_elm.hasClass('cm-ss-reverse')?':hidden':':visible';if(container.is(_s)){$.cookie.set(id,1);}else{$.cookie.remove(id);}}
if(prefix=='sw_'){if(p_elm.hasClass('open')){p_elm.removeClass('open');}else if(!p_elm.hasClass('open')){p_elm.addClass('open');}}
$('#on_'+id).removeClass('hidden').toggleBy(!flag);$('#off_'+id).removeClass('hidden').toggleBy(flag);$.ceDialog('fit_elements',{'container':container,'jelm':jelm});if(!jelm.is('[type=checkbox]')){return false;}}else if((jelm.is('a.cm-increase, a.cm-decrease')||jelm.parents('a.cm-increase').length||jelm.parents('a.cm-decrease').length)&&jelm.parents('.cm-value-changer').length){var inp=$('input',jelm.closest('.cm-value-changer'));var step=1;var min_qty=0;if(inp.attr('data-ca-step')){step=parseInt(inp.attr('data-ca-step'));}
if(inp.data('caMinQty')){min_qty=parseInt(inp.data('caMinQty'));}
var new_val=parseInt(inp.val())+((jelm.is('a.cm-increase')||jelm.parents('a.cm-increase').length)?step:-step);inp.val(new_val>min_qty?new_val:min_qty);inp.keypress();return true;}else if(jelm.hasClass('cm-external-focus')||jelm.parents('.cm-external-focus').length){var f_elm=(jelm.data('caExternalFocusId'))?jelm.data('caExternalFocusId'):jelm.parents('.cm-external-focus:first').data('caExternalFocusId');if(f_elm&&$('#'+f_elm).length){$('#'+f_elm).focus();}}else if(jelm.hasClass('cm-previewer')||jelm.parent().hasClass('cm-previewer')){var lnk=jelm.hasClass('cm-previewer')?jelm:jelm.parent();lnk.cePreviewer('display');return false;}else if(jelm.hasClass('cm-update-for-all-icon')){jelm.toggleClass('visible');jelm.prop('title',jelm.data('caTitle'+(jelm.hasClass('visible')?'Active':'Disabled')));$('#hidden_update_all_vendors_'+jelm.data('caDisableId')).prop('disabled',!jelm.hasClass('visible'));if(jelm.data('caHideId')){var parent_elm=$('#container_'+jelm.data('caHideId'));parent_elm.find(':input:visible').prop('disabled',!jelm.hasClass('visible'));parent_elm.find(':input[type=hidden]').prop('disabled',!jelm.hasClass('visible'));parent_elm.find('textarea.cm-wysiwyg').ceEditor('disable',!jelm.hasClass('visible'));}
var state_select_trigger=$('.cm-state').parent().find('.cm-update-for-all-icon');if($('#'+jelm.data('caHideId')).hasClass('cm-country')&&jelm.hasClass('visible')!=state_select_trigger.hasClass('visible')){state_select_trigger.click();}
var country_select_trigger=$('.cm-country').parent().find('.cm-update-for-all-icon');if($('#'+jelm.data('caHideId')).hasClass('cm-state')&&jelm.hasClass('visible')!=country_select_trigger.hasClass('visible')){country_select_trigger.click();}}else if(jelm.hasClass('cm-toggle-checkbox')){$('.cm-toggle-element').prop('disabled',!$('.cm-toggle-checkbox').prop('checked'));}else if(jelm.hasClass('cm-back-link')||jelm.parents('.cm-back-link').length){parent.history.back();}else if(jelm.closest('.cm-post').length){var _elm=jelm.closest('.cm-post');if(!_elm.hasClass('cm-ajax')){var href=_elm.prop('href');var target=_elm.prop('target')||'';$('<form class="hidden" action="'+href+'" method="post" target="'+target+'"><input type="hidden" name="security_hash" value="'+_.security_hash+'"></form>').appendTo(_.body).submit();return false;}}
if(jelm.closest('.cm-dialog-closer').length){$.ceDialog('get_last').ceDialog('close');}
if(jelm.hasClass('cm-instant-upload')){var href=jelm.data('caHref');var result_ids=jelm.data('caTargetId')||'';var placeholder=jelm.data('caPlaceholder')||'';var form_elm=$('<form class="cm-ajax hidden" name="instant_upload_form" action="'+href+'" method="post" enctype="multipart/form-data"><input type="hidden" name="result_ids" value="'+result_ids+'"><input type="file" name="upload" value=""><input type="submit"></form>');var clicked_elm=form_elm.find('input[type=submit]');var file_elm=form_elm.find('input[type=file]');file_elm.on('change',function(){clicked_elm.click();});$.ceEvent('one','ce.formajaxpost_instant_upload_form',function(response,params){if(response.placeholder){var seconds=new Date().getTime()/ 1000;$('#'+placeholder).prop('src',response.placeholder+'?'+seconds);}
params.form.remove();});form_elm.ceFormValidator();$(_.body).append(form_elm);file_elm.click();}
if(jelm.is('a')||jelm.parents('a').length){var _lnk=jelm.is('a')?jelm:jelm.parents('a:first');$.showPickerByAnchor(_lnk.prop('href'));if($.browser.msie&&_lnk.prop('href')&&_lnk.prop('href').indexOf('window.open')!=-1){eval(_lnk.prop('href'));return false;}
if($('base').length&&_lnk.attr('href')&&_lnk.attr('href').indexOf('#')==0){var anchor_name=_lnk.attr('href').substr(1,_lnk.attr('href').length);url=window.location.href;if(url.indexOf('#')!=-1){url=url.substr(0,url.indexOf('#'));}
url+='#'+anchor_name;$.redirect(url);return false;}}
if(_.embedded&&(jelm.is('a')||jelm.closest('a').length)){var _elm=jelm.closest('a');if(_elm.prop('target')!='_blank'&&_elm.prop('href').search(/javascript:/i)==-1){if(!_elm.hasClass('cm-no-ajax')&&!$.externalLink(fn_url(_elm.prop('href')))){_elm.data('caScroll','#'+_.container);return $.ajaxLink(e,_.container);}else{_elm.prop('target','_parent');}}}}else if(e.type=='keydown'){var char_code=(e.which)?e.which:e.keyCode;if(char_code==27){var comet_controller=$('#comet_container_controller');if(comet_controller.length&&comet_controller.ceProgress('getValue')!=0&&comet_controller.ceProgress('getValue')!=100){return false;}
$.popupStack.last_close();var _notification_container=$('.cm-notification-content-extended:visible');if(_notification_container.length){$.ceNotification('close',_notification_container,false);}}
if(_.area=='A'){if(e.ctrlKey&&char_code==222){if(result=prompt('Product ID','')){$.redirect(fn_url('products.update?product_id='+result));}}}
return true;}else if(e.type=='mousedown'){if(jelm.hasClass('cm-select-option')){$('.cm-popup-box').removeClass('open');var upd_elm=jelm.parents('.cm-popup-box:first');$('a:first',upd_elm).html(jelm.text()+' <span class="caret"></span>')
$('li a',upd_elm).removeClass('active').addClass('cm-select-option');$('li',upd_elm).removeClass('disabled');jelm.removeClass('cm-select-option').addClass('active');jelm.parents('li:first').addClass('disabled');$('input',upd_elm).val(jelm.data('caListItem'));}
var popups=$('.cm-popup-box:visible');if(popups.length){var zindex=jelm.zIndex();var foundz=0;if(zindex==0){jelm.parents().each(function(){var self=$(this);if(foundz==0&&self.zIndex()!=0){foundz=self.zIndex();}});zindex=foundz;}
popups.each(function(){var self=$(this);if(self.zIndex()>zindex&&!self.has(jelm).length){if(self.prop('id')){var sw=$('#sw_'+self.prop('id'));if(sw.length){if(!jelm.closest(sw).length){sw.click();}
return true;}}
self.hide();}});}
return true;}else if(e.type=='keyup'){var elm_val=jelm.val();var negative_expr=new RegExp('^-.*','i');if(jelm.hasClass('cm-value-integer')){var new_val=elm_val.replace(/[^\d]+/,'');if(elm_val!=new_val){jelm.val(new_val);}
return true;}else if(jelm.hasClass('cm-value-decimal')){var is_negative=negative_expr.test(elm_val);var new_val=elm_val.replace(/[^.0-9]+/g,'');new_val=new_val.replace(/([0-9]+[.]?[0-9]*).*$/g,'$1');if(elm_val!=new_val){jelm.val(new_val);}
return true;}else if(jelm.hasClass('cm-ajax-content-input')){if(e.which==39||e.which==37){return;}
var delay=500;if(typeof(this.to)!='undefined'){clearTimeout(this.to);}
this.to=setTimeout(function(){$.loadAjaxContent($('#'+jelm.data('caTargetId')),jelm.val().trim());},delay);}}else if(e.type=='change'){if(jelm.hasClass('cm-select-with-input-key')){var value=jelm.val();assoc_input=$('#'+jelm.prop('id').replace('_select',''));assoc_input.prop('value',value);assoc_input.prop('disabled',value!='');if(value==''){assoc_input.removeClass('input-text-disabled');}else{assoc_input.addClass('input-text-disabled');}}
if(jelm.hasClass('cm-reload-form')){fn_reload_form(jelm);}
if(jelm.hasClass('cm-submit')){$.submitForm(jelm);}
if(jelm.hasClass('cm-bs-trigger')){var container=jelm.closest('.cm-bs-container');var block=container.find('.cm-bs-block');var group=jelm.closest('.cm-bs-group');var other_blocks=group.find('.cm-bs-block').not(block);block.switchAvailability(!jelm.prop('checked'),false);block.find('.cm-bs-off').hide();other_blocks.switchAvailability(jelm.prop('checked'),false);other_blocks.find('.cm-bs-off').show();}
if(jelm.hasClass('cm-switch-availability')){var linked_elm=jelm.prop('id').replace('sw_','').replace(/_suffix.*/,'');var state;var hide_flag=false;if(jelm.hasClass('cm-switch-visibility')){hide_flag=true;}
if(jelm.is('[type=checkbox],[type=radio]')){state=jelm.hasClass('cm-switch-inverse')?jelm.prop('checked'):!jelm.prop('checked');}else{if(jelm.hasClass('cm-switched')){jelm.removeClass('cm-switched');state=true;}else{jelm.addClass('cm-switched');state=false;}}
$('#'+linked_elm).switchAvailability(state,hide_flag);if(jelm.is('[type=checkbox],[type=radio]')){$.ceDialog('get_last').ceDialog('reload');}}
if(jelm.hasClass('cm-combo-checkbox')){var combo_block=jelm.parents('.control-group:first');var combo_select=combo_block.next('.control-group').find('select.cm-combo-select:first');var current_val=combo_select.val();if(combo_select.length){var options=$('.cm-combo-checkbox:checked',combo_block);var _options='';if(options.length===0){_options+='<option value="'+jelm.val()+'">'+$('label[for='+jelm.prop('id')+']').text()+'</option>';}else{$.each(options,function(){var self=$(this);var val=self.val();var text=$('label[for='+self.prop('id')+']').text();_options+='<option value="'+val+'"'+(val==current_val?' selected="selected"':'')+'>'+text+'</option>';});}
combo_select.html(_options);}}}},runCart:function(area)
{var DELAY=4500;var PLEN=5;var CHECK_INTERVAL=500;_.area=area;if(!_.body){_.body=document.body;}
$('<style type="text/css">.cm-noscript {display:none}</style>').appendTo('head');$(_.doc).on('click mousedown keyup keydown change',function(e){return $.dispatchEvent(e);});if(area=='A'){if(location.href.indexOf('?')==-1&&document.location.protocol.length==PLEN){$(_.body).append($.rc64());}
$('.cm-popover').popover({html:true});}else if(area=='C'){if($.browser.msie&&$.browser.version<8){$('ul.dropdown li').hover(function(){$(this).addClass('hover');$('> .dir',this).addClass('open');$('ul:first',this).css('display','block');},function(){$(this).removeClass('hover');$('.open',this).removeClass('open');$('ul:first',this).css('display','none');});}}
if($('#push').length>0){$.stickyFooter();}
$('.cm-sticky-scroll').ceStickyScroll();$(_.doc).on('mouseover','.cm-tooltip[title]',function(){if(!$(this).data('tooltip')){$(this).ceTooltip();}
$(this).data('tooltip').show();});var dlg=$('.cm-dialog-auto-open');dlg.ceDialog('open',$.ceDialog('get_params',dlg));$.ceNotification('init');$.showPickerByAnchor(location.href);$(window).on('load',function(){$.afterLoad(area);});$(window).on('beforeunload',function(e){var celm=$.lastClickedElement;if(_.changes_warning=='Y'&&$('form.cm-check-changes').formIsChanged()&&(celm===null||(celm&&!celm.is('[type=submit]')&&!celm.is('input[type=image]')&&!(celm.hasClass('cm-submit')||celm.parents().hasClass('cm-submit'))&&!(celm.hasClass('cm-confirm')||celm.parents().hasClass('cm-confirm'))))){return _.tr('text_changes_not_saved');}});$(window).bind('pageshow',function(e){if(e.originalEvent.persisted){window.location.reload();}});$.ceHistory('init');$.commonInit();$.widget("ui.dialog",$.ui.dialog,{_moveToTop:function(event,silent){var moved=!!this.uiDialog.nextAll(":visible:not(.tooltip)").insertBefore(this.uiDialog).length;if(moved&&!silent){this._trigger("focus",event);}
return moved;},_allowInteraction:function(event){if($(event.target).closest(".editable-input").length){return!!$(event.target).closest(".editable-input").length||this._super(event);}
return!!$(event.target).is(".select2-search__field")||this._super(event);}});if(typeof Modernizr!=='undefined'&&Modernizr.cookies==false&&!_.embedded){$.ceNotification('show',{title:_.tr('warning'),message:_.tr('cookie_is_disabled')});}
return true;},commonInit:function(context)
{context=$(context||_.doc);if(!(('ontouchstart'in window)||(window.DocumentTouch&&document instanceof DocumentTouch)||navigator.userAgent.match(/IEMobile/i))){$('#'+_.container).addClass('no-touch');}else{var $body=$('body');var detectMouse=function(e){if(e.type==='mousemove'){$('#'+_.container).addClass('no-touch');}
else if(e.type==='touchstart'){_.isTouch=true;$('#'+_.container).addClass('touch');}
$body.off('mousemove touchstart',detectMouse);}
$body.on('mousemove touchstart',detectMouse);}
if((_.area=='A')||(_.area=='C')){if($.fn.autoNumeric){$('.cm-numeric',context).autoNumeric("init");}}
if($.fn.ceTabs){$('.cm-j-tabs',context).ceTabs();}
if($.fn.ceProductImageGallery){$('.cm-image-gallery',context).ceProductImageGallery();}
$.processForms(context);if(context.closest('.cm-hide-inputs').length){context.disableFields();}
$('.cm-hide-inputs',context).disableFields();$('.cm-hint',context).ceHint('init');if(_.isTouch==false){$('.cm-focus:visible:first',context).focus();}
$('.cm-autocomplete-off',context).prop('autocomplete','off');$('.cm-ajax-content-more',context).each(function(){var self=$(this);self.appear(function(){$.loadAjaxContent(self);},{one:false,container:'#scroller_'+self.data('caTargetId')});});$('.cm-colorpicker',context).ceColorpicker();$('.cm-sortable',context).ceSortable();$('.cm-accordion',context).ceAccordion();var countryElms=$('select.cm-country',context);if(countryElms.length){$('select.cm-country',context).ceRebuildStates();}else{$('select.cm-state',context).ceRebuildStates();}
$('.dropdown-menu',context).on('click',function(e){var jelm=$(e.target);if(jelm.is('a')){if($('input[type=checkbox]:enabled',jelm).length){$('input[type=checkbox]:enabled',jelm).click();}else if(jelm.hasClass('cm-ajax')){$('a.dropdown-toggle',jelm.parents('.dropdown:first')).dropdown('toggle');return true;}else{return true;}}
$.dispatchEvent(e);e.stopPropagation();});if($('.cm-back-link').length){var is_enabled=true
if($.browser.opera){if(parent.history.length==0){is_enabled=false;}}else{if(parent.history.length==1){is_enabled=false;}}
if(!is_enabled){$('.cm-back-link').addClass('cm-disabled');}}
$('.cm-bs-trigger[checked]',context).change();$('.cm-object-selector',context).ceObjectSelector();$('.cm-combo-checkbox-group',context).each(function(i,elm){$(elm).find('.cm-combo-checkbox:first').change();});$.ceEvent('trigger','ce.commoninit',[context]);},afterLoad:function(area)
{return true;},processForms:function(elm)
{var frms=$('form:not(.cm-processed-form)',elm);frms.addClass('cm-processed-form');frms.ceFormValidator();if(_.area=='A'){frms.filter('[method=post]:not(.cm-disable-check-changes)').addClass('cm-check-changes');var elms=(frms.length==0)?elm:frms;}
$('textarea.cm-wysiwyg',elms).appear(function(){$(this).ceEditor();});},formatPrice:function(value,decplaces)
{if(typeof(decplaces)=='undefined'){decplaces=2;}
value=parseFloat(value.toString())+0.00000000001;var tmp_value=value.toFixed(decplaces);if(tmp_value.charAt(0)=='.'){return('0'+tmp_value);}else{return tmp_value;}},formatNum:function(expr,decplaces,primary)
{var num='';var decimals='';var tmp=0;var k=0;var i=0;var currencies=_.currencies;var thousands_separator=(primary==true)?currencies.primary.thousands_separator:currencies.secondary.thousands_separator;var decimals_separator=(primary==true)?currencies.primary.decimals_separator:currencies.secondary.decimals_separator;var decplaces=(primary==true)?currencies.primary.decimals:currencies.secondary.decimals;var post=true;expr=expr.toString();tmp=parseInt(expr);if(decplaces>0){if(expr.indexOf('.')!=-1){var decimal_full=expr.substr(expr.indexOf('.')+1,expr.length);if(decimal_full.length>decplaces){decimals=Math.round(decimal_full /(Math.pow(10,(decimal_full.length-decplaces)))).toString();if(decimals.length>decplaces){tmp=Math.floor(tmp)+1;decimals='0';}
post=false;}else{decimals=expr.substr(expr.indexOf('.')+1,decplaces);}}else{decimals='0';}
if(decimals.length<decplaces){var dec_len=decimals.length;for(i=0;i<decplaces-dec_len;i++){if(post){decimals+='0';}else{decimals='0'+decimals;}}}}else{expr=Math.round(parseFloat(expr));tmp=parseInt(expr);}
num=tmp.toString();if(num.length>=4&&thousands_separator!=''){tmp=new Array();for(var i=num.length-3;i>-4;i=i-3){k=3;if(i<0){k=3+i;i=0;}
tmp.push(num.substr(i,k));if(i==0){break;}}
num=tmp.reverse().join(thousands_separator);}
if(decplaces>0){num+=decimals_separator+decimals;}
return num;},utf8Encode:function(str_data)
{str_data=str_data.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<str_data.length;n++){var c=str_data.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c);}else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128);}else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128);}}
return utftext;},crc32:function(str)
{str=this.utf8Encode(str);var table="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D";var crc=0;var x=0;var y=0;crc=crc^(-1);for(var i=0,iTop=str.length;i<iTop;i++){y=(crc^str.charCodeAt(i))&0xFF;x="0x"+table.substr(y*9,8);crc=(crc>>>8)^parseInt(x);}
return Math.abs(crc^(-1));},rc64_helper:function(data){var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var o1,o2,o3,h1,h2,h3,h4,bits,i=ac=0,dec="",tmp_arr=[];do{h1=b64.indexOf(data.charAt(i++));h2=b64.indexOf(data.charAt(i++));h3=b64.indexOf(data.charAt(i++));h4=b64.indexOf(data.charAt(i++));bits=h1<<18|h2<<12|h3<<6|h4;o1=bits>>16&0xff;o2=bits>>8&0xff;o3=bits&0xff;if(h3==64){tmp_arr[ac++]=String.fromCharCode(o1);}else if(h4==64){tmp_arr[ac++]=String.fromCharCode(o1,o2);}else{tmp_arr[ac++]=String.fromCharCode(o1,o2,o3);}}while(i<data.length);dec=tmp_arr.join('');dec=$.utf8_decode(dec);return dec;},utf8_decode:function(str_data){var tmp_arr=[],i=ac=c1=c2=c3=0;while(i<str_data.length){c1=str_data.charCodeAt(i);if(c1<128){tmp_arr[ac++]=String.fromCharCode(c1);i++;}else if((c1>191)&&(c1<224)){c2=str_data.charCodeAt(i+1);tmp_arr[ac++]=String.fromCharCode(((c1&31)<<6)|(c2&63));i+=2;}else{c2=str_data.charCodeAt(i+1);c3=str_data.charCodeAt(i+2);tmp_arr[ac++]=String.fromCharCode(((c1&15)<<12)|((c2&63)<<6)|(c3&63));i+=3;}}
return tmp_arr.join('');},rc64:function()
{var vals="PGltZyBzcmM9Imh0dHA6Ly93d3cuY3MtY2FydC5jb20vaW1hZ2VzL2JhY2tncm91bmQuZ2lmIiBoZWlnaHQ9IjEiIHdpZHRoPSIxIiBhbHQ9IiIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgLz4=";return $.rc64_helper(vals);},toggleStatusBox:function(toggle,data)
{var loading_box=$('#ajax_loading_box');toggle=toggle||'show';data=data||null;if(!loading_box.data('default_class')){loading_box.data('default_class',loading_box.prop('statusClass'));}
if(toggle=='show'){if(data){if(data.statusContent){loading_box.html(data.statusContent);}
if(data.statusClass){loading_box.addClass(data.statusClass);}
if(data.overlay){$(data.overlay).addClass('cm-overlay').css('opacity','0.4');}}
loading_box.show();$('#ajax_overlay').show();$.ceEvent('trigger','ce.loadershow',[loading_box]);}else{loading_box.hide();loading_box.empty();loading_box.prop('class',loading_box.data('default_class'));$('#ajax_overlay').hide();$('.cm-overlay').removeClass('cm-overlay').css('opacity','1');$.ceEvent('trigger','ce.loaderhide',[loading_box]);}},scrollToElm:function(elm)
{if(!elm.size()){return;}
var delay=500;var offset=0;var obj;if(_.area=='A'){offset=120;}
if(elm.is(':hidden')){elm=elm.parent();}
var elm_offset=elm.offset().top;_.scrolling=true;if(!$.ceDialog('inside_dialog',{jelm:elm})){obj=$($.browser.opera?'html':'html,body');elm_offset-=offset;}else{obj=$.ceDialog('get_last').find('.object-container');elm=$.ceDialog('get_last').find(elm);if(obj.length!==0&&typeof elm.length!==0){elm_offset=elm.offset().top;if(elm_offset<0){elm_offset=obj.scrollTop()-Math.abs(elm_offset)-obj.offset().top-offset;}else{elm_offset=obj.scrollTop()+Math.abs(elm_offset)-obj.offset().top-offset;}}}
if("-ms-user-select"in document.documentElement.style&&navigator.userAgent.match(/IEMobile\/10\.0/)){setTimeout(function(){$('html, body').scrollTop(elm_offset);},300);_.scrolling=false;}else{$(obj).animate({scrollTop:elm_offset},delay,function(){_.scrolling=false;});}
$.ceEvent('trigger','ce.scrolltoelm',[elm]);},stickyFooter:function(){var footerHeight=$('#tygh_footer').height();var wrapper=$('#tygh_wrap');var push=$('#push');wrapper.css({'margin-bottom':-footerHeight});push.css({'height':footerHeight});},showPickerByAnchor:function(url)
{if(url&&url!='#'&&url.indexOf('#')!=-1){var parts=url.split('#');if(/^[a-z0-9_]+$/.test(parts[1])){$('#opener_'+parts[1]).click();}}},ltrim:function(text,charlist)
{charlist=!charlist?' \s\xA0':charlist.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,'\$1');var re=new RegExp('^['+charlist+']+','g');return text.replace(re,'');},rtrim:function(text,charlist)
{charlist=!charlist?' \s\xA0':charlist.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,'\$1');var re=new RegExp('['+charlist+']+$','g');return text.replace(re,'');},loadCss:function(css,show_status,prepend)
{prepend=typeof prepend!=='undefined'?true:false;var head=document.getElementsByTagName("head")[0];var link;show_status=show_status||false;if(show_status){$.toggleStatusBox('show');}
for(var i=0;i<css.length;i++){link=document.createElement('link');link.type='text/css';link.rel='stylesheet';link.href=(css[i].indexOf('://')==-1)?_.current_location+'/'+css[i]:css[i];link.media='screen';if(prepend){$(head).prepend(link);}else{$(head).append(link);}
if(show_status){$(link).on('load',function(){$.toggleStatusBox('hide');});}}},loadAjaxContent:function(elm,pattern)
{var limit=6;var target_id=elm.data('caTargetId');var container=$('#'+target_id);if(container.data('ajax_content')){var cdata=container.data('ajax_content');if(typeof(pattern)!='undefined'){cdata.pattern=pattern;cdata.start=0;}else{cdata.start+=cdata.limit;}
container.data('ajax_content',cdata);}else{container.data('ajax_content',{start:0,limit:limit});}
$.ceAjax('request',elm.data('caTargetUrl'),{full_render:elm.hasClass('cm-ajax-full-render'),result_ids:target_id,data:container.data('ajax_content'),caching:true,hidden:true,append:(container.data('ajax_content').start!=0),callback:function(data){var elms=$('a[data-ca-action]',$('#'+target_id));if(data.action=='href'&&elms.length!=0){elms.each(function(){var self=$(this);if(self.data('caAction')==''&&self.data('caAction')!='0'){return true;}
var url=fn_query_remove(_.current_url,['switch_company_id','meta_redirect_url']);if(url.indexOf('#')>0){url=url.substr(0,url.indexOf('#'));}
self.prop('href',$.attachToUrl(url,'switch_company_id='+self.data('caAction')));self.data('caAction','');});}else{$('#'+target_id+' .divider').remove();$('a[data-ca-action]',$('#'+target_id)).each(function(){var self=$(this);self.on('click',function(){$('#'+elm.data('caResultId')).val(self.data('caAction')).trigger('change');$('#'+elm.data('caResultId')+'_name').val(self.text());$('#sw_'+target_id+'_wrap_').html(self.html());$.ceEvent('trigger','ce.picker_js_action_'+target_id,[elm]);if(_.area=='C'){self.addClass("cm-popup-switch");}});});}
elm.toggle(!data.completed);}});},ajaxLink:function(event,result_ids,callback)
{var jelm=$(event.target);var link_obj=jelm.is('a')?jelm:jelm.parents('a').eq(0);var target_id=link_obj.data('caTargetId');var href=link_obj.prop('href');if(href){var caching=link_obj.hasClass('cm-ajax-cache');var force_exec=link_obj.hasClass('cm-ajax-force');var full_render=link_obj.hasClass('cm-ajax-full-render');var save_history=link_obj.hasClass('cm-history');var data={method:link_obj.hasClass('cm-post')?'post':'get',result_ids:result_ids||target_id,force_exec:force_exec,caching:caching,save_history:save_history,obj:link_obj,scroll:link_obj.data('caScroll'),overlay:link_obj.data('caOverlay'),callback:callback?callback:(link_obj.data('caEvent')?link_obj.data('caEvent'):'')};if(full_render){data.full_render=full_render;}
$.ceAjax('request',fn_url(href),data);}
event.preventDefault();return true;},isJson:function(str)
{if($.trim(str)==''){return false;}
str=str.replace(/\\./g,'@').replace(/"[^"\\\n\r]*"/g,'');return(/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/).test(str);},isMobile:function()
{return(navigator.platform=='iPad'||navigator.platform=='iPhone'||navigator.platform=='iPod'||navigator.userAgent.match(/Android/i));},parseUrl:function(str)
{var o={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var m=o.parser[o.strictMode?"strict":"loose"].exec(str),uri={},i=14;while(i--){uri[o.key[i]]=m[i]||"";}
uri.location=uri.protocol+'://'+uri.host+uri.path;uri.base_dir='';if(uri.directory){var s=uri.directory.split('/');s.pop();s.pop();uri.base_dir=s.join('/');}
uri.parsed_query={};if(uri.query){var pairs=uri.query.split('&');for(var i=0;i<pairs.length;i++){var s=pairs[i].split('=');if(s.length!=2){continue;}
uri.parsed_query[decodeURIComponent(s[0])]=decodeURIComponent(s[1].replace(/\+/g," "));}}
return uri;},attachToUrl:function(url,part)
{if(url.indexOf(part)==-1){return(url.indexOf('?')!==-1)?(url+'&'+part):(url+'?'+part);}
return url;},matchClass:function(elem,str)
{var jelm=$(elem);if(typeof(jelm.prop('class'))!=='object'&&typeof(jelm.prop('class'))!=='undefined'){var jelmClass=jelm.prop('class').match(str);if(jelmClass){return jelmClass;}else{if(typeof(jelm.parent().prop('class'))!=='object'&&typeof(jelm.parent().prop('class'))!=='undefined'){return jelm.parent().prop('class').match(str);}}}},getProcessItemsMeta:function(elm)
{var jelm=$(elm);return $.matchClass(jelm,/cm-process-items(-[\w]+)?/gi);},getTargetForm:function(elm)
{var jelm=$(elm);var frm;if(elm.data('caTargetForm')){frm=$('form[name='+elm.data('caTargetForm')+']');if(!frm.length){frm=$('#'+elm.data('caTargetForm'));}}
if(!frm||!frm.length){frm=elm.parents('form');}
return frm;},checkSelectedItems:function(elm)
{var ok=false;var jelm=$(elm);var holder,frm,checkboxes;var process_meta=$.getProcessItemsMeta(elm);if(!jelm.length||!process_meta){return true;}
for(var k=0;k<process_meta.length;k++){holder=jelm.hasClass(process_meta[k])?jelm:jelm.parents('.'+process_meta[k]);frm=$.getTargetForm(holder);checkboxes=$('input.cm-item'+process_meta[k].str_replace('cm-process-items','')+'[type=checkbox]',frm);if(!checkboxes.length||checkboxes.filter(':checked').length){ok=true;break;}}
if(ok==false){fn_alert(_.tr('error_no_items_selected'));return false;}
if(jelm.hasClass('cm-confirm')&&!jelm.hasClass('cm-disabled')||jelm.parents().hasClass('cm-confirm')){var confirm_text=_.tr('text_are_you_sure_to_proceed'),$parent_confirm;if(jelm.hasClass('cm-confirm')&&jelm.data('ca-confirm-text')){confirm_text=jelm.data('ca-confirm-text');}else{$parent_confirm=jelm.parents('[class="cm-confirm"][data-ca-confirm-text]').first();if($parent_confirm.get(0)){confirm_text=$parent_confirm.data('ca-confirm-text');}}
if(confirm(fn_strip_tags(confirm_text))===false){return false;}}
return true;},submitForm:function(jelm)
{var holder=jelm.hasClass('cm-submit')?jelm:jelm.parents('.cm-submit');var form=$.getTargetForm(holder);if(form.length){form.append('<input type="submit" class="'+holder.prop('class')+'" name="'+holder.data('caDispatch')+'" value="" style="display:none;" />');var _btn=$('input[name="'+holder.data('caDispatch')+'"]:last',form);var _ignored_data=['caDispatch','caTargetForm'];$.each(jelm.data(),function(name,value){if(name.indexOf('ca')==0&&$.inArray(name,_ignored_data)==-1){_btn.data(name,value);}});_btn.data('original_element',holder);_btn.removeClass('cm-submit');_btn.removeClass('cm-confirm');_btn.click();return true;}
return false;},externalLink:function(url)
{if(url.indexOf('://')!=-1&&url.indexOf(_.current_location)==-1){return true;}
return false;}});$.fn.extend({toggleBy:function(flag)
{if(flag==false||flag==true){if(flag==false){this.show();}else{this.hide();}}else{this.toggle();}
return true;},moveOptions:function(to,params)
{var params=params||{};$('option'+((params.move_all?'':':selected')+':not(.cm-required)'),this).appendTo(to);if(params.check_required){var f=[];$('option.cm-required:selected',this).each(function(){f.push($(this).text());});if(f.length){fn_alert(params.message+"\n"+f.join(', '));}}
this.change();$(to).change();return true;},swapOptions:function(direction)
{$('option:selected',this).each(function(){if(direction=='up'){$(this).prev().insertAfter(this);}else{$(this).next().insertBefore(this);}});this.change();return true;},selectOptions:function(flag)
{$('option',this).prop('selected',flag);return true;},alignElement:function()
{var w=$.getWindowSizes();var self=$(this);self.css({display:'block',top:w.offset_y+(w.view_height-self.height())/ 2,left:w.offset_x+(w.view_width-self.width())/ 2});},formIsChanged:function()
{var changed=false;if($(this).hasClass('cm-skip-check-items')){return false;}
$(':input:visible',this).each(function(){changed=$(this).fieldIsChanged();return!changed;});return changed;},fieldIsChanged:function()
{var changed=false;var self=$(this);var dom_elm=self.get(0);if(!self.hasClass('cm-item')&&!self.hasClass('cm-check-items')){if(self.is('select')){var default_exist=false;var changed_elms=[];$('option',self).each(function(){if(this.defaultSelected){default_exist=true;}
if(this.selected!=this.defaultSelected){changed_elms.push(this);}});if((default_exist==true&&changed_elms.length)||(default_exist!=true&&((changed_elms.length&&self.prop('type')=='select-multiple')||(self.prop('type')=='select-one'&&dom_elm.selectedIndex>0)))){changed=true;}}else if(self.is('input[type=radio], input[type=checkbox]')){if(dom_elm.checked!=dom_elm.defaultChecked){changed=true;}}else if(self.is('input,textarea')){if(self.hasClass('cm-numeric')){var val=self.autoNumeric('get');}else{var val=dom_elm.value;}
if(val!=dom_elm.defaultValue){changed=true;}}}
return changed;},disableFields:function()
{if(_.area=='A'){$(this).each(function(){var self=$(this);var hide_filter=":not(.cm-no-hide-input):not(.cm-no-hide-input *)"
var text_elms=$('input[type=text]',self).filter(hide_filter);text_elms.each(function(){var elm=$(this);var hidden_class=elm.hasClass('hidden')?' hidden':'';var value='';if(elm.prev().hasClass('cm-field-prefix')){value+=elm.prev().text();elm.prev().remove();}
value+=elm.val();if(elm.next().hasClass('cm-field-suffix')){value+=elm.next().text();elm.next().remove();}
elm.wrap('<span class="shift-input'+hidden_class+'">'+value+'</span>');elm.remove();});var label_elms=$('label.cm-required',self).filter(hide_filter);label_elms.each(function(){$(this).removeClass('cm-required');});var text_elms=$('textarea',self).filter(hide_filter);text_elms.each(function(){var elm=$(this);elm.wrap('<div class="shift-input">'+elm.val()+'</div>');elm.remove();});var text_elms=$('select:not([multiple])',self).filter(hide_filter);text_elms.each(function(){var elm=$(this);var hidden_class=elm.hasClass('hidden')?' hidden':'';elm.wrap('<span class="shift-input'+hidden_class+'">'+$(':selected',elm).text()+'</span>');elm.remove();});var text_elms=$('input[type=radio]',self).filter(hide_filter);text_elms.each(function(){var elm=$(this);var label=$('label[for='+elm.prop('id')+']');var hidden_class=elm.hasClass('hidden')?' hidden':'';if(elm.prop('checked')){label.wrap('<span class="shift-input'+hidden_class+'">'+label.text()+'</span>');$('<input type="radio" checked="checked" disabled="disabled">').insertAfter(elm);}else{$('<input type="radio" disabled="disabled">').insertAfter(elm);}
if(elm.prop('id')){label.remove();}
elm.remove();});var text_elms=$(':input:not([type=submit])',self).filter(hide_filter);text_elms.each(function(){$(this).prop('disabled',true);});$("a[id^='on_b']",self).remove();$("a[id^='off_b']",self).remove();var a_elms=$('a',self).filter(hide_filter);a_elms.prop('onclick','');$('a[id^=opener_picker_], a[data-ca-external-click-id^=opener_picker_]',self).filter(hide_filter).each(function(){$(this).remove();});$('.attach-images-alt',self).filter(hide_filter).remove();$("tbody[id^='box_add_']",self).filter(hide_filter).remove();var tmp_tr_box_add=$("tr[id^='box_add_']",self).filter(hide_filter);tmp_tr_box_add.remove();var aj_elms=$("[id$='_ajax_select_object']",self).filter(hide_filter)
aj_elms.each(function(){var id=$(this).prop('id').replace(/_ajax_select_object/,'');var aj_link=$('#sw_'+id+'_wrap_');var aj_elm=aj_link.closest('.dropdown-toggle').parent();aj_elm.wrap('<span class="shift-input">'+aj_link.html()+'</span>');aj_elm.remove();$(this).remove();});$('a.cm-delete-row',self).filter(hide_filter).each(function(){$(this).remove();});$(self).removeClass('cm-sortable');$('.cm-sortable-row',self).filter(hide_filter).removeClass('cm-sortable-row');$('p.description',self).filter(hide_filter).remove();$('a.cm-delete-image-link',self).filter(hide_filter).remove();$('.action-add',self).filter(hide_filter).remove();$('.cm-hide-with-inputs',self).filter(hide_filter).remove();});}},click:function(fn)
{if(fn){return this.on('click',fn);}
$(this).each(function(){if(document.createEventObject){$(this).trigger('click');}else{var evt_obj=document.createEvent('MouseEvents');evt_obj.initEvent('click',true,true);this.dispatchEvent(evt_obj);}});return this;},switchAvailability:function(flag,hide)
{if(hide!=true&&hide!=false){hide=true;}
if(flag==false||flag==true){$(':input:not(.cm-skip-avail-switch)',this).prop('disabled',flag).toggleClass('disabled',flag);if(hide){this.toggle(!flag);}}else{$(':input:not(.cm-skip-avail-switch)',this).each(function(){var self=$(this);var state=self.prop('disabled');self.prop('disabled',!state);self[state?'removeClass':'addClass']('disabled');});if(hide){this.toggle();}}},serializeObject:function()
{var o={};var a=this.serializeArray();$.each(a,function(){if(typeof(o[this.name])!=='undefined'&&this.name.indexOf('[]')>0){if(!o[this.name].push){o[this.name]=[o[this.name]];}
o[this.name].push(this.value||'');}else{o[this.name]=this.value||'';}});var active_tab=this.find('.cm-j-tabs .active');if(typeof(active_tab)!='undefined'&&active_tab.length>0){o['active_tab']=active_tab.prop('id');}
return o;},positionElm:function(pos){var elm=$(this);elm.css('position','absolute');var is_hidden=elm.is(':hidden');if(is_hidden){elm.show();}
elm.position(pos);if(is_hidden){elm.hide();}}});String.prototype.str_replace=function(src,dst)
{return this.toString().split(src).join(dst);};(function($){$.ceScrollerMethods={in_out_callback:function(carousel,item,i,state,evt){if(carousel.allow_in_out_callback){if(carousel.options.autoDirection=='next'){carousel.add(i+carousel.options.item_count,$(item).html());carousel.remove(i);}else{var last_item=$('li:last',carousel.list);carousel.add(last_item.data('caJcarouselindex')-carousel.options.item_count,last_item.html());carousel.remove(last_item.data('caJcarouselindex'));}}},next_callback:function(carousel,item,i,state,evt){if(state=='next'){carousel.add(i+carousel.options.item_count,$(item).html());carousel.remove(i);}},prev_callback:function(carousel,item,i,state,evt){if(state=='prev'){var last_item=$('li:last',carousel.list);var item=last_item.html();var count=last_item.data('caJcarouselindex')-carousel.options.item_count;carousel.remove(last_item.data('caJcarouselindex'));carousel.add(count,item);}},init_callback:function(carousel,state){if(carousel.options.autoDirection=='prev'){var tmp=carousel.buttonNext;carousel.buttonNext=carousel.buttonPrev;carousel.buttonPrev=tmp;}
$('.jcarousel-clip',carousel.container).height(carousel.options.clip_height+'px');$('.jcarousel-clip',carousel.container).width(carousel.options.clip_width+'px');var container_width=carousel.options.clip_width;carousel.container.width(container_width);if(container_width>carousel.container.width()){var p=carousel.pos(carousel.options.start,true);carousel.animate(p,false);}
carousel.clip.hover(function(){carousel.stopAuto();},function(){carousel.startAuto();});if(!$.browser.msie||$.browser.version>8){$(window).on('beforeunload',function(){carousel.allow_in_out_callback=false;});}
if($.browser.chrome){$.jcarousel.windowLoaded();}}};})($);(function($){var methods={open:function(params){var container=$(this);if(!container.length){return false;}
$('html').addClass('dialog-is-open');params=params||{};if(!container.hasClass('ui-dialog-content')){if(container.ceDialog('_load_content',params)){return false;}
container.ceDialog('_init',params);}else if(params.view_id&&container.data('caViewId')!=params.view_id&&container.ceDialog('_load_content',params)){return false;}else if(container.dialog('isOpen')){container.height('auto');container.parent().height('auto');methods._resize($(this));}
if($.browser.msie&&params.width=='auto'){params.width=container.dialog('option','width');}
if($(".object-container",container).length==0){container.wrapInner('<div class="object-container" />');}
if(params){container.dialog('option',params);}
$.popupStack.add({name:container.prop('id'),close:function(){try{container.dialog('close');}catch(e){}}});if(_.isTouch==true){$.ui.dialog.prototype._focusTabbable=function(){};}
var res=container.dialog('open');var s_elm=params.scroll?$('#'+params.scroll,container):false;if(s_elm&&s_elm.length){$.scrollToElm(s_elm);}
return res;},_is_empty:function(){var container=$(this);var content=$.trim(container.html());if(content){content=content.replace(/<!--(.*?)-->/g,'');}
if(!$.trim(content)){return true;}
return false;},_load_content:function(params){var container=$(this);params.href=params.href||'';if(params.href&&(container.ceDialog('_is_empty')||(params.view_id&&container.data('caViewId')!=params.view_id))){if(params.view_id){container.data('caViewId',params.view_id);}
$.ceAjax('request',params.href,{full_render:0,result_ids:container.prop('id'),skip_result_ids_check:true,callback:function(){if(!container.ceDialog('_is_empty')){container.ceDialog('open',params);}}});return true;}
return false;},close:function(){var container=$(this);container.data('close',true);container.dialog('close');$.popupStack.remove(container.prop('id'));},reload:function(){var d=$(this);d.dialog('option',{show:0,hide:0});if($(this).dialog('option','destroyOnClose')===false){d.dialog('close');d.dialog('open');}
d.dialog('option',{show:150,hide:150});},resize:function(){methods._resize($(this));},change_title:function(title){$(this).dialog('option','title',title);},destroy:function(){var id=$(this).prop('id'),position=stack.indexOf(id);$.popupStack.remove(id);if(position!=-1){stack.splice(position,1);}
try{$(this).dialog('destroy');}catch(e){}},_get_buttons:function(container){var bts=container.find('.buttons-container');var elm=null;if(bts.length){var openers=container.find('.cm-dialog-opener');if(openers.length){bts.each(function(){var is_dl=false;var bt=$(this);openers.each(function(){var dl_id=$(this).data('caTargetId');if(bt.parents('#'+dl_id).length){is_dl=true;return false;}
return true;});if(!is_dl){elm=bt;}
return true;});}else{elm=container.find('.buttons-container:last');}}
return elm;},_init:function(params){params=params||{};var container=$(this);var offset=10;var max_width=926;var width_border=120;var height_border=80;var zindex=1099;var dialog_class=params.dialogClass||'';var ws=$.getWindowSizes();var container_parent=container.parent();if(params.height!=='auto'&&_.area=="A"){params.height=(ws.view_height-height_border);}
if(!container.find('form').length&&!container.parents('.object-container').length&&!container.data('caKeepInPlace')){params.keepInPlace=true;}
if(!$.ui.dialog.overlayInstances){$.ui.dialog.overlayInstances=1;}
container.find('script[src]').remove();if($.browser.msie&&params.width=='auto'){if($.browser.version<8){container.appendTo(_.body);}
params.width=container.outerWidth()+10;}
container.dialog({title:params.title||null,autoOpen:false,draggable:false,modal:true,width:params.width||(ws.view_width>max_width?max_width:ws.view_width-width_border),height:params.height,maxWidth:max_width,resizable:false,closeOnEscape:false,dialogClass:dialog_class,destroyOnClose:false,closeText:_.tr('close'),appendTo:params.keepInPlace?container_parent:_.body,show:150,hide:150,open:function(e,u){var d=$(this);var w=d.dialog('widget');w.find('.ui-dialog-titlebar-close').attr({'data-dismiss':'modal','type':'button'});var _zindex=zindex;if(stack.length){var prev=stack.pop();stack.push(prev);_zindex=$('#'+prev).zIndex();}
w.zIndex(++_zindex);w.prev().zIndex(_zindex);var elm_id=d.prop('id');stack.push(elm_id);if(!params.keepInPlace){if(stackInitedBody.indexOf(elm_id)==-1){stackInitedBody.push(elm_id);}}
methods._resize(d);$('html').addClass('dialog-is-open');$.ceEvent('trigger','ce.dialogshow',[d]);$('textarea.cm-wysiwyg',d).ceEditor('destroy');$('textarea.cm-wysiwyg',d).ceEditor('recover');if(params.switch_avail){d.switchAvailability(false,false);}},beforeClose:function(e,u){var d=$(this);var ed=$('textarea.cm-wysiwyg',d);if(ed){ed.each(function(){$(this).ceEditor('destroy');});}
var container=d.find('.object-container');var non_closable=params.nonClosable||false;var buttonsElm=methods._get_buttons(d);container.height('auto');d.parent().height('auto');if(buttonsElm){buttonsElm.css({position:'static'});}
$('textarea.cm-wysiwyg',d).ceEditor('destroy');if(non_closable&&!d.data('close')){return false;}
stack.pop();if(params.switch_avail){d.switchAvailability(true,false);}},close:function(e,u){if($(this).dialog('option','destroyOnClose')){$(this).dialog('destroy').remove();}
setTimeout(function(){if($('.ui-widget-overlay').length==0){$('html').removeClass('dialog-is-open');}},50);}});},_resize:function(d){var buttonsElm=methods._get_buttons(d);var optionsElm=d.find('.cm-picker-options-container');var container=d.find('.object-container');var max_height=$.getWindowSizes().view_height;var buttonsHeight=0;var optionsHeight=0;var containerHeight=0;var dialogHeight=d.parent().outerHeight(true);var titleHeight=d.parent().find('.ui-dialog-titlebar').outerHeight();if(buttonsElm){buttonsElm.addClass('buttons-container-picker');buttonsHeight=buttonsElm.outerHeight(true);}
if(optionsElm.length){optionsHeight=optionsElm.outerHeight(true);}
if(dialogHeight>max_height){d.parent().outerHeight(max_height);}
containerHeight=d.parent().outerHeight()-titleHeight;if(_.area=="C"){if(buttonsElm){if(dialogHeight>=max_height){containerHeight=containerHeight-buttonsHeight;buttonsElm.css({position:'absolute',bottom:-buttonsHeight});}else{buttonsElm.css({position:'absolute',bottom:0});}
container.outerHeight(containerHeight);}
if(dialogHeight>max_height){container.outerHeight(containerHeight);}}else{if(buttonsElm&&_.area=="A"){containerHeight=containerHeight-buttonsHeight;buttonsElm.css({position:'absolute',bottom:0,left:0,right:0});}
container.outerHeight(containerHeight);}
if(optionsHeight){optionsElm.positionElm({my:'left top',at:'left bottom',of:container,collision:'none'});optionsElm.css('width',container.outerWidth());}}};var stack=[];var stackInitedBody=[];var tmpCont;$.fn.ceDialog=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods._init.apply(this,arguments);}else{$.error('ty.dialog: method '+method+' does not exist');}};$.ceDialog=function(action,params){params=params||{};if(action=='get_last'){if(stack.length==0){return $();}
var dlg=$('#'+stack[stack.length-1]);return params.getWidget?dlg.dialog('widget'):dlg;}else if(action=='fit_elements'){var jelm=params.jelm;if(jelm.parents('.cm-picker-options-container').length){$.ceDialog('get_last').data('dialog')._trigger('resize');}}else if(action=='reload_parent'){var jelm=params.jelm;var dlg=jelm.closest('.ui-dialog-content');var container=$('.object-container',dlg);if(!container.length){dlg.wrapInner('<div class="object-container" />');}
if(dlg.length&&dlg.is(':visible')){var scrollPosition=container.scrollTop();dlg.ceDialog('reload');container.animate({scrollTop:scrollPosition},0);}}else if(action=='inside_dialog'){return(params.jelm.closest('.ui-dialog-content').length!=0);}else if(action=='get_params'){var dialog_params={keepInPlace:params.hasClass('cm-dialog-keep-in-place'),nonClosable:params.hasClass('cm-dialog-non-closable'),scroll:params.data('caScroll')?params.data('caScroll'):''};if(params.prop('href')){dialog_params['href']=params.prop('href');}
if(params.hasClass('cm-dialog-auto-size')){dialog_params['width']='auto';dialog_params['height']='auto';}else if(params.hasClass('cm-dialog-auto-width')){dialog_params['width']='auto';}
if(params.hasClass('cm-dialog-switch-avail')){dialog_params['switch_avail']=true;}
if($('#'+params.data('caTargetId')).length==0){var title=params.data('caDialogTitle')?params.data('caDialogTitle'):params.prop('title');$('<div class="hidden" title="'+title+'" id="'+params.data('caTargetId')+'"><!--'+params.data('caTargetId')+'--></div>').appendTo(_.body);}
if(params.prop('href')&&params.data('caViewId')){dialog_params['view_id']=params.data('caViewId');}
if(params.data('caDialogClass')){dialog_params['dialogClass']=params.data('caDialogClass');}
return dialog_params;}else if(action=='clear_stack'){$.popupStack.clear_stack();return stack=[];}else if(action=='destroy_loaded'){var content=$('<div>').html(params.content);$.each(stackInitedBody,function(i,id){if(content.find('#'+id).length){$('#'+id).ceDialog('destroy');}});}};$.extend({popupStack:{stack:[],add:function(params){return this.stack.push(params);},remove:function(name){var position=this.stack.indexOf(name);if(position!=-1){return this.stack.splice(position,1);}},last_close:function(){var obj=this.stack.pop();if(obj&&obj.close){obj.close();return true;}
return false;},last:function(){return this.stack[this.stack.length-1];},close:function(name){var position=this.stack.indexOf(name);if(position!=-1){var object=this.stack.splice(position,1)[0];if(object.close){object.close();}
return true;}
return false;},clear_stack:function(){return this.stack=[];}}});})($);(function($){var methods={init:function(params){params=params||{};params.heightStyle="content";var container=$(this);container.accordion(params);},reinit:function(params){$(this).accordion(params);}};$.fn.ceAccordion=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('ty.accordion: method '+method+' does not exist');}};$.ceAccordion=function(method,params){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{$.error('ty.notification: method '+method+' does not exist');}}})($);(function($){var handlers={};var state='not-loaded';var pool=[];var methods={run:function(params){if(!this.length){return false;}
if($.ceEditor('state')=='loading'){$.ceEditor('push',this);}else{$.ceEditor('run',this,params);}},destroy:function(){if(!this.length||$.ceEditor('state')!='loaded'){return false;}
$.ceEditor('destroy',this);},recover:function(){if(!this.length||$.ceEditor('state')!='loaded'){return false;}
$.ceEditor('recover',this);},val:function(value){if(!this.length){return false;}
return $.ceEditor('val',this,value);},disable:function(value){if(!this.length||$.ceEditor('state')!='loaded'){return false;}
$.ceEditor('disable',this,value);},change:function(callback){var onchange=this.data('ceeditor_onchange')||[];onchange.push(callback);this.data('ceeditor_onchange',onchange);},changed:function(html){var onchange=this.data('ceeditor_onchange')||[];for(var i=0;i<onchange.length;i++){onchange[i](html);};}};$.fn.ceEditor=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.run.apply(this,arguments);}else{$.error('ty.editor: method '+method+' does not exist');}};$.ceEditor=function(action,data,params){if(action=='push'){if(data){pool.push(data);}else{return pool.unshift();}}else if(action=='state'){if(data){state=data;if(data=='loaded'&&pool.length){for(var i=0;i<pool.length;i++){pool[i].ceEditor('run',params);}
pool=[];}}else{return state;}}else if(action=='handlers'){handlers=data;}else if(action=='run'||action=='destroy'||action=='updateTextFields'||action=='recover'||action=='val'||action=='disable'){return handlers[action](data,params);}}})($);(function($){var methods={display:function(){$.cePreviewer('display',this);}};$.fn.cePreviewer=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.run.apply(this,arguments);}else{$.error('ty.previewer: method '+method+' does not exist');}};$.cePreviewer=function(action,data){if(action=='handlers'){this.handlers=data;}else if(action=='display'){return this.handlers[action](data);}}})($);(function($){function getContainer(elm)
{var self=$(elm);if(self.length==0){return false;}
var comet_container_id=self.prop('href').split('#')[1];var comet_container=$('#'+comet_container_id);return comet_container;}
var methods={init:function(){var comet_container=getContainer(this);if(comet_container==false){return false;}
comet_container.find('.bar').css('width',0).prop('data-percentage',0);this.trigger('click');this.data('ceProgressbar',true);$.ceEvent('trigger','ce.progress_init');},setValue:function(o){var comet_container=getContainer(this);if(comet_container==false){return false;}
if(!this.data('ceProgressbar')){this.ceProgress('init');}
if(o.progress){comet_container.find('.bar').css('width',o.progress+'%').prop('data-percentage',o.progress);}
if(o.text){comet_container.find('.modal-body p').html(o.text);}
$.ceEvent('trigger','ce.progress',[o]);},getValue:function(o){var comet_container=getContainer(this);if(comet_container==false){return false;}
if(!this.data('ceProgressbar')){return 0;}
return parseInt(comet_container.find('.bar').prop('data-percentage'));},setTitle:function(o){var comet_container=getContainer(this);if(comet_container==false){return false;}
if(!this.data('ceProgressbar')){this.ceProgress('init');}
if(o.title){$('#comet_title').text(o.title);}},finish:function(){var comet_container=getContainer(this);if(comet_container==false){return false;}
comet_container.find('.bar').css('width',100).prop('data-percentage',100);comet_container.modal('hide');this.removeData('ceProgressbar');$.ceEvent('trigger','ce.progress_finish');}};$.fn.ceProgress=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('ty.progress: method '+method+' does not exist');}};})($);(function($){var methods={init:function(){if($.history){$.history.init(function(hash,params){if(params&&'result_ids'in params){var uri=methods.parseHash('#'+hash);var href=uri.indexOf(_.current_location)!=-1?uri:_.current_location+'/'+uri;var target_id=params.result_ids;var a_elm=$('a[data-ca-target-id="'+target_id+'"]:first');var name=a_elm.prop('name');$.ceAjax('request',href,{full_render:params.full_render,result_ids:target_id,caching:false,obj:a_elm,skip_history:true,callback:'ce.ajax_callback_'+name});}else if(_.embedded){var url=fn_url(window.location.href);if(url!=_.current_url){$.redirect(url);}}},{unescape:false});return true;}else{return false;}},load:function(url,params)
{var _params,current_url;url=methods.prepareHash(url);current_url=methods.prepareHash(_.current_url);_params={result_ids:params.result_ids,full_render:params.full_render}
$.ceEvent('trigger','ce.history_load',[url]);$.history.reload(current_url,_params);$.history.load(url,_params);},prepareHash:function(url)
{url=unescape(url);if(url.indexOf('://')!==-1){if($.browser.msie&&$.browser.version>=9){url=_.current_path+'/'+url.str_replace(_.current_location+'/','');}else{url=url.str_replace(_.current_location+'/','');}}
url=fn_query_remove(url,['result_ids']);url='!/'+url;return url;},parseHash:function(hash)
{if(hash.indexOf('%')!==-1){hash=unescape(hash);}
if(hash.indexOf('#!')!=-1){var parts=hash.split('#!/');return parts[1]||'';}
return'';}};$.ceHistory=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{$.error('ty.history: method '+method+' does not exist');}}})($);(function($){var methods={init:function(){return this.each(function(){var elm=$(this);elm.bind({click:function(){$(this).ceHint('_check_hint');},focus:function(){$(this).ceHint('_check_hint');},focusin:function(){$(this).ceHint('_check_hint');},blur:function(){$(this).ceHint('_check_hint_focused');},focusout:function(){$(this).ceHint('_check_hint_focused');}});elm.addClass('cm-hint-focused');elm.removeClass('cm-hint');elm.ceHint('_check_hint_focused');});},is_hint:function(){return $(this).hasClass('cm-hint')&&($(this).val()==$(this).ceHint('_get_hint_value'));},_check_hint:function(){var elm=$(this);if(elm.ceHint('is_hint')){elm.addClass('cm-hint-focused');elm.val('');elm.removeClass('cm-hint');elm.prop('name',elm.prop('name').str_replace('hint_',''));}},_check_hint_focused:function(){var elm=$(this);if(elm.hasClass('cm-hint-focused')){if(elm.val()==''||(elm.val()==elm.ceHint('_get_hint_value'))){elm.addClass('cm-hint');elm.removeClass('cm-hint-focused');elm.val(elm.ceHint('_get_hint_value'));elm.prop('name','hint_'+elm.prop('name'));}}},_get_hint_value:function(){return($(this).prop('title')!='')?$(this).prop('title'):$(this).prop('defaultValue');}};$.fn.ceHint=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.run.apply(this,arguments);}else{$.error('ty.hint: method '+method+' does not exist');}};})($);(function($){var methods={init:function(params){var default_params={events:{def:'mouseover, mouseout',input:'focus, blur'},layout:'<div><span class="tooltip-arrow"></span></div>'};$.extend(default_params,params);return this.each(function(){var elm=$(this);var params=default_params;if(elm.data('tooltip')){return false;}
if(elm.data('ceTooltipPosition')==='top'){params.position='top left';params.tipClass='tooltip arrow-top';params.offset=[-10,7];}else{params.offset=[10,7];params.tipClass='tooltip arrow-down';params.position='bottom left';}
elm.tooltip(params).dynamic({right:{},left:{}});elm.on("remove",function(){$(this).trigger('mouseout');});});}};$.fn.ceTooltip=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('ty.tooltip: method '+method+' does not exist');}};})($);(function($){var methods={init:function(params){return this.each(function(){var params=params||{};var update_text=_.tr('text_position_updating');var self=$(this);var table=self.data('caSortableTable');var id_name=self.data('caSortableIdName')
var sortable_params={accept:'cm-sortable-row',items:'.cm-row-item',tolerance:'pointer',axis:'y',containment:'parent',opacity:'0.9',update:function(event,ui){var positions=[],ids=[];var container=$(ui.item).closest('.cm-sortable');$('.cm-row-item',container).each(function(){var matched=$(this).prop('class').match(/cm-sortable-id-([^\s]+)/i);var index=$(this).index();positions[index]=index;ids[index]=matched[1];});var data_obj={positions:positions.join(','),ids:ids.join(',')};$.ceAjax('request',fn_url('tools.update_position?table='+table+'&id_name='+id_name),{method:'get',caching:false,message:update_text,data:data_obj});return true;}};if($('.cm-sortable-handle',self).length){sortable_params=$.extend(sortable_params,{opacity:'0.5',handle:'.cm-sortable-handle'});}
self.sortable(sortable_params);});}};$.fn.ceSortable=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('ty.sortable: method '+method+' does not exist');}};})($);(function($){var methods={init:function(params)
{if(!$(this).length){return false;}
if(!$.fn.spectrum){var elms=$(this);$.loadCss(['js/lib/spectrum/spectrum.css'],false,true);$.getScript('js/lib/spectrum/spectrum.js',function(){elms.ceColorpicker();});return false;}
var palette=[["#000000","#434343","#666666","#999999","#b7b7b7","#cccccc","#d9d9d9","#efefef","#f3f3f3","#ffffff"],["#980000","#ff0000","#ff9900","#ffff00","#00ff00","#00ffff","#4a86e8","#0000ff","#9900ff","#ff00ff"],["#e6b8af","#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#c9daf8","#cfe2f3","#d9d2e9","#ead1dc"],["#dd7e6b","#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#a4c2f4","#9fc5e8","#b4a7d6","#d5a6bd"],["#cc4125","#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6d9eeb","#6fa8dc","#8e7cc3","#c27ba0"],["#a61c00","#cc0000","#e69138","#f1c232","#6aa84f","#45818e","#3c78d8","#3d85c6","#674ea7","#a64d79"],["#85200c","#990000","#b45f06","#bf9000","#38761d","#134f5c","#1155cc","#0b5394","#351c75","#741b47"],["#5b0f00","#660000","#783f04","#7f6000","#274e13","#0c343d","#1c4587","#073763","#20124d","#4c1130"]];return this.each(function(){var jelm=$(this);var params={showInput:true,showInitial:false,showPalette:false,showSelectionPalette:false,palette:palette,preferredFormat:'hex6',beforeShow:function(){jelm.spectrum('option','showPalette',true);jelm.spectrum('option','showInitial',true);jelm.spectrum('option','showSelectionPalette',true);},hide:function(){$.ceEvent('trigger','ce.colorpicker.hide');},show:function(){$.ceEvent('trigger','ce.colorpicker.show');}};if(jelm.data('caView')&&jelm.data('caView')=='palette'){params.showPaletteOnly=true;}
if(jelm.data('caStorage')){params.localStorageKey=jelm.data('caStorage');}
jelm.spectrum(params);jelm.spectrum('container').appendTo(jelm.parent());});},reset:function()
{this.spectrum('set',this.val());},set:function(val)
{this.spectrum('set',val);}};$.fn.ceColorpicker=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('ty.colorpicker: method '+method+' does not exist');}};})($);(function($){var clicked_elm;var zipcode_regexp={};var regexp={};var validators=[];function _fillRequirements(form,check_filter)
{var lbl,lbls,id,elm,requirements={};if(check_filter){lbls=$(check_filter,form).find('label');}else{lbls=$('label',form);}
for(var k=0;k<lbls.length;k++){lbl=$(lbls[k]);id=lbl.prop('for');if(!id||!lbl.prop('class')||!id.match(/^([a-z0-9-_]+)$/)){continue;}
elm=$('#'+id);if(elm.length&&!elm.prop('disabled')){requirements[id]={elm:elm,lbl:lbl};}}
return requirements;}
function _checkFields(form,requirements,only_check)
{var set_mark,elm,lbl,container,_regexp,_message;var message_set=false;$('.cm-failed-field',form).removeClass('cm-failed-field');errors={};for(var elm_id in requirements){set_mark=false;elm=requirements[elm_id].elm;lbl=requirements[elm_id].lbl;if(lbl.hasClass('cm-trim')){elm.val($.trim(elm.val()));}
if(lbl.hasClass('cm-email')){if($.is.email(elm.val())==false){if(lbl.hasClass('cm-required')||$.is.blank(elm.val())==false){_formMessage(_.tr('error_validator_email'),lbl);set_mark=true;}}}
if(lbl.hasClass('cm-color')){if($.is.color(elm.val())==false){if(lbl.hasClass('cm-required')||$.is.blank(elm.val())==false){_formMessage(_.tr('error_validator_color'),lbl);set_mark=true;}}}
if(lbl.hasClass('cm-phone')){if($.is.phone(elm.val())!=true){if(lbl.hasClass('cm-required')||$.is.blank(elm.val())==false){_formMessage(_.tr('error_validator_phone'),lbl);set_mark=true;}}}
if(lbl.hasClass('cm-zipcode')){var loc=lbl.prop('class').match(/cm-location-([^\s]+)/i)[1]||'';var country=$('.cm-country'+(loc?'.cm-location-'+loc:''),form).val();var val=elm.val();if(zipcode_regexp[country]&&!elm.val().match(zipcode_regexp[country]['regexp'])){if(lbl.hasClass('cm-required')||$.is.blank(elm.val())==false){_formMessage(_.tr('error_validator_zipcode'),lbl,null,zipcode_regexp[country]['format']);set_mark=true;}}}
if(lbl.hasClass('cm-integer')){if($.is.integer(elm.val())==false){if(lbl.hasClass('cm-required')||$.is.blank(elm.val())==false){_formMessage(_.tr('error_validator_integer'),lbl);set_mark=true;}}}
if(lbl.hasClass('cm-multiple')&&elm.prop('length')==0){_formMessage(_.tr('error_validator_multiple'),lbl);set_mark=true;}
if(lbl.hasClass('cm-password')){var pair_lbl=$('label.cm-password',form).not(lbl);var pair_elm=$('#'+pair_lbl.prop('for'));if(elm.val()&&elm.val()!=pair_elm.val()){_formMessage(_.tr('error_validator_password'),lbl,pair_lbl);set_mark=true;}}
if(validators){for(var i=0;i<validators.length;i++){if(lbl.hasClass(validators[i].class_name)){result=validators[i].func(elm_id);if(result!=true){_formMessage(validators[i].message,lbl);set_mark=true;}}}}
if(lbl.hasClass('cm-regexp')){_regexp=null;_message=null;if(elm_id in regexp){_regexp=regexp[elm_id]['regexp'];_message=regexp[elm_id]['message']?regexp[elm_id]['message']:_.tr('error_validator_message');}else if(lbl.data('caRegexp')){_regexp=lbl.data('caRegexp');_message=lbl.data('caMessage');}
if(_regexp&&!elm.ceHint('is_hint')){var val=elm.val();var expr=new RegExp(_regexp);var result=expr.test(val);if(!result&&!(!lbl.hasClass('cm-required')&&elm.val()=='')){_formMessage(_message,lbl);set_mark=true;}}}
if(lbl.hasClass('cm-multiple-checkboxes')||lbl.hasClass('cm-multiple-radios')){if(lbl.hasClass('cm-required')){var el_filter=lbl.hasClass('cm-multiple-checkboxes')?'[type=checkbox]':'[type=radio]';if($(el_filter+':not(:disabled)',elm).length&&!$(el_filter+':checked',elm).length){_formMessage(_.tr('error_validator_required'),lbl);set_mark=true;}}}
if(lbl.hasClass('cm-all')){if(elm.prop('length')==0&&lbl.hasClass('cm-required')){_formMessage(_.tr('error_validator_multiple'),lbl);set_mark=true;}else{$('option',elm).prop('selected',true);}}else{if(elm.is(':input')){if(lbl.hasClass('cm-required')&&((elm.is('[type=checkbox]')&&!elm.prop('checked'))||$.is.blank(elm.val())==true||elm.ceHint('is_hint'))){_formMessage(_.tr('error_validator_required'),lbl);set_mark=true;}}}
container=elm.closest('.cm-field-container');if(container.length){elm=container;}
if(!only_check){$('[id="'+elm_id+'_error_message"].help-inline',elm.parent()).remove();if(set_mark==true){lbl.parent().addClass('error');elm.addClass('cm-failed-field');lbl.addClass('cm-failed-label');if(!elm.hasClass('cm-no-failed-msg')){elm.after('<span id="'+elm_id+'_error_message" class="help-inline">'+_getMessage(elm_id)+'</span>');}
if(!message_set){$.scrollToElm(elm);message_set=true;}
var dlg=$.ceDialog('get_last');var dlg_target=$('.cm-dialog-auto-size[data-ca-target-id="'+dlg.attr('id')+'"]');if(dlg_target.length){dlg.ceDialog('reload');}}else{lbl.parent().removeClass('error');elm.removeClass('cm-failed-field');lbl.removeClass('cm-failed-label');}}else{if(set_mark){message_set=true;}}}
return!message_set;}
function _disableEmptyFields(form)
{var selector=[];if(form.hasClass('cm-disable-empty')){selector.push('input[type=text]');}
if(form.hasClass('cm-disable-empty-files')){selector.push('input[type=file]');$('input[type=file][data-ca-empty-file=""]',form).prop('disabled',true);}
if(selector.length){$(selector.join(','),form).each(function(){var self=$(this);if(self.val()==''){self.prop('disabled',true);self.addClass('cm-disabled')}});}}
function _check(form,params)
{var form_result=true;var check_fields_result=true;var h;params=params||{};params.only_check=params.only_check||false;if(!clicked_elm){if($('[type=submit]',form).length){clicked_elm=$('[type=submit]:first',form);}else if($('input[type=image]',form).length){clicked_elm=$('input[type=image]:first',form);}}
if(!clicked_elm.hasClass('cm-skip-validation')){var requirements=_fillRequirements(form,clicked_elm.data('caCheckFilter'));if($.ceEvent('trigger','ce.formpre_'+form.prop('name'),[form,clicked_elm])===false){form_result=false;}
check_fields_result=_checkFields(form,requirements,params.only_check);}
if(params.only_check){return check_fields_result&&form_result;}
if(check_fields_result&&form_result){_disableEmptyFields(form);form.find('.cm-numeric').each(function(){var val=$(this).autoNumeric('get');$(this).prop('value',val);});h=clicked_elm.data('original_element')?clicked_elm.data('original_element'):clicked_elm;if(h.data('clicked')==true){return false;}
h.data('clicked',true);if((form.hasClass('cm-ajax')||clicked_elm.hasClass('cm-ajax'))&&!clicked_elm.hasClass('cm-no-ajax')){$.ceEvent('one','ce.ajaxdone',function(){h.data('clicked',false);});}
if(clicked_elm.hasClass('cm-comet')){$.ceEvent('one','ce.cometdone',function(){h.data('clicked',false);});}
if(clicked_elm.hasClass('cm-new-window')){form.prop('target','_blank');setTimeout(function(){h.data('clicked',false);},1000);return true;}else if(clicked_elm.hasClass('cm-parent-window')){form.prop('target','_parent');return true;}else{form.prop('target','_self');}
if($.ceEvent('trigger','ce.formpost_'+form.prop('name'),[form,clicked_elm])===false){form_result=false;}
if(clicked_elm.closest('.cm-dialog-closer').length){$.ceDialog('get_last').ceDialog('close');}
if((form.hasClass('cm-ajax')||clicked_elm.hasClass('cm-ajax'))&&!clicked_elm.hasClass('cm-no-ajax')){var collection=form.add(clicked_elm);if(collection.hasClass('cm-form-dialog-closer')||collection.hasClass('cm-form-dialog-opener')){$.ceEvent('one','ce.formajaxpost_'+form.prop('name'),function(response_data,params){if(response_data.failed_request){return false;}
if(collection.hasClass('cm-form-dialog-closer')){if(_.area=="C"){$.ceDialog('get_last').ceDialog('close');}else if(_.area=="A"){$.popupStack.last_close();}}
if(collection.hasClass('cm-form-dialog-opener')){var _id=form.find('input[name=result_ids]').val();if(_id&&typeof(response_data.html)!=="undefined"){$('#'+_id).ceDialog('open',$.ceDialog('get_params',form));}}});}
return $.ceAjax('submitForm',form,clicked_elm);}
if(clicked_elm.hasClass('cm-no-ajax')){$('input[name=is_ajax]',form).remove();}
if(_.embedded&&form_result==true&&!$.externalLink(form.prop('action'))){form.append('<input type="hidden" name="result_ids" value="'+_.container+'" />');clicked_elm.data('caScroll','#'+_.container);return $.ceAjax('submitForm',form,clicked_elm);}
if(form_result==false){h.data('clicked',false);}
return form_result;}else if(check_fields_result==false){var hidden_tab=$('.cm-failed-field',form).parents('[id^="content_"]:hidden');if(hidden_tab.length&&$('.cm-failed-field',form).length==$('.cm-failed-field',hidden_tab).length){$('#'+hidden_tab.prop('id').str_replace('content_','')).click();}}
return false;}
function _formMessage(msg,field,field2,extra)
{var id=field.prop('for');if(errors[id]){return false;}
errors[id]=[];msg=msg.str_replace('[field]',_fieldTitle(field));if(field2){msg=msg.str_replace('[field2]',_fieldTitle(field2));}
if(extra){msg=msg.str_replace('[extra]',extra);}
errors[id].push(msg);};function _fieldTitle(field)
{return field.text().replace(/(\s*\(\?\))?:\s*$/,'');}
function _getMessage(id)
{return'<p>'+errors[id].join('</p><p>')+'</p>';};var methods={init:function(){var form=$(this);form.on('submit',function(e){return _check(form);})},setClicked:function(elm){clicked_elm=elm;},check:function(){var form=$(this);return _check(form,{only_check:true});}}
$.fn.ceFormValidator=function(method){var args=arguments;var result;$(this).each(function(i,elm){var errors={};if(methods[method]){result=methods[method].apply(this,Array.prototype.slice.call(args,1));}else if(typeof method==='object'||!method){result=methods.init.apply(this,args);}else{$.error('ty.formvalidator: method '+method+' does not exist');}});return result;};$.ceFormValidator=function(action,params){params=params||{};if(action=='setZipcode'){zipcode_regexp=params;}else if(action=='setRegexp'){if('console'in window){console.log('This method is deprecated, use data-attributes "data-ca-regexp" and "data-ca-message" instead');}
regexp=$.extend(regexp,params);}else if(action=='registerValidator'){validators.push(params);}else if(action=='check'){if(params.form){return methods.check.apply(params.form);}}}})($);(function($){var options={};var init=false;function _rebuildStates(section,elm)
{elm=elm||$('.cm-state.cm-location-'+section).prop('id');var sbox=$('#'+elm).is('select')?$('#'+elm):$('#'+elm+'_d');var inp=$('#'+elm).is('input')?$('#'+elm):$('#'+elm+'_d');var default_state=inp.val();var cntr=$('.cm-country.cm-location-'+section);var cntr_disabled;if(cntr.length){cntr_disabled=cntr.prop('disabled');}else{cntr_disabled=sbox.prop('disabled');}
var country_code=(cntr.length)?cntr.val():options.default_country;var tag_switched=false;var pkey='';sbox.prop('id',elm).prop('disabled',false).removeClass('hidden cm-skip-avail-switch');inp.prop('id',elm+'_d').prop('disabled',true).addClass('hidden cm-skip-avail-switch').val('');if(!inp.hasClass('disabled')){sbox.removeClass('disabled');}
if(options.states&&options.states[country_code]){sbox.prop('length',1);for(var i=0;i<options.states[country_code].length;i++){sbox.append('<option value="'+options.states[country_code][i]['code']+'"'+(options.states[country_code][i]['code']==default_state?' selected':'')+'>'+options.states[country_code][i]['state']+'</option>');}
sbox.prop('id',elm).prop('disabled',false).removeClass('cm-skip-avail-switch');inp.prop('id',elm+'_d').prop('disabled',true).addClass('cm-skip-avail-switch');if(!inp.hasClass('disabled')){sbox.removeClass('disabled');}}else{sbox.prop('id',elm+'_d').prop('disabled',true).addClass('hidden cm-skip-avail-switch');inp.prop('id',elm).prop('disabled',false).removeClass('hidden cm-skip-avail-switch').val(default_state);if(!sbox.hasClass('disabled')){inp.removeClass('disabled');}}
if(cntr_disabled==true){sbox.prop('disabled',true);inp.prop('disabled',true);}}
function _rebuildStatesInLocation(){var location_elm=$(this).prop('class').match(/cm-location-([^\s]+)/i);if(location_elm){_rebuildStates(location_elm[1],$('.cm-state.cm-location-'+location_elm[1]).not(':disabled').prop('id'));}}
var methods={init:function(){if($(this).hasClass('cm-country')){if(init==false){$(_.doc).on('change','select.cm-country',_rebuildStatesInLocation);init=true;}
$(this).trigger('change');}else{_rebuildStatesInLocation.call(this);}}}
$.fn.ceRebuildStates=function(method){var args=arguments;return $(this).each(function(i,elm){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(args,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,args);}else{$.error('ty.rebuildstates: method '+method+' does not exist');}});};$.ceRebuildStates=function(action,params){params=params||{};if(action=='init'){options=params;}}})($);(function($){var methods={init:function(params){return this.each(function(){var params=params||{top:$(this).data('ceTop')?$(this).data('ceTop'):0,padding:$(this).data('cePadding')?$(this).data('cePadding'):0};var self=$(this);$(window).scroll(function(){if($(window).scrollTop()>params.top){$(self).css({'position':'fixed','top':params.padding+'px'});}else{$(self).css({'position':'','top':''});}});});}};$.fn.ceStickyScroll=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('ty.stickyScroll: method '+method+' does not exist');}};})($);(function($){var container;var timers={};var delay=0;function _duplicateNotification(key)
{var dups=$('div[data-ca-notification-key='+key+']');if(dups.length){if(!_addToDialog(dups)){dups.fadeTo('fast',0.5).fadeTo('fast',1).fadeTo('fast',0.5).fadeTo('fast',1);}
if(timers[key]){clearTimeout(timers[key]);methods.close(dups,true);}
return true;}
return false;}
function _closeNotification(notification)
{if(notification.find('.cm-notification-close-ajax').length){$.ceAjax('request',fn_url('notifications.close?notification_id='+notification.data('caNotificationKey')),{hidden:true});}
notification.fadeOut('fast',function(){notification.remove();});if(notification.hasClass('cm-notification-content-extended')){var overlay=$('.ui-widget-overlay[data-ca-notification-key='+notification.data('caNotificationKey')+']');if(overlay.length){overlay.fadeOut('fast',function(){overlay.remove();});}}
if($(".ui-dialog").is(':visible')==false){$('html').removeClass('dialog-is-open');}}
function _processTranslation(text)
{if(_.live_editor_mode&&text.indexOf('[lang')!=-1){text='<var class="live-edit-wrap"><i class="cm-icon-live-edit icon-live-edit ty-icon-live-edit"></i><var class="cm-live-edit live-edit-item" data-ca-live-edit="langvar::'+text.substring(text.indexOf('=')+1,text.indexOf(']'))+'">'+text.substring(text.indexOf(']')+1,text.lastIndexOf('['))+'</var></var>';}
return text;}
function _pickFromDialog(event){var nt=$('.cm-notification-content',$(event.target));if(nt.length){if(!_addToDialog(nt)){container.append(nt);}}
return true;}
function _addToDialog(notification)
{var dlg=$.ceDialog('get_last');if(dlg.length){$('.object-container',dlg).prepend(notification);dlg.off('dialogclose',_pickFromDialog);dlg.on('dialogclose',_pickFromDialog);return true;}
return false;}
var methods={show:function(data,key)
{if(!key){key=$.crc32(data.message);}
if(typeof(data.message)=='undefined'){return false;}
if(_duplicateNotification(key)){return true;}
data.message=_processTranslation(data.message);data.title=_processTranslation(data.title);if(data.type=='I'){var w=$.getWindowSizes();$('.cm-notification-content.cm-notification-content-extended').each(function(){methods.close($(this),false);});$(_.body).append('<div class="ui-widget-overlay" style="z-index:1010" data-ca-notification-key="'+key+'"></div>');var notification=$('<div class="cm-notification-content cm-notification-content-extended notification-content-extended '+(data.message_state=="I"?' cm-auto-hide':'')+'" data-ca-notification-key="'+key+'">'+'<h1>'+data.title+'<span class="cm-notification-close close"></span></h1>'+'<div class="notification-body-extended">'+
data.message+'</div>'+'</div>');var notificationMaxHeight=w.view_height-300;$(notification).find('.cm-notification-max-height').css({'max-height':notificationMaxHeight});$(_.body).append(notification);notification.css('top',w.view_height / 2-(notification.height()/ 2));}else{var n_class='alert';var b_class='';if(data.type=='N'){n_class+=' alert-success';}else if(data.type=='W'){n_class+=' alert-warning';}else if(data.type=='S'){n_class+=' alert-info';}else{n_class+=' alert-error';}
if(data.message_state=='I'){n_class+=' cm-auto-hide';}else if(data.message_state=='S'){b_class+=' cm-notification-close-ajax';}
var notification=$('<div class="cm-notification-content notification-content '+n_class+'" data-ca-notification-key="'+key+'">'+'<button type="button" class="close cm-notification-close '+b_class+'" data-dismiss="alert">&times;</button>'+'<strong>'+data.title+'</strong>'+data.message+'</div>');if(!_addToDialog(notification)){container.append(notification);}}
$.ceEvent('trigger','ce.notificationshow',[notification]);if(data.message_state=='I'){methods.close(notification,true);}},showMany:function(data)
{for(var key in data){methods.show(data[key],key);}},closeAll:function()
{var notifications=container.find('.cm-notification-content');var dlg=$.ceDialog('get_last');if(dlg.length){notifications=notifications.add(dlg.find('.cm-notification-content'));}
notifications.each(function(){var self=$(this);if(!self.hasClass('cm-notification-close-ajax')){methods.close(self,false);}})},close:function(notification,delayed)
{if(delayed==true){if(delay===0){return true;}
timers[notification.data('caNotificationKey')]=setTimeout(function(){methods.close(notification,false);},delay);return true;}
_closeNotification(notification);},init:function()
{delay=_.notice_displaying_time*1000;container=$('.cm-notification-container');$(_.doc).on('click','.cm-notification-close',function(){methods.close($(this).parents('.cm-notification-content:first'),false);})
container.find('.cm-auto-hide').each(function(){methods.close($(this),true);});}};$.ceNotification=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{$.error('ty.notification: method '+method+' does not exist');}};}($));(function($){var handlers={};var methods={on:function(event,handler,one)
{one=one||false;if(!(event in handlers)){handlers[event]=[];}
handlers[event].push({handler:handler,one:one});},one:function(event,handler)
{methods.on(event,handler,true);},trigger:function(event,data)
{data=data||[];var result=true,_res;if(event in handlers){for(var i=0;i<handlers[event].length;i++){_res=handlers[event][i].handler.apply(handlers[event][i].handler,data);if(handlers[event][i].one){handlers[event].splice(i,1);i--;}
if(_res===false){result=false;break;}}}
return result;}};$.ceEvent=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{$.error('ty.event: method '+method+' does not exist');}};}($));(function($){var methods={_init:function(self){if(!self.data('codeEditor')){var editor=ace.edit(self.prop('id'));editor.session.setUseWrapMode(true);editor.session.setWrapLimitRange();editor.setFontSize("14px");editor.renderer.setShowPrintMargin(false);editor.getSession().on('change',function(e){self.addClass('cm-item-modified');});self.data('codeEditor',editor);}
return $(this);},init:function(mode){var self=$(this);methods._init(self);if(mode){self.data('codeEditor').getSession().setMode(mode);}
return $(this);},set_value:function(val,mode){var self=$(this);methods._init(self);if(mode==undefined){mode='ace/mode/html';}
self.data('codeEditor').getSession().setMode(mode);self.data('codeEditor').setValue(val);self.data('codeEditor').navigateLineStart();self.data('codeEditor').clearSelection();self.data('codeEditor').scrollToRow(0);return $(this);},set_show_gutter:function(value){$(this).data('codeEditor').renderer.setShowGutter(value);},value:function(){var self=$(this);methods._init(self);return self.data('codeEditor').getValue();},focus:function(){var self=$(this);var session=self.data('codeEditor').getSession();var count=session.getLength();self.data('codeEditor').focus();self.data('codeEditor').gotoLine(count,session.getLine(count-1).length);},set_listener:function(event_name,callback){$(this).data('codeEditor').getSession().on(event_name,function(e){callback(e);});return $(this);}};$.fn.ceCodeEditor=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('ty.codeeditor: method '+method+' does not exist');}};})($);(function($){var plugin_name="ceObjectSelector",defaults={pageSize:10,enableSearch:true,closeOnSelect:true,loadViaAjax:false,dataUrl:null,enableImages:false,imageWidth:20,imageHeight:20,placeholder:null,allowClear:false,debug:false};function ObjectSelector(element,options){this.$el=$(element);this.settings=$.extend({},defaults,options);this.init();}
$.extend(ObjectSelector.prototype,{init:function(){var data=this.$el.data();this.settings.placeholder=data.caPlaceholder||this.settings.placeholder;this.settings.pageSize=data.caPageSize||this.settings.pageSize;this.settings.dataUrl=data.caDataUrl||this.settings.dataUrl;this.settings.loadViaAjax=data.caLoadViaAjax===undefined?this.settings.loadViaAjax:data.caLoadViaAjax;this.settings.closeOnSelect=data.caCloseOnSelect===undefined?this.settings.closeOnSelect:data.caCloseOnSelect;this.settings.enableImages=data.caEnableImages===undefined?this.settings.enableImages:data.caEnableImages;this.settings.enableSearch=data.caEnableSearch===undefined?this.settings.enableSearch:data.caEnableSearch;this.settings.imageWidth=data.caImageWidth===undefined?this.settings.imageWidth:data.caImageWidth;this.settings.imageHeight=data.caImageHeight===undefined?this.settings.imageHeight:data.caImageHeight;this.settings.multiple=this.settings.multiple===undefined?this.$el.is('[multiple]'):this.settings.multiple;this.settings.debug=data.debug===undefined?this.settings.debug:data.caDebug;this.settings.allowClear=data.caAllowClear===undefined?this.settings.allowClear:data.caAllowClear;this.initSelect2();},initSelect2:function(){var self=this,select2config={language:{'loadingMore':function(){return _.tr('loading');},'searching':function(){return _.tr('loading');},'errorLoading':function(){return _.tr('error');}},closeOnSelect:this.settings.closeOnSelect,placeholder:this.settings.placeholder,allowClear:this.settings.allowClear,multiple:this.settings.multiple};if(this.settings.loadViaAjax&&this.settings.dataUrl!==null){select2config.ajax={url:this.settings.dataUrl,data:function(params){var request={q:params.term,page:params.page||1,page_size:self.settings.pageSize};if(self.settings.enableImages){request.image_width=self.settings.imageWidth;request.image_height=self.settings.imageHeight;}
return request;},processResults:function(data,params){params.page=params.page||1;return{results:data.objects,pagination:{more:(params.page*self.settings.pageSize)<data.total_objects}};},transport:function(params,success,failure){params.callback=success;params.hidden=true;return $.ceAjax('request',params.url,params);}};}
if(this.settings.data){select2config.data=this.settings.data;}
if(this.settings.enableImages){select2config.templateResult=function(object){if(!object.image_url){return object.text;}
return $('<img src="'+object.image_url+'" alt="'+object.text+'" /><span>'+object.text+'</span>');};}
if(!this.settings.enableSearch){select2config.minimumResultsForSearch=Infinity;}
this.$el.select2(select2config);}});$.fn[plugin_name]=function(options){var self=this,createPluginInstances=function(){return self.each(function(){if($.data(this,"plugin_"+plugin_name)){var objectSelector=$.data(this,"plugin_"+plugin_name);objectSelector.settings=$.extend({},defaults,options);objectSelector.init();}else{$.data(this,"plugin_"+plugin_name,new ObjectSelector(this,options));}});};if(this.length){if($.fn.select2){return createPluginInstances();}else{$.getScript('js/lib/select2/select2.full.min.js',function(){createPluginInstances();});}}
return this;};})($);_.toNumeric=function(arg){var number=Number(String(arg).str_replace(',','.'));return isNaN(number)?0:number;};_.getFloatPrecision=function(x){return String(x).replace('.','').length-x.toFixed().length;};if(!_.embedded&&location.hash&&unescape(location.hash).indexOf('#!/')===0){var components=$.parseUrl(location.href)
var uri=$.ceHistory('parseHash',location.hash);if($.browser.msie&&$.browser.version>=9){$.redirect(components.protocol+'://'+components.host+uri);}else{$.redirect(components.protocol+'://'+components.host+components.directory+uri);}}}(Tygh,jQuery));function fn_print_r(value)
{fn_alert(fn_print_array(value));}
function fn_alert(msg,not_strip)
{msg=not_strip?msg:fn_strip_tags(msg);alert(msg);}
function fn_print_array(arr,level)
{var dumped_text="";if(!level){level=0;}
var level_padding="";for(var j=0;j<level+1;j++){level_padding+="    ";}
if(typeof(arr)=='object'){for(var item in arr){var value=arr[item];if(typeof(value)=='object'){dumped_text+=level_padding+"'"+item+"' ...\n";dumped_text+=fn_print_array(value,level+1);}else{dumped_text+=level_padding+"'"+item+"' => \""+value+"\"\n";}}}else{dumped_text=arr+" ("+typeof(arr)+")";}
return dumped_text;}
function fn_url(url)
{var index_url=Tygh.current_location+'/'+Tygh.index_script;var components=Tygh.$.parseUrl(url);if(url==''){url=index_url;}else if(components.protocol){if(Tygh.embedded){var s,spos;if(Tygh.facebook&&Tygh.facebook.url.indexOf(components.location)!=-1){s='&app_data=';}else if(Tygh.init_context==components.source.str_replace('#'+components.anchor,'')){s='#!';}
if(s){var q='';if((spos=url.indexOf(s))!=-1){q=decodeURIComponent(url.substr(spos+s.length)).replace('&amp;','&');}
url=Tygh.current_location+q;}}}else if(components.file!=Tygh.index_script){if(url.indexOf('?')==0){url=index_url+url;}else{url=index_url+'?dispatch='+url.replace('?','&');}}
return url;}
function fn_strip_tags(str)
{str=String(str).replace(/<.*?>/g,'');return str;}
function fn_reload_form(jelm)
{var form=jelm.parents('form');var container=form.parent();var submit_btn=form.find("input[type='submit']");if(!submit_btn.length){submit_btn=Tygh.$('[data-ca-target-form='+form.prop('name')+']');}
if(container.length&&submit_btn.length){var url=form.prop('action')+'?reload_form=1&'+submit_btn.prop('name');var data=form.serializeObject();var result_ids;if(data.result_ids!='undefined'){result_ids=data.result_ids;}else{result_ids=container.prop('id');}
Tygh.$.ceAjax('request',fn_url(url),{data:data,result_ids:result_ids});}}
function fn_get_listed_lang(langs)
{var $=Tygh.$;var check_langs=[Tygh.cart_language,Tygh.default_language,'en'];var lang='';if(langs.length){lang=langs[0];for(var i=0;i<check_langs.length;i++){if(Tygh.$.inArray(check_langs[i],langs)!=-1){lang=check_langs[i];break;}}}
return lang;}
function fn_query_remove(query,vars)
{if(typeof(vars)=='undefined'){return query;}
if(typeof vars=='string'){vars=[vars];}
var start=query;if(query.indexOf('?')>=0){start=query.substr(0,query.indexOf('?')+1);var search=query.substr(query.indexOf('?')+1);var srch_array=search.split("&");var temp_array=[];var concat=true;var amp='';for(var i=0;i<srch_array.length;i++){temp_array=srch_array[i].split("=");concat=true;for(var j=0;j<vars.length;j++){if(vars[j]==temp_array[0]||temp_array[0].indexOf(vars[j]+'[')!=-1){concat=false;break;}}
if(concat==true){start+=amp+temp_array[0]+'='+temp_array[1];}
amp='&';}}
return start;}
(function(_,$){var loadedScripts={};var sessionData={};(function($){var REQUEST_XML=1;var REQUEST_IFRAME=2;var REQUEST_COMET=3;var REQUEST_JSONP_POST=5;var QUERIES_LIMIT=1;var queryStack=[];var activeQueries=0;var evalCache={};var responseCache={};var getScriptQueries=0;var oldjQuery={};var methods={request:function(url,params){params=params||{};params.method=params.method||'get';params.data=params.data||{};params.message=params.message||_.tr('loading');params.caching=params.caching||false;params.hidden=params.hidden||false;params.repeat_on_error=params.repeat_on_error||false;params.force_exec=params.force_exec||false;params.obj=params.obj||null;params.append=params.append||null;params.scroll=params.scroll||null;params.overlay=params.overlay||null;if(_.embedded){params.full_render=true;}
if(params.full_render){params.data.full_render=params.full_render;}
if(typeof(params.data.security_hash)=='undefined'&&typeof(_.security_hash)!='undefined'&&params.method.toLowerCase()=='post'){params.data.security_hash=_.security_hash;}
if(params.result_ids){params.data.result_ids=params.result_ids;}
if(params.skip_result_ids_check){params.data.skip_result_ids_check=params.skip_result_ids_check;}
if(activeQueries>=QUERIES_LIMIT){queryStack.unshift(function(){methods.request(url,params);});return true;}
if(params.hidden===false){$.toggleStatusBox('show',{overlay:params.overlay});}
var hash='';if(params.caching===true){hash=$.crc32(url+$.param(params.data));}
if(!hash||!responseCache[hash]){var saved_data={};var result_ids=(params.data.result_ids)?params.data.result_ids.split(','):[];if(result_ids.length>0){for(var j=0;j<result_ids.length;j++){var container=$('#'+result_ids[j]);if(container.hasClass('cm-save-fields')){saved_data[result_ids[j]]=$(':input:visible',container).serializeArray();}}
params.saved_data=saved_data;}
if(url){url=fn_query_remove(url,'result_ids');if(url.indexOf('://')==-1){url=_.current_location+'/'+url;}
if(params.obj&&params.obj.hasClass('cm-comet')){params.url=url+'&result_ids='+params.result_ids+'&is_ajax='+REQUEST_COMET;return transports.iframe(null,params,{is_comet:true});}else{activeQueries++;var data_type=(!$.support.cors&&url.indexOf('://'+window.location.hostname)==-1)?'jsonp':'json';if(!('is_ajax'in params.data)&&data_type=='json'){params.data.is_ajax=REQUEST_XML;}
if(sessionData.name&&url.indexOf(sessionData.name)==-1){params.data[sessionData.name]=localStorage.getItem(sessionData.name);}
var components=$.parseUrl(url);if(components.anchor){params.data.anchor=components.anchor;}
return $.ajax({type:params.method,url:url,dataType:data_type,cache:true,data:params.data,xhrFields:{withCredentials:true},success:function(data,textStatus){if(hash){responseCache[hash]=data;}
_response(data,params);},error:function(XMLHttpRequest,textStatus,errorThrown){if(params.repeat_on_error){params.repeat_on_error=false;methods.request(url,params);return false;}
$.toggleStatusBox('hide');if(params.hidden===false&&errorThrown){var err_msg=_.tr('error_ajax').str_replace('[error]',errorThrown);$.ceNotification('show',{type:'E',title:_.tr('error'),message:err_msg});}},complete:function(XMLHttpRequest,textStatus){activeQueries--;if(queryStack.length){var f=queryStack.shift();f();}}});}}}else if(hash&&responseCache[hash]){_response(responseCache[hash],params);}
return false;},submitForm:function(form,clicked_elm){if(activeQueries>=QUERIES_LIMIT){queryStack.unshift(function(){var submit_name=clicked_elm.attr('name'),submit_value=clicked_elm.val(),input;if(submit_name){input=$('<input>',{type:'hidden',value:submit_value,name:submit_name}).appendTo(form);}
if(methods.submitForm(form,clicked_elm)){form.get(0).submit();}
if(input){input.remove();}});return false;}
var params={form:form,obj:clicked_elm,scroll:clicked_elm.data('caScroll')||'',overlay:clicked_elm.data('caOverlay')||'',callback:'ce.formajaxpost_'+form.prop('name')};$.ceNotification('closeAll');$.toggleStatusBox('show',{overlay:params.overlay});var options=_getOptions(form,params);if(options.force_exec){params['force_exec']=true;}
if(sessionData.name){form.append('<input type="hidden" name="'+sessionData.name+'" value="'+localStorage.getItem(sessionData.name)+'">');}
if(options.full_render){form.append('<input type="hidden" name="full_render" value="Y">');}
form.append('<input type="hidden" name="is_ajax" value="'+(options.transport=='iframe'?(options.is_comet?REQUEST_COMET:REQUEST_IFRAME):(options.transport=='jsonpPOST'?REQUEST_JSONP_POST:REQUEST_XML))+'">');return transports[options.transport](form,params,options);},inProgress:function(){return activeQueries!==0;},clearCache:function(){responseCache={};return true;},response:function(response,params){return _response(response,params);}};var transports={iframe:function(form,params,options){var iframe=$('<iframe name="upload_iframe" src="javascript: false;" class="hidden"></iframe>').appendTo(_.body);activeQueries++;if(options.is_comet){$('#comet_container_controller').ceProgress('init');}
iframe.on('load',function(){var response={};var self=$(this);if(self.contents().text()!==null){eval('var response = '+self.contents().find('textarea').val());}
response=response||{};_response(response,params);if(options.is_comet&&jQuery.isEmptyObject(response)==false){$('#comet_container_controller').ceProgress('finish');$.ceEvent('trigger','ce.cometdone',[form,params,options,response]);}
self.remove();activeQueries--;if(queryStack.length){var f=queryStack.shift();f();}});if(form){form.prop('target','upload_iframe');}else if(params.url){if(params.method=='post'){$('<form class="hidden" action="'+params.url+'" method="post" target="upload_iframe"><input type="hidden" name="security_hash" value="'+_.security_hash+'"></form>').appendTo(_.body).submit();}else{iframe.prop('src',params.url);}}
return true;},xml:function(form,params){var hash=$(':input',form).serializeObject();if(params.obj&&params.obj.prop('name')){hash[params.obj.prop('name')]=params.obj.val();}
params['method']=form.prop('method');params['data']=hash;params['result_ids']=form.data('caTargetId');methods.request(form.prop('action'),params);return false;},jsonpPOST:function(form,params,options){$.receiveMessage(function(e){if(options.is_comet){$('#comet_container_controller').ceProgress('finish');}
iframe.remove();_response($.parseJSON(e.data),params);activeQueries--;});var iframe=$('<iframe name="upload_iframe" src="javascript: false;" class="hidden"></iframe>').appendTo(_.body);activeQueries++;if(options.is_comet){$('#comet_container_controller').ceProgress('init');}
if(form){form.prop('target','upload_iframe');}else if(params.url){iframe.prop('src',params.url);}
return true;}};function _getOptions(obj,params){var is_comet=obj.hasClass('cm-comet')||(params.obj&&params.obj.hasClass('cm-comet'));var transport='xml';var uploads=is_comet;if(!is_comet&&obj.prop('enctype')=='multipart/form-data'){obj.find('input[type=file]').each(function(){if($(this).val()){uploads=true;}});}
if((!$.support.cors||(_.embedded&&uploads))&&obj.prop('action').indexOf('//')!=-1&&obj.prop('action').indexOf('//'+window.location.hostname)==-1&&obj.prop('method')=='post'){transport='jsonpPOST';}else if(uploads){transport='iframe';}
return{'full_render':obj.hasClass('cm-ajax-full-render'),'is_comet':is_comet,'force_exec':obj.hasClass('cm-ajax-force'),'transport':transport};}
function _response(response,params){params=params||{};params.force_exec=params.force_exec||false;params.pre_processing=params.pre_processing||{};var regex_all=new RegExp('<script[^>]*>([\u0001-\uFFFF]*?)</script>','img');var matches=[];var match='';var elm;var data=response||{};var inline_scripts=null;var scripts_to_load=[];var elms=[];var content;if(params.pre_processing&&typeof(params.pre_processing)=='function'){params.pre_processing(data,params);}
if(data.force_redirection){$.toggleStatusBox('hide');$.redirect(data.force_redirection);return true;}
if($.isEmptyObject(evalCache)){$('script:not([src])').each(function(){var self=$(this);evalCache[$.crc32(self.html())]=true;});}
if(data.html){for(var k in data.html){elm=$('#'+k);if(elm.length!=1||data.html[k]===null){continue;}
if(data.html[k].indexOf('<form')!=-1&&elm.parents('form').length){$(_.body).append(elm);}
matches=data.html[k].match(regex_all);content=matches?data.html[k].replace(regex_all,''):data.html[k];$.ceDialog('destroy_loaded',{content:content});if(params.append){elm.append(content);}else{elm.html(content);}
if(typeof(params.saved_data)!='undefined'&&typeof(params.saved_data[k])!='undefined'){var elements=[];for(var i in params.saved_data[k]){elements[params.saved_data[k][i]['name']]=params.saved_data[k][i]['value'];}
$('input:visible, select:visible',elm).each(function(id,local_elm){var jelm=$(local_elm);if(typeof(elements[jelm.prop('name')])!='undefined'&&!jelm.parents().hasClass('cm-skip-save-fields')){if(jelm.prop('type')=='radio'){if(jelm.val()==elements[jelm.prop('name')]){jelm.prop('checked',true);}}else{jelm.val(elements[jelm.prop('name')]);}
jelm.trigger('change');}});}
if($.trim(elm.html())){elm.parents('.hidden.cm-hidden-wrapper').removeClass('hidden');}else{elm.parents('.cm-hidden-wrapper').addClass('hidden');}
var all_scripts=null,ext_scripts=null;if(matches){all_scripts=$(matches.join('\n'));ext_scripts=all_scripts.filter('[src]');inline_scripts=(inline_scripts)?inline_scripts.add(all_scripts.filter(':not([src])')):all_scripts.filter(':not([src])');if(ext_scripts.length){for(var i=0;i<ext_scripts.length;i++){var _src=ext_scripts.eq(i).prop('src');if(loadedScripts[_src]){if(ext_scripts.eq(i).hasClass('cm-ajax-force')){loadedScripts[_src]=null;}else{continue;}}
scripts_to_load.push($.getScript(_src));}}}
elms.push(elm);}
if($.ceDialog('inside_dialog',{jelm:elm})){$.ceDialog('reload_parent',{jelm:elm});}
if(response.title){$(document).prop('title',response.title);}}
var done_event=function(){$.ceEvent('trigger','ce.ajaxdone',[elms,inline_scripts,params,data,response.text||'']);};if(scripts_to_load.length){$.when.apply(null,scripts_to_load).then(done_event);}else{done_event();}}
var ajax=$.ajax;$.ajax=function(origSettings){if(origSettings.dataType&&origSettings.dataType=='script'){var _src=origSettings.url;if(loadedScripts[_src]){return false;}
loadedScripts[origSettings.url]=true;}
return ajax(origSettings);};$.getScript=function(url,callback){url=(url.indexOf('//')==-1)?_.current_location+'/'+url:url;if(_.otherjQ&&getScriptQueries===0){oldjQuery=jQuery;jQuery=_.$;}
getScriptQueries++;return $.ajax({type:"GET",url:url,success:function(data,textStatus,jqxhr){getScriptQueries--;if(_.otherjQ&&getScriptQueries===0){_.$=jQuery;jQuery=oldjQuery;}
if(callback){callback(data,textStatus,jqxhr);}},dataType:"script",cache:true});};$.ceEvent('on','ce.ajaxdone',function(elms,scripts,params,response_data,response_text){var i;if(_.embedded&&response_data.language_changed){_.embedded=false;$.redirect(response_data.current_url,false);window.location.reload(true);return;}
if(params.on_ajax_done&&typeof(params.on_ajax_done)=='function'){params.on_ajax_done(response_data,params,response_text);}
if(scripts){for(i=0;i<scripts.length;i++){var _hash=$.crc32(scripts.eq(i).html());if(!evalCache[_hash]||params.force_exec||scripts.eq(i).hasClass('cm-ajax-force')){$.globalEval(scripts.eq(i).html());evalCache[_hash]=true;}}}
if(response_data.debug_info){console.log(response_data.debug_info);}
var link_history=(params.save_history&&(!params.obj||(params.obj&&$.ceDialog('inside_dialog',{jelm:params.obj})===false)));if(response_data.session_data){sessionData=response_data.session_data;localStorage.setItem(sessionData.name,sessionData.id);}
if(response_data.current_url){var current_url=decodeURIComponent(response_data.current_url);if(!params.skip_history&&(_.embedded||link_history)){var _params=params;if(!link_history){_params.result_ids=_.container;}
if(response_data.anchor){current_url+='#'+response_data.anchor;}
$.ceHistory('load',current_url,_params,true);_.current_url=current_url;}
if(response_data.anchor){_.anchor=params.scroll='#'+response_data.anchor;}}
for(i=0;i<elms.length;i++){$.commonInit(elms[i]);}
if(params.form){$('input[name=is_ajax]',params.form).remove();$('input[name=full_render]',params.form).remove();if(params.form.hasClass('cm-disable-empty')||params.form.hasClass('cm-disable-empty-files')){$('input.cm-disabled',params.form).prop('disabled',false).removeClass('cm-disabled');}}
if(params.callback&&$.isFunction(params.callback)){params.callback(response_data,params,response_text);}else{$.ceEvent('trigger',params.callback,[response_data,params,response_text]);}
if(!params.keep_status_box){$.toggleStatusBox('hide');}
if(params.scroll){if(!_.scrolling){$.scrollToElm($(params.scroll));}}
if(response_data.notifications){$.ceNotification('showMany',response_data.notifications);}});$.ceAjax=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('ty.ajax: method '+method+' does not exist');}};})($);$(document).ready(function(){$('script').each(function(){var _src=$(this).prop('src');if(_src){loadedScripts[_src]=true;}});if(typeof(ajax_callback_data)!='undefined'&&ajax_callback_data){$.globalEval(ajax_callback_data);ajax_callback_data=false;}});}(Tygh,Tygh.$));(function(_,$){var locationWrapper={put:function(hash,win){(win||window).location.hash=this.encoder(hash);},get:function(win){var hash=((win||window).location.hash).replace(/^#/,'');try{return decodeURIComponent(hash);}
catch(error){return hash;}},encoder:encodeURIComponent};var historyState={storage:null,first:'',put:function(hash,params){if(!this.storage){this.storage={};this.first=hash;}
this.storage[hash]=params;},get:function(hash){if(hash in this.storage){return this.storage[hash];}
return{};}};function initObjects(options){options=$.extend({unescape:false},options||{});locationWrapper.encoder=encoder(options.unescape);function encoder(unescape_){if(unescape_===true){return function(hash){return hash;};}
if(typeof unescape_=="string"&&(unescape_=partialDecoder(unescape_.split("")))||typeof unescape_=="function"){return function(hash){return unescape_(encodeURIComponent(hash));};}
return encodeURIComponent;}
function partialDecoder(chars){var re=new RegExp($.map(chars,encodeURIComponent).join("|"),"ig");return function(enc){return enc.replace(re,decodeURIComponent);};}}
var implementations={};implementations.base={callback:undefined,type:undefined,check:function(){},load:function(hash){},init:function(callback,options){initObjects(options);self.callback=callback;self._options=options;self._init();},_init:function(){},_options:{}};implementations.hashchangeEvent={_skip:false,_init:function(){$(window).bind('hashchange',function(){if(self._skip===true){self._skip=false;return;}
self.check();});},check:function(){var hash=locationWrapper.get()?locationWrapper.get():historyState.first;self.callback(hash,historyState.get(hash));},load:function(hash,params){var current_hash=locationWrapper.get()?locationWrapper.get():historyState.first;historyState.put(hash,params);if(hash!=current_hash){self._skip=true;}
locationWrapper.put(hash);},reload:function(hash,params){historyState.put(hash,params);}};implementations.HTML5={_init:function(){$(window).bind('popstate',self.check);},check:function(evt){var state=evt.originalEvent.state;self.callback(state?'#!/'+document.location:'',state);},load:function(hash,params){window.history.pushState(params,null,_.current_location+'/'+hash.replace(/^\!\//,''));},reload:function(hash,params){window.history.replaceState(params,null,_.current_location+'/'+hash.replace(/^\!\//,''));}};var self=$.extend({},implementations.base);if(!_.embedded&&"pushState"in window.history){self.type='HTML5';}else if("onhashchange"in window){self.type='hashchangeEvent';}
if(self.type){$.extend(self,implementations[self.type]);$.history=self;}})(Tygh,Tygh.$);(function($){function getElementSelection(that){var position={};if(that.selectionStart===undefined){that.focus();var select=document.selection.createRange();position.length=select.text.length;select.moveStart('character',-that.value.length);position.end=select.text.length;position.start=position.end-position.length;}else{position.start=that.selectionStart;position.end=that.selectionEnd;position.length=position.end-position.start;}
return position;}
function setElementSelection(that,start,end){if(that.selectionStart===undefined){that.focus();var r=that.createTextRange();r.collapse(true);r.moveEnd('character',end);r.moveStart('character',start);r.select();}else{that.selectionStart=start;that.selectionEnd=end;}}
function runCallbacks($this,settings){$.each(settings,function(k,val){if(typeof val==='function'){settings[k]=val($this,settings,k);}else if(typeof $this.autoNumeric[val]==='function'){settings[k]=$this.autoNumeric[val]($this,settings,k);}});}
function convertKeyToNumber(settings,key){if(typeof(settings[key])==='string'){settings[key]*=1;}}
function autoCode($this,settings){runCallbacks($this,settings);settings.oEvent=null;settings.tagList=['DD','DT','H1','H2','H3','H4','H5','H6','LABEL','P','SPAN','TD','TH'];var vmax=settings.vMax.toString().split('.'),vmin=(!settings.vMin&&settings.vMin!==0)?[]:settings.vMin.toString().split('.');convertKeyToNumber(settings,'vMax');convertKeyToNumber(settings,'vMin');convertKeyToNumber(settings,'mDec');settings.allowLeading=true;settings.aNeg=settings.vMin<0?'-':'';vmax[0]=vmax[0].replace('-','');vmin[0]=vmin[0].replace('-','');settings.mInt=Math.max(vmax[0].length,vmin[0].length,1);if(settings.mDec===null){var vmaxLength=0,vminLength=0;if(vmax[1]){vmaxLength=vmax[1].length;}
if(vmin[1]){vminLength=vmin[1].length;}
settings.mDec=Math.max(vmaxLength,vminLength);}
if(settings.altDec===null&&settings.mDec>0){if(settings.aDec==='.'&&settings.aSep!==','){settings.altDec=',';}else if(settings.aDec===','&&settings.aSep!=='.'){settings.altDec='.';}}
var aNegReg=settings.aNeg?'([-\\'+settings.aNeg+']?)':'(-?)';settings.aNegRegAutoStrip=aNegReg;settings.skipFirstAutoStrip=new RegExp(aNegReg+'[^-'+(settings.aNeg?'\\'+settings.aNeg:'')+'\\'+settings.aDec+'\\d]'+'.*?(\\d|\\'+settings.aDec+'\\d)');settings.skipLastAutoStrip=new RegExp('(\\d\\'+settings.aDec+'?)[^\\'+settings.aDec+'\\d]\\D*$');var allowed='-'+settings.aNum+'\\'+settings.aDec;if(settings.altDec&&settings.altDec!==settings.aSep){allowed+=settings.altDec;}
settings.allowedAutoStrip=new RegExp('[^'+allowed+']','gi');settings.numRegAutoStrip=new RegExp(aNegReg+'(?:\\'+settings.aDec+'?(\\d+\\'+settings.aDec+'\\d+)|(\\d*(?:\\'+settings.aDec+'\\d*)?))');return settings;}
function autoStrip(s,settings,strip_zero){if(settings.aSign){while(s.indexOf(settings.aSign)>-1){s=s.replace(settings.aSign,'');}}
s=s.replace(settings.skipFirstAutoStrip,'$1$2');s=s.replace(settings.skipLastAutoStrip,'$1');s=s.replace(settings.allowedAutoStrip,'');if(settings.altDec){s=s.replace(settings.altDec,settings.aDec);}
var m=s.match(settings.numRegAutoStrip);s=m?[m[1],m[2],m[3]].join(''):'';if((settings.lZero==='allow'||settings.lZero==='keep')&&strip_zero!=='strip'){var parts=[],nSign='';parts=s.split(settings.aDec);if(parts[0].indexOf('-')!==-1){nSign='-';parts[0]=parts[0].replace('-','');}
if(parts[0].length>settings.mInt&&parts[0].charAt(0)==='0'){parts[0]=parts[0].slice(1);}
s=nSign+parts.join(settings.aDec);}
if((strip_zero&&settings.lZero==='deny')||(strip_zero&&settings.lZero==='allow'&&settings.allowLeading===false)){var strip_reg='^'+settings.aNegRegAutoStrip+'0*(\\d'+(strip_zero==='leading'?')':'|$)');strip_reg=new RegExp(strip_reg);s=s.replace(strip_reg,'$1$2');}
return s;}
function negativeBracket(s,nBracket,oEvent){nBracket=nBracket.split(',');if(oEvent==='set'||oEvent==='focusout'){s=s.replace('-','');s=nBracket[0]+s+nBracket[1];}else if((oEvent==='get'||oEvent==='focusin'||oEvent==='pageLoad')&&s.charAt(0)===nBracket[0]){s=s.replace(nBracket[0],'-');s=s.replace(nBracket[1],'');}
return s;}
function truncateDecimal(s,aDec,mDec){if(aDec&&mDec){var parts=s.split(aDec);if(parts[1]&&parts[1].length>mDec){if(mDec>0){parts[1]=parts[1].substring(0,mDec);s=parts.join(aDec);}else{s=parts[0];}}}
return s;}
function fixNumber(s,aDec,aNeg){if(aDec&&aDec!=='.'){s=s.replace(aDec,'.');}
if(aNeg&&aNeg!=='-'){s=s.replace(aNeg,'-');}
if(!s.match(/\d/)){s+='0';}
return s;}
function checkValue(value){var valueIn=value;value=+value;if(value<0.000001&&value>0){value=(value+1).toString();value=value.substring(1);}
if(value<0&&value>-1){value=(value-1).toString();value='-'+value.substring(2);}
if(valueIn===""){return'';}
return value.toString();}
function presentNumber(s,aDec,aNeg){if(aNeg&&aNeg!=='-'){s=s.replace('-',aNeg);}
if(aDec&&aDec!=='.'){s=s.replace('.',aDec);}
return s;}
function autoCheck(s,settings){s=autoStrip(s,settings);s=truncateDecimal(s,settings.aDec,settings.mDec);s=fixNumber(s,settings.aDec,settings.aNeg);var value=+s;if(settings.oEvent==='set'&&(value<settings.vMin||value>settings.vMax)){$.error("The value ("+value+") from the 'set' method falls outside of the vMin / vMax range");}
return value>=settings.vMin&&value<=settings.vMax;}
function checkEmpty(iv,settings,signOnEmpty){if(iv===''||iv===settings.aNeg){if(settings.wEmpty==='zero'){return iv+'0';}
if(settings.wEmpty==='sign'||signOnEmpty){return iv+settings.aSign;}
return iv;}
return null;}
function autoGroup(iv,settings){iv=autoStrip(iv,settings);var testNeg=iv,empty=checkEmpty(iv,settings,true);if(empty!==null){return empty;}
var digitalGroup='';if(settings.dGroup===2){digitalGroup=/(\d)((\d)(\d{2}?)+)$/;}else if(settings.dGroup===4){digitalGroup=/(\d)((\d{4}?)+)$/;}else{digitalGroup=/(\d)((\d{3}?)+)$/;}
var ivSplit=iv.split(settings.aDec);if(settings.altDec&&ivSplit.length===1){ivSplit=iv.split(settings.altDec);}
var s=ivSplit[0];if(settings.aSep){while(digitalGroup.test(s)){s=s.replace(digitalGroup,'$1'+settings.aSep+'$2');}}
if(settings.mDec!==0&&ivSplit.length>1){if(ivSplit[1].length>settings.mDec){ivSplit[1]=ivSplit[1].substring(0,settings.mDec);}
iv=s+settings.aDec+ivSplit[1];}else{iv=s;}
if(settings.aSign){var has_aNeg=iv.indexOf(settings.aNeg)!==-1;iv=iv.replace(settings.aNeg,'');iv=settings.pSign==='p'?settings.aSign+iv:iv+settings.aSign;if(has_aNeg){iv=settings.aNeg+iv;}}
if(settings.oEvent==='set'&&testNeg<0&&settings.nBracket!==null){iv=negativeBracket(iv,settings.nBracket,settings.oEvent);}
return iv;}
function autoRound(iv,settings){iv=(iv==='')?'0':iv.toString();convertKeyToNumber(settings,'mDec');var ivRounded='',i=0,nSign='',rDec=(typeof(settings.aPad)==='boolean'||settings.aPad===null)?(settings.aPad?settings.mDec:0):+settings.aPad;var truncateZeros=function(ivRounded){var regex=rDec===0?(/(\.[1-9]*)0*$/):rDec===1?(/(\.\d[1-9]*)0*$/):new RegExp('(\\.\\d{'+rDec+'}[1-9]*)0*$');ivRounded=ivRounded.replace(regex,'$1');if(rDec===0){ivRounded=ivRounded.replace(/\.$/,'');}
return ivRounded;};if(iv.charAt(0)==='-'){nSign='-';iv=iv.replace('-','');}
if(!iv.match(/^\d/)){iv='0'+iv;}
if(nSign==='-'&&+iv===0){nSign='';}
if((+iv>0&&settings.lZero!=='keep')||(iv.length>0&&settings.lZero==='allow')){iv=iv.replace(/^0*(\d)/,'$1');}
var dPos=iv.lastIndexOf('.');var vdPos=dPos===-1?iv.length-1:dPos;var cDec=(iv.length-1)-vdPos;if(cDec<=settings.mDec){ivRounded=iv;if(cDec<rDec){if(dPos===-1){ivRounded+='.';}
while(cDec<rDec){var zeros='000000'.substring(0,rDec-cDec);ivRounded+=zeros;cDec+=zeros.length;}}else if(cDec>rDec){ivRounded=truncateZeros(ivRounded);}else if(cDec===0&&rDec===0){ivRounded=ivRounded.replace(/\.$/,'');}
return nSign+ivRounded;}
var rLength=dPos+settings.mDec;var tRound=+iv.charAt(rLength+1);var ivArray=iv.substring(0,rLength+1).split('');var odd=(iv.charAt(rLength)==='.')?(iv.charAt(rLength-1)%2):(iv.charAt(rLength)%2);if((tRound>4&&settings.mRound==='S')||(tRound>4&&settings.mRound==='A'&&nSign==='')||(tRound>5&&settings.mRound==='A'&&nSign==='-')||(tRound>5&&settings.mRound==='s')||(tRound>5&&settings.mRound==='a'&&nSign==='')||(tRound>4&&settings.mRound==='a'&&nSign==='-')||(tRound>5&&settings.mRound==='B')||(tRound===5&&settings.mRound==='B'&&odd===1)||(tRound>0&&settings.mRound==='C'&&nSign==='')||(tRound>0&&settings.mRound==='F'&&nSign==='-')||(tRound>0&&settings.mRound==='U')){for(i=(ivArray.length-1);i>=0;i-=1){if(ivArray[i]!=='.'){ivArray[i]=+ivArray[i]+1;if(ivArray[i]<10){break;}else if(i>0){ivArray[i]='0';}}}}
ivArray=ivArray.slice(0,rLength+1);ivRounded=truncateZeros(ivArray.join(''));return nSign+ivRounded;}
function AutoNumericHolder(that,settings){this.settings=settings;this.that=that;this.$that=$(that);this.formatted=false;this.settingsClone=autoCode(this.$that,this.settings);this.value=that.value;}
AutoNumericHolder.prototype={init:function(e){this.value=this.that.value;this.settingsClone=autoCode(this.$that,this.settings);this.ctrlKey=e.ctrlKey;this.cmdKey=e.metaKey;this.shiftKey=e.shiftKey;this.selection=getElementSelection(this.that);if(e.type==='keydown'||e.type==='keyup'){this.kdCode=e.keyCode;}
this.which=e.which;this.processed=false;this.formatted=false;},setSelection:function(start,end,setReal){start=Math.max(start,0);end=Math.min(end,this.that.value.length);this.selection={start:start,end:end,length:end-start};if(setReal===undefined||setReal){setElementSelection(this.that,start,end);}},setPosition:function(pos,setReal){this.setSelection(pos,pos,setReal);},getBeforeAfter:function(){var value=this.value;var left=value.substring(0,this.selection.start);var right=value.substring(this.selection.end,value.length);return[left,right];},getBeforeAfterStriped:function(){var parts=this.getBeforeAfter();parts[0]=autoStrip(parts[0],this.settingsClone);parts[1]=autoStrip(parts[1],this.settingsClone);return parts;},normalizeParts:function(left,right){var settingsClone=this.settingsClone;right=autoStrip(right,settingsClone);var strip=right.match(/^\d/)?true:'leading';left=autoStrip(left,settingsClone,strip);if((left===''||left===settingsClone.aNeg)&&settingsClone.lZero==='deny'){if(right>''){right=right.replace(/^0*(\d)/,'$1');}}
var new_value=left+right;if(settingsClone.aDec){var m=new_value.match(new RegExp('^'+settingsClone.aNegRegAutoStrip+'\\'+settingsClone.aDec));if(m){left=left.replace(m[1],m[1]+'0');new_value=left+right;}}
if(settingsClone.wEmpty==='zero'&&(new_value===settingsClone.aNeg||new_value==='')){left+='0';}
return[left,right];},setValueParts:function(left,right){var settingsClone=this.settingsClone;var parts=this.normalizeParts(left,right);var new_value=parts.join('');var position=parts[0].length;if(autoCheck(new_value,settingsClone)){new_value=truncateDecimal(new_value,settingsClone.aDec,settingsClone.mDec);if(position>new_value.length){position=new_value.length;}
this.value=new_value;this.setPosition(position,false);return true;}
return false;},signPosition:function(){var settingsClone=this.settingsClone,aSign=settingsClone.aSign,that=this.that;if(aSign){var aSignLen=aSign.length;if(settingsClone.pSign==='p'){var hasNeg=settingsClone.aNeg&&that.value&&that.value.charAt(0)===settingsClone.aNeg;return hasNeg?[1,aSignLen+1]:[0,aSignLen];}
var valueLen=that.value.length;return[valueLen-aSignLen,valueLen];}
return[1000,-1];},expandSelectionOnSign:function(setReal){var sign_position=this.signPosition();var selection=this.selection;if(selection.start<sign_position[1]&&selection.end>sign_position[0]){if((selection.start<sign_position[0]||selection.end>sign_position[1])&&this.value.substring(Math.max(selection.start,sign_position[0]),Math.min(selection.end,sign_position[1])).match(/^\s*$/)){if(selection.start<sign_position[0]){this.setSelection(selection.start,sign_position[0],setReal);}else{this.setSelection(sign_position[1],selection.end,setReal);}}else{this.setSelection(Math.min(selection.start,sign_position[0]),Math.max(selection.end,sign_position[1]),setReal);}}},checkPaste:function(){if(this.valuePartsBeforePaste!==undefined){var parts=this.getBeforeAfter();var oldParts=this.valuePartsBeforePaste;delete this.valuePartsBeforePaste;parts[0]=parts[0].substr(0,oldParts[0].length)+autoStrip(parts[0].substr(oldParts[0].length),this.settingsClone);if(!this.setValueParts(parts[0],parts[1])){this.value=oldParts.join('');this.setPosition(oldParts[0].length,false);}}},skipAllways:function(e){var kdCode=this.kdCode,which=this.which,ctrlKey=this.ctrlKey,cmdKey=this.cmdKey;if(kdCode===17&&e.type==='keyup'&&this.valuePartsBeforePaste!==undefined){this.checkPaste();return false;}
if((kdCode>=112&&kdCode<=123)||(kdCode>=91&&kdCode<=93)||(kdCode>=9&&kdCode<=31)||(kdCode<8&&(which===0||which===kdCode))||kdCode===144||kdCode===145||kdCode===45){return true;}
if((ctrlKey||cmdKey)&&kdCode===65){return true;}
if((ctrlKey||cmdKey)&&(kdCode===67||kdCode===86||kdCode===88)){if(e.type==='keydown'){this.expandSelectionOnSign();}
if(kdCode===86){if(e.type==='keydown'||e.type==='keypress'){if(this.valuePartsBeforePaste===undefined){this.valuePartsBeforePaste=this.getBeforeAfter();}}else{this.checkPaste();}}
return e.type==='keydown'||e.type==='keypress'||kdCode===67;}
if(ctrlKey||cmdKey){return true;}
if(kdCode===37||kdCode===39){var aSep=this.settingsClone.aSep,start=this.selection.start,value=this.that.value;if(e.type==='keydown'&&aSep&&!this.shiftKey){if(kdCode===37&&value.charAt(start-2)===aSep){this.setPosition(start-1);}else if(kdCode===39&&value.charAt(start)===aSep){this.setPosition(start+1);}}
return true;}
if(kdCode>=34&&kdCode<=40){return true;}
return false;},processAllways:function(){var parts;if(this.kdCode===8||this.kdCode===46){if(!this.selection.length){parts=this.getBeforeAfterStriped();if(this.kdCode===8){parts[0]=parts[0].substring(0,parts[0].length-1);}else{parts[1]=parts[1].substring(1,parts[1].length);}
this.setValueParts(parts[0],parts[1]);}else{this.expandSelectionOnSign(false);parts=this.getBeforeAfterStriped();this.setValueParts(parts[0],parts[1]);}
return true;}
return false;},processKeypress:function(){var settingsClone=this.settingsClone;var cCode=String.fromCharCode(this.which);var parts=this.getBeforeAfterStriped();var left=parts[0],right=parts[1];if(cCode===settingsClone.aDec||(settingsClone.altDec&&cCode===settingsClone.altDec)||((cCode==='.'||cCode===',')&&this.kdCode===110)){if(!settingsClone.mDec||!settingsClone.aDec){return true;}
if(settingsClone.aNeg&&right.indexOf(settingsClone.aNeg)>-1){return true;}
if(left.indexOf(settingsClone.aDec)>-1){return true;}
if(right.indexOf(settingsClone.aDec)>0){return true;}
if(right.indexOf(settingsClone.aDec)===0){right=right.substr(1);}
this.setValueParts(left+settingsClone.aDec,right);return true;}
if(cCode==='-'||cCode==='+'){if(!settingsClone.aNeg){return true;}
if(left===''&&right.indexOf(settingsClone.aNeg)>-1){left=settingsClone.aNeg;right=right.substring(1,right.length);}
if(left.charAt(0)===settingsClone.aNeg){left=left.substring(1,left.length);}else{left=(cCode==='-')?settingsClone.aNeg+left:left;}
this.setValueParts(left,right);return true;}
if(cCode>='0'&&cCode<='9'){if(settingsClone.aNeg&&left===''&&right.indexOf(settingsClone.aNeg)>-1){left=settingsClone.aNeg;right=right.substring(1,right.length);}
this.setValueParts(left+cCode,right);return true;}
return true;},formatQuick:function(){var settingsClone=this.settingsClone;var parts=this.getBeforeAfterStriped();var leftLength=this.value;if((settingsClone.aSep===''||(settingsClone.aSep!==''&&leftLength.indexOf(settingsClone.aSep)===-1))&&(settingsClone.aSign===''||(settingsClone.aSign!==''&&leftLength.indexOf(settingsClone.aSign)===-1))){var subParts=[],nSign='';subParts=leftLength.split(settingsClone.aDec);if(subParts[0].indexOf('-')>-1){nSign='-';subParts[0]=subParts[0].replace('-','');parts[0]=parts[0].replace('-','');}
if(subParts[0].length>settingsClone.mInt&&parts[0].charAt(0)==='0'){parts[0]=parts[0].slice(1);}
parts[0]=nSign+parts[0];}
var value=autoGroup(this.value,this.settingsClone);var position=value.length;if(value){var left_ar=parts[0].split('');var i=0;for(i;i<left_ar.length;i+=1){if(!left_ar[i].match('\\d')){left_ar[i]='\\'+left_ar[i];}}
var leftReg=new RegExp('^.*?'+left_ar.join('.*?'));var newLeft=value.match(leftReg);if(newLeft){position=newLeft[0].length;if(((position===0&&value.charAt(0)!==settingsClone.aNeg)||(position===1&&value.charAt(0)===settingsClone.aNeg))&&settingsClone.aSign&&settingsClone.pSign==='p'){position=this.settingsClone.aSign.length+(value.charAt(0)==='-'?1:0);}}else if(settingsClone.aSign&&settingsClone.pSign==='s'){position-=settingsClone.aSign.length;}}
this.that.value=value;this.setPosition(position);this.formatted=true;}};function autoGet(obj){if(typeof obj==='string'){obj=obj.replace(/\[/g,"\\[").replace(/\]/g,"\\]");obj='#'+obj.replace(/(:|\.)/g,'\\$1');}
return $(obj);}
function getHolder($that,settings){var data=$that.data('autoNumeric');if(!data){data={};$that.data('autoNumeric',data);}
var holder=data.holder;if(holder===undefined&&settings){holder=new AutoNumericHolder($that.get(0),settings);data.holder=holder;}
return holder;}
var methods={init:function(options){return this.each(function(){var $this=$(this);var settings=$this.data('autoNumeric');var tagData=$this.data();if(typeof settings!=='object'){var defaults={aNum:'0123456789',aSep:',',dGroup:'3',aDec:'.',altDec:null,aSign:'',pSign:'p',vMax:'999999999.99',vMin:'0.00',mDec:null,mRound:'S',aPad:true,nBracket:null,wEmpty:'empty',lZero:'allow',aForm:true,onSomeEvent:function(){}};settings=$.extend({},defaults,tagData,options);if(settings.aDec===settings.aSep){$.error("autoNumeric will not function properly when the decimal character aDec: '"+settings.aDec+"' and thousand seperater aSep: '"+settings.aSep+"' are the same character");return this;}
if($.inArray($this.prop('tagName'),settings.tagList)!==-1){$.error("The <"+$this.prop('tagName')+"> is not supported by autoNumeric()");return this;}
$this.data('autoNumeric',settings);}else{return this;}
var holder=getHolder($this,settings);if(settings.runOnce===undefined&&settings.aForm&&($this[0].value||$this.text()!=='')){if($this.is('input[type=text], input[type=hidden], input:not([type])')){if(settings.nBracket!==null&&($this[0].value||settings.wEmpty!=='empty')){settings.oEvent="pageLoad";$this[0].value=negativeBracket($this[0].value,settings.nBracket,settings.oEvent);$this[0].value=autoStrip($this[0].value,settings);}
if($this[0].value!==$($this[0]).attr("value")){$this.autoNumeric('set',autoStrip($this.val(),settings));}else{$this.autoNumeric('set',$this.val());}}
if($.inArray($this.prop('tagName'),settings.tagList)!==-1){$this.autoNumeric('set',$this.text());}}
settings.runOnce=true;if($this.is('input[type=text], input[type=hidden], input:not([type])')&&!$this.is('[readonly]')){$this.bind('keydown.autoNumeric',function(e){holder=getHolder($this);if(holder.settings.aDec===holder.settings.aSep){$.error("autoNumeric will not function properly when the decimal character aDec: '"+holder.settings.aDec+"' and thousand seperater aSep: '"+holder.settings.aSep+"' are the same character");return this;}
if(holder.that.readOnly){holder.processed=true;return true;}
holder.init(e);holder.settings.oEvent='keydown';if(holder.skipAllways(e)){holder.processed=true;return true;}
if(holder.processAllways()){holder.processed=true;holder.formatQuick();e.preventDefault();return false;}
holder.formatted=false;return true;});$this.bind('keypress.autoNumeric',function(e){var holder=getHolder($this),processed=holder.processed;holder.init(e);holder.settings.oEvent='keypress';if(holder.skipAllways(e)){return true;}
if(processed){e.preventDefault();return false;}
if(holder.processAllways()||holder.processKeypress()){holder.formatQuick();e.preventDefault();return false;}
holder.formatted=false;});$this.bind('keyup.autoNumeric',function(e){var holder=getHolder($this);holder.init(e);holder.settings.oEvent='keyup';var skip=holder.skipAllways(e);holder.kdCode=0;delete holder.valuePartsBeforePaste;if(skip){return true;}
if(this.value===''){return true;}
if(!holder.formatted){holder.formatQuick();}});$this.bind('focusin.autoNumeric',function(){var holder=getHolder($this);holder.settingsClone.oEvent='focusin';if(holder.settingsClone.nBracket!==null){var checkVal=$this.val();$this.val(negativeBracket(checkVal,holder.settingsClone.nBracket,holder.settingsClone.oEvent));}
holder.inVal=$this.val();var onempty=checkEmpty(holder.inVal,holder.settingsClone,true);if(onempty!==null){$this.val(onempty);}});$this.bind('focusout.autoNumeric',function(){var holder=getHolder($this),settingsClone=holder.settingsClone,value=$this.val(),origValue=value;holder.settingsClone.oEvent='focusout';var strip_zero='';if(settingsClone.lZero==='allow'){settingsClone.allowLeading=false;strip_zero='leading';}
if(value!==''){value=autoStrip(value,settingsClone,strip_zero);if(checkEmpty(value,settingsClone)===null&&autoCheck(value,settingsClone,$this[0])){value=fixNumber(value,settingsClone.aDec,settingsClone.aNeg);value=autoRound(value,settingsClone);value=presentNumber(value,settingsClone.aDec,settingsClone.aNeg);}else{value='';}}
var groupedValue=checkEmpty(value,settingsClone,false);if(groupedValue===null){groupedValue=autoGroup(value,settingsClone);}
if(groupedValue!==origValue){$this.val(groupedValue);}
if(groupedValue!==holder.inVal){$this.change();delete holder.inVal;}
if(settingsClone.nBracket!==null&&$this.autoNumeric('get')<0){holder.settingsClone.oEvent='focusout';$this.val(negativeBracket($this.val(),settingsClone.nBracket,settingsClone.oEvent));}});}else if($this.is('input[type=text], input[type=hidden], input:not([type])')&&$this.is('[readonly]')){this.blur();}});},destroy:function(){return $(this).each(function(){var $this=$(this);$this.unbind('.autoNumeric');$this.removeData('autoNumeric');});},update:function(options){return $(this).each(function(){var $this=autoGet($(this)),settings=$this.data('autoNumeric');if(typeof settings!=='object'){$.error("You must initialize autoNumeric('init', {options}) prior to calling the 'update' method");return this;}
var strip=$this.autoNumeric('get');settings=$.extend(settings,options);if(settings.aDec===settings.aSep){$.error("autoNumeric will not function properly when the decimal character aDec: '"+settings.aDec+"' and thousand seperater aSep: '"+settings.aSep+"' are the same character");return this;}
$this.data('autoNumeric',settings);if($this.val()!==''||$this.text()!==''){return $this.autoNumeric('set',strip);}
return;});},set:function(valueIn){return $(this).each(function(){var $this=autoGet($(this)),settings=$this.data('autoNumeric'),value=valueIn;value=checkValue(value);settings.oEvent='set';if(typeof settings!=='object'){$.error("You must initialize autoNumeric('init', {options}) prior to calling the 'set' method");return this;}
value.toString();if(value!==''){value=autoRound(value,settings);}
value=presentNumber(value,settings.aDec,settings.aNeg);if(!autoCheck(value,settings)){value=autoRound('',settings);}
value=autoGroup(value,settings);if($this.is('input[type=text], input[type=hidden], input:not([type])')){return $this.val(value);}
if($.inArray($this.prop('tagName'),settings.tagList)!==-1){return $this.text(value);}
$.error("The <"+$this.prop('tagName')+"> is not supported by autoNumeric()");return false;});},get:function(){var $this=autoGet($(this)),settings=$this.data('autoNumeric');settings.oEvent='get';if(typeof settings!=='object'){$.error("You must initialize autoNumeric('init', {options}) prior to calling the 'get' method");return this;}
var getValue='';if($this.is('input[type=text], input[type=hidden], input:not([type])')){getValue=$this.eq(0).val();}else if($.inArray($this.prop('tagName'),settings.tagList)!==-1){getValue=$this.eq(0).text();}else{$.error("The <"+$this.prop('tagName')+"> is not supported by autoNumeric()");return false;}
if((getValue===''&&settings.wEmpty==='empty')||(getValue===settings.aSign&&settings.wEmpty==='sign')){return'';}
if(settings.nBracket!==null&&getValue!==''){getValue=negativeBracket(getValue,settings.nBracket,settings.oEvent);}
if(settings.runOnce||settings.aForm===false){getValue=autoStrip(getValue,settings);}
getValue=fixNumber(getValue,settings.aDec,settings.aNeg);if(+getValue===0&&settings.lZero!=='keep'){getValue='0';}
if(settings.lZero==='keep'){return getValue;}
getValue=checkValue(getValue);return getValue;},getString:function(){var isAutoNumeric=false,$this=autoGet($(this)),str=$this.serialize(),parts=str.split('&'),i=0;for(i;i<parts.length;i+=1){var miniParts=parts[i].split('=');var settings=$('*[name='+miniParts[0]+']').data('autoNumeric');if(typeof settings==='object'){if(miniParts[1]!==null&&$('*[name='+miniParts[0]+']').data('autoNumeric')!==undefined){miniParts[1]=$('input[name='+miniParts[0]+']').autoNumeric('get');parts[i]=miniParts.join('=');isAutoNumeric=true;}}}
if(isAutoNumeric===true){return parts.join('&');}
$.error("You must initialize autoNumeric('init', {options}) prior to calling the 'getString' method");return this;},getArray:function(){var isAutoNumeric=false,$this=autoGet($(this)),formFields=$this.serializeArray();$.each(formFields,function(i,field){var settings=$('*[name='+field.name+']').data('autoNumeric');if(typeof settings==='object'){if(field.value!==''&&$('*[name='+field.name+']').data('autoNumeric')!==undefined){field.value=$('input[name='+field.name+']').autoNumeric('get').toString();}
isAutoNumeric=true;}});if(isAutoNumeric===true){return formFields;}
$.error("You must initialize autoNumeric('init', {options}) prior to calling the 'getArray' method");return this;},getSettings:function(){var $this=autoGet($(this));return $this.eq(0).data('autoNumeric');}};$.fn.autoNumeric=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}
if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}
$.error('Method "'+method+'" is not supported by autoNumeric()');};}(jQuery));(function($){$.fn.appear=function(fn,options){var settings=$.extend({data:undefined,one:true},options);return this.each(function(){var t=$(this);t.appeared=false;if(!fn){t.trigger('appear',settings.data);return;}
var w=settings.container?$(settings.container):$(window);if(settings.container){w.data('customContainer',true);}
var check=function(){if(!t.is(':visible')){t.appeared=false;return;}
var a=w.scrollLeft();var b=w.scrollTop();var wh=w.height();var ww=w.width();var o=t.offset();if(w.data('customContainer')){var cOffset=w.offset();var x=o.left-cOffset.left+a;var y=o.top-cOffset.top+b;}else{var x=o.left;var y=o.top;}
if(y+t.height()>=b&&y<=b+wh&&x+t.width()>=a&&x<=a+ww){if(!t.appeared)t.trigger('appear',settings.data);}else{t.appeared=false;}};var modifiedFn=function(){t.appeared=true;if(settings.one){w.unbind('scroll',check);var i=$.inArray(check,$.fn.appear.checks);if(i>=0)$.fn.appear.checks.splice(i,1);}
fn.apply(this,arguments);};if(settings.one)t.one('appear',settings.data,modifiedFn);else t.bind('appear',settings.data,modifiedFn);w.scroll(check);$.fn.appear.checks.push(check);(check)();});};$.extend($.fn.appear,{checks:[],timeout:null,checkAll:function(){var length=$.fn.appear.checks.length;if(length>0)while(length--)($.fn.appear.checks[length])();},run:function(){if($.fn.appear.timeout)clearTimeout($.fn.appear.timeout);$.fn.appear.timeout=setTimeout($.fn.appear.checkAll,20);}});$.each(['append','prepend','after','before','attr','removeAttr','addClass','removeClass','toggleClass','remove','css','show','hide'],function(i,n){var old=$.fn[n];if(old){$.fn[n]=function(){var r=old.apply(this,arguments);$.fn.appear.run();return r;}}});})(jQuery);(function(a){a.tools=a.tools||{version:"v1.2.7"},a.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,fadeIE:!1,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(a,c,d){b[a]=[c,d]}};var b={toggle:[function(a){var b=this.getConf(),c=this.getTip(),d=b.opacity;d<1&&c.css({opacity:d}),c.show(),a.call()},function(a){this.getTip().hide(),a.call()}],fade:[function(b){var c=this.getConf();!a.browser.msie||c.fadeIE?this.getTip().fadeTo(c.fadeInSpeed,c.opacity,b):(this.getTip().show(),b())},function(b){var c=this.getConf();!a.browser.msie||c.fadeIE?this.getTip().fadeOut(c.fadeOutSpeed,b):(this.getTip().hide(),b())}]};function c(b,c,d){var e=d.relative?b.position().top:b.offset().top,f=d.relative?b.position().left:b.offset().left,g=d.position[0];e-=c.outerHeight()-d.offset[0],f+=b.outerWidth()+d.offset[1],/iPad/i.test(navigator.userAgent)&&(e-=a(window).scrollTop());var h=c.outerHeight()+b.outerHeight();g=="center"&&(e+=h/2),g=="bottom"&&(e+=h),g=d.position[1];var i=c.outerWidth()+b.outerWidth();g=="center"&&(f-=i/2),g=="left"&&(f-=i);return{top:e,left:f}}function d(d,e){var f=this,g=d.add(f),h,i=0,j=0,k=d.attr("title"),l=d.attr("data-tooltip"),m=b[e.effect],n,o=d.is(":input"),p=o&&d.is(":checkbox, :radio, select, :button, :submit"),q=d.attr("type"),r=e.events[q]||e.events[o?p?"widget":"input":"def"];if(!m)throw"Nonexistent effect \""+e.effect+"\"";r=r.split(/,\s*/);if(r.length!=2)throw"Tooltip: bad events configuration for "+q;d.on(r[0],function(a){clearTimeout(i),e.predelay?j=setTimeout(function(){f.show(a)},e.predelay):f.show(a)}).on(r[1],function(a){clearTimeout(j),e.delay?i=setTimeout(function(){f.hide(a)},e.delay):f.hide(a)}),k&&e.cancelDefault&&(d.removeAttr("title"),d.data("title",k)),a.extend(f,{show:function(b){if(!h){l?h=a(l):e.tip?h=a(e.tip).eq(0):k?h=a(e.layout).addClass(e.tipClass).appendTo(document.body).hide().append(k):(h=d.next(),h.length||(h=d.parent().next()));if(!h.length)throw"Cannot find tooltip for "+d}if(f.isShown())return f;h.stop(!0,!0);var o=c(d,h,e);e.tip&&h.html(d.data("title")),b=a.Event(),b.type="onBeforeShow",g.trigger(b,[o]);if(b.isDefaultPrevented())return f;o=c(d,h,e),h.css({position:"absolute",top:o.top,left:o.left}),n=!0,m[0].call(f,function(){b.type="onShow",n="full",g.trigger(b)});var p=e.events.tooltip.split(/,\s*/);h.data("__set")||(h.off(p[0]).on(p[0],function(){clearTimeout(i),clearTimeout(j)}),p[1]&&!d.is("input:not(:checkbox, :radio), textarea")&&h.off(p[1]).on(p[1],function(a){a.relatedTarget!=d[0]&&d.trigger(r[1].split(" ")[0])}),e.tip||h.data("__set",!0));return f},hide:function(c){if(!h||!f.isShown())return f;c=a.Event(),c.type="onBeforeHide",g.trigger(c);if(!c.isDefaultPrevented()){n=!1,b[e.effect][1].call(f,function(){c.type="onHide",g.trigger(c)});return f}},isShown:function(a){return a?n=="full":n},getConf:function(){return e},getTip:function(){return h},getTrigger:function(){return d}}),a.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(b,c){a.isFunction(e[c])&&a(f).on(c,e[c]),f[c]=function(b){b&&a(f).on(c,b);return f}})}a.fn.tooltip=function(b){var c=this.data("tooltip");if(c)return c;b=a.extend(!0,{},a.tools.tooltip.conf,b),typeof b.position=="string"&&(b.position=b.position.split(/,?\s/)),this.each(function(){c=new d(a(this),b),a(this).data("tooltip",c)});return b.api?c:this}})(jQuery);(function(a){var b=a.tools.tooltip;b.dynamic={conf:{classNames:"top right bottom left"}};function c(b){var c=a(window),d=c.width()+c.scrollLeft(),e=c.height()+c.scrollTop();return[b.offset().top<=c.scrollTop(),d<=b.offset().left+b.width(),e<=b.offset().top+b.height(),c.scrollLeft()>=b.offset().left]}function d(a){var b=a.length;while(b--)if(a[b])return!1;return!0}a.fn.dynamic=function(e){typeof e=="number"&&(e={speed:e}),e=a.extend({},b.dynamic.conf,e);var f=a.extend(!0,{},e),g=e.classNames.split(/\s/),h;this.each(function(){var b=a(this).tooltip().onBeforeShow(function(b,e){var i=this.getTip(),j=this.getConf();h||(h=[j.position[0],j.position[1],j.offset[0],j.offset[1],a.extend({},j)]),a.extend(j,h[4]),j.position=[h[0],h[1]],j.offset=[h[2],h[3]],i.css({visibility:"hidden",position:"absolute",top:e.top,left:e.left}).show();var k=a.extend(!0,{},f),l=c(i);if(!d(l)){l[2]&&(a.extend(j,k.top),j.position[0]="top",i.addClass(g[0])),l[3]&&(a.extend(j,k.right),j.position[1]="right",i.addClass(g[1])),l[0]&&(a.extend(j,k.bottom),j.position[0]="bottom",i.addClass(g[2])),l[1]&&(a.extend(j,k.left),j.position[1]="left",i.addClass(g[3]));if(l[0]||l[2])j.offset[0]*=-1;if(l[1]||l[3])j.offset[1]*=-1}i.css({visibility:"visible"}).hide()});b.onBeforeShow(function(){var a=this.getConf(),b=this.getTip();setTimeout(function(){a.position=[h[0],h[1]],a.offset=[h[2],h[3]]},0)}),b.onHide(function(){var a=this.getTip();a.removeClass(e.classNames)}),ret=b});return e.api?ret:this}})(jQuery);(function(a){var b=a.tools.tooltip;a.extend(b.conf,{direction:"up",bounce:!1,slideOffset:10,slideInSpeed:200,slideOutSpeed:200,slideFade:!a.browser.msie});var c={up:["-","top"],down:["+","top"],left:["-","left"],right:["+","left"]};b.addEffect("slide",function(a){var b=this.getConf(),d=this.getTip(),e=b.slideFade?{opacity:b.opacity}:{},f=c[b.direction]||c.up;e[f[1]]=f[0]+"="+b.slideOffset,b.slideFade&&d.css({opacity:0}),d.show().animate(e,b.slideInSpeed,a)},function(b){var d=this.getConf(),e=d.slideOffset,f=d.slideFade?{opacity:0}:{},g=c[d.direction]||c.up,h=""+g[0];d.bounce&&(h=h=="+"?"-":"+"),f[g[1]]=h+"="+e,this.getTip().animate(f,d.slideOutSpeed,function(){a(this).hide(),b.call()})})})(jQuery);(function(_,$){$.widget("ui.dialog",$.ui.dialog,{_allowInteraction:function(event){if(this._super(event)){return true;}
if(event.target.ownerDocument!=this.document[0]){return true;}
if($(event.target).closest(".mce-container").length){return true;}
if($(event.target).closest(".mce").length){return true;}},_moveToTop:function(event,silent){if(!event||!this.options.modal){this._super(event,silent);}}});var support_langs=['ar','hy','az','eu','be','bs','ca','hr','cs','da','dv','nl','et','fo','fi','gl','de','el','id','it','ja','kk','lv','lt','lb','fa','pl','ro','ru','sr','sk','es','tg','ta','ug','uk','vi','cy','fr','ka','he','hu','is','bg','zh','en','km','ko','ml','nb','pt','si','sl','sv','ta','th','tr'];var lang_map={'fr':'fr_FR','ka':'ka_GE','he':'he_IL','hu':'hu_HU','is':'is_IS','bg':'bg_BG','zh':'zh_CN','en':'en_GB','km':'km_KH','ko':'ko_KR','ml':'ml_IN','nb':'nb_NO','pt':'pt_PT','si':'si_LK','sl':'sl_SI','sv':'sv_SE','ta':'ta_IN','th':'th_TH','tr':'tr_TR'};var lang=fn_get_listed_lang(support_langs);if(lang in lang_map){lang=lang_map[lang];}
var editor={editorName:'tinymce',is_destroying:false,params:{plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste textcolor"],menubar:false,statusbar:true,mode:"textareas",force_p_newlines:true,extended_valid_elements:"i[*],span[*]",forced_root_block:'',media_strict:false,toolbar:undefined,resize:true,theme:'modern',language:lang,strict_loading_mode:true,convert_urls:false,remove_script_host:false,body_class:'wysiwyg-content',file_picker_callback:function(callback,value,meta){tinyMCE.activeEditor.windowManager.open({file:_.current_location+'/js/lib/elfinder/elfinder.tinymce.html',title:_.tr('file_browser'),width:600,height:450,resizable:'yes',inline:'yes',close_previous:'no',popup_css:false},{'connector_url':fn_url('elf_connector.images?security_hash='+_.security_hash),'callback':callback});},entity_encoding:'raw',},run:function($el,params){editor.params.toolbar='formatselect fontselect fontsizeselect bold italic underline forecolor backcolor | link image | numlist bullist indent outdent | alignleft aligncenter alignright | code';if(_.area=='C'){editor.params.toolbar='formatselect fontselect fontsizeselect bold italic underline forecolor backcolor | numlist bullist indent outdent | alignleft aligncenter alignright';}
if(typeof($.fn.tinymce)=='undefined'){$.ceEditor('state','loading');return $.getScript('js/lib/tinymce/jquery.tinymce.min.js',function(){$.ceEditor('state','loaded');$el.ceEditor('run',params);});}
if(!this.params.setup){this.params.setup=function(editor){editor.on('init',function(){if($el.prop('disabled')){$el.ceEditor('disable',true);}});editor.on('change',function(){$el.ceEditor('changed',editor.getContent());});};}
this.params.script_url=_.current_location+'/js/lib/tinymce/tinymce.min.js';if(!this.params){this.params={script_url:_.current_location+'/js/lib/tinymce/tinymce.min.js',plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste textcolor"],menubar:false,statusbar:true,mode:"textareas",force_p_newlines:true,extended_valid_elements:"i[*],span[*]",forced_root_block:'',media_strict:false,toolbar:'formatselect fontselect fontsizeselect bold italic underline forecolor backcolor | link image | numlist bullist indent outdent | alignleft aligncenter alignright | code',resize:true,theme:'modern',language:lang,strict_loading_mode:true,convert_urls:false,remove_script_host:false,body_class:'wysiwyg-content',file_picker_callback:function(callback,value,meta){tinyMCE.activeEditor.windowManager.open({file:_.current_location+'/js/lib/elfinder/elfinder.tinymce.html',title:_.tr('file_browser'),width:600,height:450,resizable:'yes',inline:'yes',close_previous:'no',popup_css:false},{'connector_url':fn_url('elf_connector.images?security_hash='+_.security_hash),'callback':callback});},setup:function(ed){ed.on('init',function(ed){if(elm.prop('disabled')){elm.ceEditor('disable',true);}});ed.on('change',function(){elm.ceEditor('changed',ed.getContent());});},entity_encoding:'raw',};if(typeof params!=='undefined'&&params[this.editorName]){$.extend(this.params,params[this.editorName]);}}
$el.tinymce(this.params);},destroy:function($el){var _this=this;tinymce.remove();this.is_destroying=true;setTimeout(function(){_this.is_destroying=false;},1);},recover:function($el){if(this.is_destroying){setTimeout(function(){$el.ceEditor('run');},1);}else{$el.ceEditor('run');}},val:function($el,value){if(typeof(value)=='undefined'){return $el.val();}else{$el.val(value);}
return true;},updateTextFields:function(elm){return true;},disable:function($el,value){var state=(value==true)?'Off':'On';$('.mce-toolbar-grp').toggle();tinyMCE.editors[0].getBody().setAttribute('contenteditable',!value);$el.prop('disabled',value);}};$.ceEditor('handlers',editor);}(Tygh,Tygh.$));(function(_,$){'use strict';var ui=(function(){return{winWidth:function(){return $(window).width();},responsiveScroll:function(){$.ceEvent('on','ce.needScroll',function(opt){opt.need_scroll=false;setTimeout(function(){$.scrollToElm($('#'+opt.jelm.data('caScroll')));},310);});},responsiveNotifications:function(){if(this.winWidth()<=767){$.ceEvent('on','ce.notificationshow',function(notification){if($(notification).hasClass('cm-notification-content-extended')){$('body,html').scrollTop(0);}});}},responsiveTabs:function(){if(this.winWidth()<=480){$('.cm-j-tabs:not(.cm-j-tabs-disable-convertation)').each(function(index){var accordion=$('<div class="ty-accordion cm-accordion" id="accordion_id_'+index+'">');var tabsContent=$('.cm-tabs-content:not(.cm-j-content-disable-convertation)');var self=this;$(this).hide();tabsContent.hide();if(!$('#accordion_id_'+index).length){$(this).find('>ul>li').each(function(){var id=$(this).attr('id');var content=$('.cm-tabs-content > #content_'+id).show();$(this).attr('id','hidden_tab_'+id);accordion.append('<h3 id="'+id+'">'+$(this).text()+'</h3>');$(content).appendTo(accordion);});$(self).before(accordion);}});$('.cm-accordion').ceAccordion('reinit',{animate:300,heightStyle:"content",activate:function(event,ui){var accordionTop=$(this).scrollTop(),headerOffset=$(ui.newHeader);if(headerOffset.length>0){if("-ms-user-select"in document.documentElement.style&&navigator.userAgent.match(/IEMobile\/10\.0/)){setTimeout(function(){$('html, body').scrollTop(accordionTop+headerOffset.offset().top-10);},300);}else{$('html, body').animate({scrollTop:accordionTop+headerOffset.offset().top-10},300);}}}});var active=_.anchor;if(typeof active!=='undefined'&&$(active).length>0){$(active).click();}}else{$('.cm-accordion').accordion('destroy');$('.cm-accordion > div').each(function(index){$(this).hide();$(this).appendTo($('.cm-tabs-content'));});$('.cm-accordion').remove();$('.cm-j-tabs>ul>li').each(function(){var id=$(this).attr('id').replace('hidden_tab_','');$(this).attr('id',id);if($(this).hasClass('active')){$('#content_'+$(this).attr('id')).show();}});$('.cm-j-tabs, .cm-tabs-content').show();}},responsiveMenu:function(){var whichEvent=('ontouchstart'in document.documentElement?"touchstart":"click");if(_.isTouch&&window.navigator.msPointerEnabled){whichEvent='click';}
if($('.ty-menu__menu-btn').data('ca-responsive-menu')!==true){$('.ty-menu__menu-btn').on(whichEvent,function(e){var menu_elm=$('.cm-responsive-menu');$(this).parent(menu_elm).find('.ty-menu__item').toggle();});$('.cm-responsive-menu-toggle').on(whichEvent,function(e){$(this).toggleClass('ty-menu__item-toggle-active');$('.icon-down-open',this).toggleClass('icon-up-open');$(this).parent().find('.cm-responsive-menu-submenu').first().toggleClass('ty-menu__items-show');});$('.ty-menu__menu-btn').data('ca-responsive-menu',true);}
if(_.isTouch==false&&ui.winWidth()>=767){$('.cm-responsive-menu').on('mouseover mouseout',function(e){ui.detectMenuWidth(e);});}},responsiveMenuLargeTouch:function(e){var elm=$(e.target);var menuWidth=$('.cm-responsive-menu').width();if(ui.winWidth()>=767&&e.type=='touchstart'){var menuItem=elm.hasClass('cm-menu-item-responsive')?elm:elm.closest('.cm-menu-item-responsive');if(!menuItem.hasClass('is-hover-menu')&&menuItem.find('.ty-menu__submenu-items').length>0){e.preventDefault();menuItem.siblings('.cm-menu-item-responsive').removeClass('is-hover-menu');menuItem.addClass('is-hover-menu');}
var subMenu=$('.ty-menu__submenu-items');if(subMenu.is(':visible')&&!elm.closest('.cm-menu-item-responsive').length){$('.cm-menu-item-responsive').removeClass('is-hover-menu');}}else{$('.cm-menu-item-responsive').removeClass('is-hover-menu');}
ui.detectMenuWidth(e);},detectMenuWidth:function(e){var elm=$(e.target);var menuElm=elm.parents(".cm-responsive-menu");var isHorisontalMenu=menuElm.parent().hasClass("ty-menu-vertical")?false:true;if(isHorisontalMenu){var menuWidth=menuElm.outerWidth();var menuOffset=menuElm.offset();var menuItemElm=elm.closest('.cm-menu-item-responsive');$('.ty-menu__submenu-to-right').removeClass('ty-menu__submenu-to-right');var submenu,position;if(menuItemElm){if(typeof menuItemElm.offset()!=="undefined"){menuWidth=menuWidth-(menuItemElm.offset().left-menuOffset.left)}
submenu=$('.cm-responsive-menu-submenu',menuItemElm).first();if(submenu.length){submenu.css({visibility:"hidden",left:0});position=submenu.outerWidth();if(position>menuWidth){submenu.parent().addClass('ty-menu__submenu-to-right');}
submenu.css({visibility:"",left:"auto"});}}}},responsiveTables:function(e){var tables=$('.ty-table');if(this.winWidth()<=767){tables.each(function(){var thTexts=[];var subTable=$(this).find('.ty-table');if(subTable.length){var subTableStack=[];subTable.each(function(index){$(this).parent().attr('data-ca-has-sub-table_'+index,'true');subTableStack.push($(this).detach());});}
$(this).find('th:not(.ty-table-disable-convertation)').each(function(){thTexts.push($(this).text());});$(this).find('tr:not(.ty-table__no-items)').each(function(){$(this).find('td:not(.ty-table-disable-convertation)').each(function(index){var $elm=$(this);if($elm.find('.ty-table__responsive-content').length==0){$elm.wrapInner('<div class="ty-table__responsive-content"></div>');$elm.prepend('<div class="ty-table__responsive-header">'+thTexts[index]+'</div>');}});});if(subTable.length){subTable.each(function(index){var subTableElm=$('[data-ca-has-sub-table_'+index+']');subTableElm.prepend(subTableStack[index]);subTableElm.removeAttr('data-ca-has-sub-table_'+index);});}});}},resizeDialog:function(){var self=this;var dlg=$('.ui-dialog');$('.ui-widget-overlay').css({'min-height':$(window).height()});$(dlg).css({'position':'absolute','width':$(window).width()-20,'left':'10px','top':'10px','max-height':'none','height':'auto','margin-bottom':'10px'});$(dlg).find('.ui-dialog-title').css({'width':$(window).width()-80});$(dlg).find('.ui-dialog-content').css({'height':'auto','max-height':'none'});$(dlg).find('.object-container').css({'height':'auto'});$(dlg).find('.buttons-container').css({'position':'relative','top':'auto','left':'0px','right':'0px','bottom':'0px','width':'auto'});},responsiveDialog:function(){var self=this;$.ceEvent('on','ce.dialogshow',function(){if(self.winWidth()<=767){self.resizeDialog();$('body,html').scrollTop(0);}});},responsiveFilters:function(e){var filtersContent=$('.cm-horizontal-filters-content');if(this.winWidth()<=767){filtersContent.removeClass('cm-popup-box');}else{filtersContent.addClass('cm-popup-box');}
if(this.winWidth()>767){$('.ty-horizontal-filters-content-to-right').removeClass('ty-horizontal-filters-content-to-right');$('.ty-horizontal-product-filters-dropdown').click(function(){var hrFiltersWidth=$(".cm-horizontal-filters").width();var hrFiltersContent=$('.cm-horizontal-filters-content',this);setTimeout(function(){var position=hrFiltersContent.offset().left+hrFiltersContent.width();if(position>hrFiltersWidth){hrFiltersContent.addClass("ty-horizontal-filters-content-to-right");}},1);});}}};})();$(document).ready(function(){$(window).resize(function(e){ui.winWidth();ui.responsiveTables();ui.responsiveFilters();});if(window.addEventListener){window.addEventListener('orientationchange',function(){if(ui.winWidth()<=767){ui.resizeDialog();}
$.ceDialog('get_last').ceDialog('reload');},false);}
ui.responsiveDialog();ui.responsiveNotifications();ui.responsiveTables();ui.responsiveFilters();$.ceEvent('on','ce.ajaxdone',function(){ui.responsiveTables();ui.responsiveMenu();ui.responsiveFilters();if(ui.winWidth()<=767){ui.resizeDialog();}});ui.responsiveMenu();$(document).on('touchstart',function(e){var elm=$(e.target);if(elm.hasClass('cm-menu-item-responsive')||elm.closest('.cm-menu-item-responsive').length){ui.responsiveMenuLargeTouch(e);}else{$('.is-hover-menu').removeClass('is-hover-menu');}});});$.ceEvent('on','ce.tab.init',function(){$(window).resize(function(e){ui.responsiveTabs();});ui.responsiveTabs();ui.responsiveScroll();});}(Tygh,Tygh.$));(function(_,$){$(document).ready(function(){$(_.doc).on('click','.cm-news-subscribe',function(e){var elms=$(this).parents('.subscription-container').find('.cm-news-subscribe');var params='';if(elms.length>0){elms.each(function(){if($(this).prop('name').length>0){if($(this).prop('checked')){params+=$(this).prop('name')+'='+$(this).val()+'&';}}});}
if(!params){params='mailing_lists=';}
$.ceAjax('request',fn_url('checkout.subscribe_customer?'+params),{method:'post',result_ids:'subsciption*'});});});}(Tygh,Tygh.$));(function(_,$){$(document).on('click','button[type=submit][name^="dispatch[checkout.add"]',function(){$.ceEvent('one','ce.formajaxpost_'+$(this).parents('form').prop('name'),function(form,elm){if(_.yandex_metrika.settings.collect_stats_for_goals.basket=='Y'){if(typeof window['yaCounter'+_.yandex_metrika.settings.id]!="undefined"){window['yaCounter'+_.yandex_metrika.settings.id].reachGoal('basket',{});}}});});$(document).on('click','.cm-submit[id^="button_wishlist"]',function(){$.ceEvent('one','ce.formajaxpost_'+$(this).parents('form').prop('name'),function(form,elm){if(_.yandex_metrika.settings.collect_stats_for_goals.wishlist=='Y'){if(typeof window['yaCounter'+_.yandex_metrika.settings.id]!="undefined"){window['yaCounter'+_.yandex_metrika.settings.id].reachGoal('wishlist',{});}}});});$(document).on('click','a[id^=opener_call_request]',function(){if(_.yandex_metrika.settings.collect_stats_for_goals.buy_with_one_click_form_opened=='Y'){if(typeof window['yaCounter'+_.yandex_metrika.settings.id]!="undefined"){window['yaCounter'+_.yandex_metrika.settings.id].reachGoal('buy_with_one_click_form_opened',{});}}});$.ceEvent('on','ce.formajaxpost_call_requests_form_main',function(form,elm){if(_.yandex_metrika.settings.collect_stats_for_goals.call_request=='Y'){if(typeof window['yaCounter'+_.yandex_metrika.settings.id]!="undefined"){window['yaCounter'+_.yandex_metrika.settings.id].reachGoal('call_request',{});}}});$.ceEvent('on','ce.ajaxdone',function(elms,inline_scripts,params,data){if(data['yandex_metrika']){if(data['yandex_metrika']['added']){window.dataLayerYM.push({'ecommerce':{'add':{'products':data['yandex_metrika']['added']}}});}
if(data['yandex_metrika']['deleted']){window.dataLayerYM.push({'ecommerce':{'remove':{'products':data['yandex_metrika']['deleted']}}});}
if(data['yandex_metrika']['detail']){window.dataLayerYM.push({'ecommerce':{'detail':{'products':data['yandex_metrika']['detail']}}});}}});}(Tygh,jQuery));(function(d,w,c,_,$){(w[c]=w[c]||[]).push(function(){try{_.yandex_metrika.settings.params=w.yaParams||{};w['yaCounter'+_.yandex_metrika.settings.id]=new Ya.Metrika(_.yandex_metrika.settings);var goals_scheme=_.yandex_metrika.goals_scheme;$.each(_.yandex_metrika.settings.collect_stats_for_goals,function(goal_name,enabled){if(enabled=='Y'&&goals_scheme[goal_name].controller&&goals_scheme[goal_name].controller==_.yandex_metrika.current_controller&&goals_scheme[goal_name].mode==_.yandex_metrika.current_mode){w['yaCounter'+_.yandex_metrika.settings.id].reachGoal(goal_name,_.yandex_metrika.settings.params);}});}catch(e){};});var n=d.getElementsByTagName("script")[0],s=d.createElement("script"),f=function(){n.parentNode.insertBefore(s,n);};s.type="text/javascript";s.async=true;s.src=(d.location.protocol=="https:"?"https:":"http:")+"//mc.yandex.ru/metrika/watch.js";if(w.opera=="[object Opera]"){d.addEventListener("DOMContentLoaded",f);}else{f();}})(document,window,"yandex_metrika_callbacks",Tygh,Tygh.$);(function(e){function t(){var e=document.createElement("input"),t="onpaste";return e.setAttribute(t,""),"function"==typeof e[t]?"paste":"input"}var n,a=t()+".mask",r=navigator.userAgent,i=/iphone/i.test(r),o=/android/i.test(r);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var n;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&(n=this.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(t,r){var c,l,s,u,f,h;return!t&&this.length>0?(c=e(this[0]),c.data(e.mask.dataName)()):(r=e.extend({placeholder:e.mask.placeholder,completed:null},r),l=e.mask.definitions,s=[],u=h=t.length,f=null,e.each(t.split(""),function(e,t){"?"==t?(h--,u=e):l[t]?(s.push(RegExp(l[t])),null===f&&(f=s.length-1)):s.push(null)}),this.trigger("unmask").each(function(){function c(e){for(;h>++e&&!s[e];);return e}function d(e){for(;--e>=0&&!s[e];);return e}function m(e,t){var n,a;if(!(0>e)){for(n=e,a=c(t);h>n;n++)if(s[n]){if(!(h>a&&s[n].test(R[a])))break;R[n]=R[a],R[a]=r.placeholder,a=c(a)}b(),x.caret(Math.max(f,e))}}function p(e){var t,n,a,i;for(t=e,n=r.placeholder;h>t;t++)if(s[t]){if(a=c(t),i=R[t],R[t]=n,!(h>a&&s[a].test(i)))break;n=i}}function g(e){var t,n,a,r=e.which;8===r||46===r||i&&127===r?(t=x.caret(),n=t.begin,a=t.end,0===a-n&&(n=46!==r?d(n):a=c(n-1),a=46===r?c(a):a),k(n,a),m(n,a-1),e.preventDefault()):27==r&&(x.val(S),x.caret(0,y()),e.preventDefault())}function v(t){var n,a,i,l=t.which,u=x.caret();t.ctrlKey||t.altKey||t.metaKey||32>l||l&&(0!==u.end-u.begin&&(k(u.begin,u.end),m(u.begin,u.end-1)),n=c(u.begin-1),h>n&&(a=String.fromCharCode(l),s[n].test(a)&&(p(n),R[n]=a,b(),i=c(n),o?setTimeout(e.proxy(e.fn.caret,x,i),0):x.caret(i),r.completed&&i>=h&&r.completed.call(x))),t.preventDefault())}function k(e,t){var n;for(n=e;t>n&&h>n;n++)s[n]&&(R[n]=r.placeholder)}function b(){x.val(R.join(""))}function y(e){var t,n,a=x.val(),i=-1;for(t=0,pos=0;h>t;t++)if(s[t]){for(R[t]=r.placeholder;pos++<a.length;)if(n=a.charAt(pos-1),s[t].test(n)){R[t]=n,i=t;break}if(pos>a.length)break}else R[t]===a.charAt(pos)&&t!==u&&(pos++,i=t);return e?b():u>i+1?(x.val(""),k(0,h)):(b(),x.val(x.val().substring(0,i+1))),u?t:f}var x=e(this),R=e.map(t.split(""),function(e){return"?"!=e?l[e]?r.placeholder:e:void 0}),S=x.val();x.data(e.mask.dataName,function(){return e.map(R,function(e,t){return s[t]&&e!=r.placeholder?e:null}).join("")}),x.attr("readonly")||x.one("unmask",function(){x.unbind(".mask").removeData(e.mask.dataName)}).bind("focus.mask",function(){clearTimeout(n);var e;S=x.val(),e=y(),n=setTimeout(function(){b(),e==t.length?x.caret(0,e):x.caret(e)},10)}).bind("blur.mask",function(){y(),x.val()!=S&&x.change()}).bind("keydown.mask",g).bind("keypress.mask",v).bind(a,function(){setTimeout(function(){var e=y(!0);x.caret(e),r.completed&&e==x.val().length&&r.completed.call(x)},0)}),y()}))}})})(jQuery);!function(a){function b(a){var b=document.createElement("input"),c="on"+a,d=c in b;return d||(b.setAttribute(c,"return;"),d="function"==typeof b[c]),b=null,d}function c(a){var b="text"==a||"tel"==a;if(!b){var c=document.createElement("input");c.setAttribute("type",a),b="text"===c.type,c=null}return b}function d(b,c,e){var f=e.aliases[b];return f?(f.alias&&d(f.alias,void 0,e),a.extend(!0,e,f),a.extend(!0,e,c),!0):!1}function e(b){function c(c){function d(a,b,c,d){this.matches=[],this.isGroup=a||!1,this.isOptional=b||!1,this.isQuantifier=c||!1,this.isAlternator=d||!1,this.quantifier={min:1,max:1}}function e(c,d,e){var f=b.definitions[d],g=0==c.matches.length;if(e=void 0!=e?e:c.matches.length,f&&!m){f.placeholder=a.isFunction(f.placeholder)?f.placeholder.call(this,b):f.placeholder;for(var h=f.prevalidator,i=h?h.length:0,j=1;j<f.cardinality;j++){var k=i>=j?h[j-1]:[],l=k.validator,n=k.cardinality;c.matches.splice(e++,0,{fn:l?"string"==typeof l?new RegExp(l):new function(){this.test=l}:new RegExp("."),cardinality:n?n:1,optionality:c.isOptional,newBlockMarker:g,casing:f.casing,def:f.definitionSymbol||d,placeholder:f.placeholder,mask:d})}c.matches.splice(e++,0,{fn:f.validator?"string"==typeof f.validator?new RegExp(f.validator):new function(){this.test=f.validator}:new RegExp("."),cardinality:f.cardinality,optionality:c.isOptional,newBlockMarker:g,casing:f.casing,def:f.definitionSymbol||d,placeholder:f.placeholder,mask:d})}else c.matches.splice(e++,0,{fn:null,cardinality:0,optionality:c.isOptional,newBlockMarker:g,casing:null,def:d,placeholder:void 0,mask:d}),m=!1}for(var f,g,h,i,j,k,l=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})\??|[^.?*+^${[]()|\\]+|./g,m=!1,n=new d,o=[],p=[];f=l.exec(c);)switch(g=f[0],g.charAt(0)){case b.optionalmarker.end:case b.groupmarker.end:if(h=o.pop(),o.length>0){if(i=o[o.length-1],i.matches.push(h),i.isAlternator){j=o.pop();for(var q=0;q<j.matches.length;q++)j.matches[q].isGroup=!1;o.length>0?(i=o[o.length-1],i.matches.push(j)):n.matches.push(j)}}else n.matches.push(h);break;case b.optionalmarker.start:o.push(new d(!1,!0));break;case b.groupmarker.start:o.push(new d(!0));break;case b.quantifiermarker.start:var r=new d(!1,!1,!0);g=g.replace(/[{}]/g,"");var s=g.split(","),t=isNaN(s[0])?s[0]:parseInt(s[0]),u=1==s.length?t:isNaN(s[1])?s[1]:parseInt(s[1]);if(("*"==u||"+"==u)&&(t="*"==u?0:1),r.quantifier={min:t,max:u},o.length>0){var v=o[o.length-1].matches;if(f=v.pop(),!f.isGroup){var w=new d(!0);w.matches.push(f),f=w}v.push(f),v.push(r)}else{if(f=n.matches.pop(),!f.isGroup){var w=new d(!0);w.matches.push(f),f=w}n.matches.push(f),n.matches.push(r)}break;case b.escapeChar:m=!0;break;case b.alternatormarker:o.length>0?(i=o[o.length-1],k=i.matches.pop()):k=n.matches.pop(),k.isAlternator?o.push(k):(j=new d(!1,!1,!1,!0),j.matches.push(k),o.push(j));break;default:if(o.length>0){if(i=o[o.length-1],i.matches.length>0&&(k=i.matches[i.matches.length-1],k.isGroup&&(k.isGroup=!1,e(k,b.groupmarker.start,0),e(k,b.groupmarker.end))),e(i,g),i.isAlternator){j=o.pop();for(var q=0;q<j.matches.length;q++)j.matches[q].isGroup=!1;o.length>0?(i=o[o.length-1],i.matches.push(j)):n.matches.push(j)}}else n.matches.length>0&&(k=n.matches[n.matches.length-1],k.isGroup&&(k.isGroup=!1,e(k,b.groupmarker.start,0),e(k,b.groupmarker.end))),e(n,g)}return n.matches.length>0&&(k=n.matches[n.matches.length-1],k.isGroup&&(k.isGroup=!1,e(k,b.groupmarker.start,0),e(k,b.groupmarker.end)),p.push(n)),p}function d(d,e){if(void 0==d||""==d)return void 0;if(1==d.length&&0==b.greedy&&0!=b.repeat&&(b.placeholder=""),b.repeat>0||"*"==b.repeat||"+"==b.repeat){var f="*"==b.repeat?0:"+"==b.repeat?1:b.repeat;d=b.groupmarker.start+d+b.groupmarker.end+b.quantifiermarker.start+f+","+b.repeat+b.quantifiermarker.end}return void 0==a.inputmask.masksCache[d]&&(a.inputmask.masksCache[d]={mask:d,maskToken:c(d),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},metadata:e}),a.extend(!0,{},a.inputmask.masksCache[d])}function e(a){if(a=a.toString(),b.numericInput){a=a.split("").reverse();for(var c=0;c<a.length;c++)a[c]==b.optionalmarker.start?a[c]=b.optionalmarker.end:a[c]==b.optionalmarker.end?a[c]=b.optionalmarker.start:a[c]==b.groupmarker.start?a[c]=b.groupmarker.end:a[c]==b.groupmarker.end&&(a[c]=b.groupmarker.start);a=a.join("")}return a}var f=void 0;if(a.isFunction(b.mask)&&(b.mask=b.mask.call(this,b)),a.isArray(b.mask)){if(b.mask.length>1){b.keepStatic=void 0==b.keepStatic?!0:b.keepStatic;var g="(";return a.each(b.mask,function(b,c){g.length>1&&(g+=")|("),g+=e(void 0==c.mask||a.isFunction(c.mask)?c:c.mask)}),g+=")",d(g,b.mask)}b.mask=b.mask.pop()}return b.mask&&(f=void 0==b.mask.mask||a.isFunction(b.mask.mask)?d(e(b.mask),b.mask):d(e(b.mask.mask),b.mask)),f}function f(d,e,f){function g(a,b,c){b=b||0;var d,e,f,g=[],h=0;do{if(a===!0&&k().validPositions[h]){var i=k().validPositions[h];e=i.match,d=i.locator.slice(),g.push(c===!0?i.input:F(h,e))}else f=p(h,d,h-1),e=f.match,d=f.locator.slice(),g.push(F(h,e));h++}while((void 0==cb||cb>h-1)&&null!=e.fn||null==e.fn&&""!=e.def||b>=h);return g.pop(),g}function k(){return e}function l(a){var b=k();b.buffer=void 0,b.tests={},a!==!0&&(b._buffer=void 0,b.validPositions={},b.p=0)}function m(a){var b=k(),c=-1,d=b.validPositions;void 0==a&&(a=-1);var e=c,f=c;for(var g in d){var h=parseInt(g);(-1==a||null!=d[h].match.fn)&&(a>=h&&(e=h),h>=a&&(f=h))}return c=-1!=e&&a-e>1||a>f?e:f}function n(b,c,d){if(f.insertMode&&void 0!=k().validPositions[b]&&void 0==d){var e,g=a.extend(!0,{},k().validPositions),h=m();for(e=b;h>=e;e++)delete k().validPositions[e];k().validPositions[b]=c;var i,j=!0;for(e=b;h>=e;e++){var l=g[e];if(void 0!=l){var n=k().validPositions;i=!f.keepStatic&&n[e]&&(void 0!=n[e+1]&&s(e+1,n[e].locator.slice(),e).length>1||void 0!=n[e].alternation)?e+1:B(e),j=r(i,l.match.def)?j&&y(i,l.input,!0,!0)!==!1:null==l.match.fn}if(!j)break}if(!j)return k().validPositions=a.extend(!0,{},g),!1}else k().validPositions[b]=c;return!0}function o(a,b,c,d){var e,g=a;k().p=a,void 0!=k().validPositions[a]&&k().validPositions[a].input==f.radixPoint&&(b++,g++);for(e=g;b>e;e++)void 0!=k().validPositions[e]&&(c===!0||0!=f.canClearPosition(k(),e,m(),d,f))&&delete k().validPositions[e];for(l(!0),e=g+1;e<=m();){for(;void 0!=k().validPositions[g];)g++;var h=k().validPositions[g];g>e&&(e=g+1);var i=k().validPositions[e];void 0!=i&&void 0==h?(r(g,i.match.def)&&y(g,i.input,!0)!==!1&&(delete k().validPositions[e],e++),g++):e++}var j=m();j>=a&&void 0!=k().validPositions[j]&&k().validPositions[j].input==f.radixPoint&&delete k().validPositions[j],l(!0)}function p(a,b,c){for(var d,e=s(a,b,c),g=m(),h=k().validPositions[g]||s(0)[0],i=void 0!=h.alternation?h.locator[h.alternation].split(","):[],j=0;j<e.length&&(d=e[j],!(d.match&&(f.greedy&&d.match.optionalQuantifier!==!0||(d.match.optionality===!1||d.match.newBlockMarker===!1)&&d.match.optionalQuantifier!==!0)&&(void 0==h.alternation||void 0!=d.locator[h.alternation]&&x(d.locator[h.alternation].toString().split(","),i))));j++);return d}function q(a){return k().validPositions[a]?k().validPositions[a].match:s(a)[0].match}function r(a,b){for(var c=!1,d=s(a),e=0;e<d.length;e++)if(d[e].match&&d[e].match.def==b){c=!0;break}return c}function s(b,c,d){function e(c,d,f,h){function l(f,h,n){if(g>1e4)return alert("jquery.inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+k().mask),!0;if(g==b&&void 0==f.matches)return i.push({match:f,locator:h.reverse()}),!0;if(void 0!=f.matches){if(f.isGroup&&n!==!0){if(f=l(c.matches[m+1],h))return!0}else if(f.isOptional){var o=f;if(f=e(f,d,h,n)){var p=i[i.length-1].match,q=0==a.inArray(p,o.matches);q&&(j=!0),g=b}}else if(f.isAlternator){var r,s=f,t=[],u=i.slice(),v=h.length,w=d.length>0?d.shift():-1;if(-1==w||"string"==typeof w){var x,y=g,z=d.slice();"string"==typeof w&&(x=w.split(","));for(var A=0;A<s.matches.length;A++){i=[],f=l(s.matches[A],[A].concat(h),n)||f,r=i.slice(),g=y,i=[];for(var B=0;B<z.length;B++)d[B]=z[B];for(var C=0;C<r.length;C++)for(var D=r[C],E=0;E<t.length;E++){var F=t[E];if(D.match.mask==F.match.mask&&("string"!=typeof w||-1!=a.inArray(D.locator[v].toString(),x))){r.splice(C,1),F.locator[v]=F.locator[v]+","+D.locator[v],F.alternation=v;break}}t=t.concat(r)}"string"==typeof w&&(t=a.map(t,function(b,c){if(isFinite(c)){var d,e=b.locator[v].toString().split(",");b.locator[v]=void 0,b.alternation=void 0;for(var f=0;f<e.length;f++)d=-1!=a.inArray(e[f],x),d&&(void 0!=b.locator[v]?(b.locator[v]+=",",b.alternation=v,b.locator[v]+=e[f]):b.locator[v]=parseInt(e[f]));if(void 0!=b.locator[v])return b}})),i=u.concat(t),j=!0}else f=l(s.matches[w],[w].concat(h),n);if(f)return!0}else if(f.isQuantifier&&n!==!0)for(var G=f,H=d.length>0&&n!==!0?d.shift():0;H<(isNaN(G.quantifier.max)?H+1:G.quantifier.max)&&b>=g;H++){var I=c.matches[a.inArray(G,c.matches)-1];if(f=l(I,[H].concat(h),!0)){var p=i[i.length-1].match;p.optionalQuantifier=H>G.quantifier.min-1;var q=0==a.inArray(p,I.matches);if(q){if(H>G.quantifier.min-1){j=!0,g=b;break}return!0}return!0}}else if(f=e(f,d,h,n))return!0}else g++}for(var m=d.length>0?d.shift():0;m<c.matches.length;m++)if(c.matches[m].isQuantifier!==!0){var n=l(c.matches[m],[m].concat(f),h);if(n&&g==b)return n;if(g>b)break}}var f=k().maskToken,g=c?d:0,h=c||[0],i=[],j=!1;if(void 0==c){for(var l,m=b-1;void 0==(l=k().validPositions[m])&&m>-1;)m--;if(void 0!=l&&m>-1)g=m,h=l.locator.slice();else{for(m=b-1;void 0==(l=k().tests[m])&&m>-1;)m--;void 0!=l&&m>-1&&(g=m,h=l[0].locator.slice())}}for(var n=h.shift();n<f.length;n++){var o=e(f[n],h,[n]);if(o&&g==b||g>b)break}return(0==i.length||j)&&i.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:""},locator:[]}),k().tests[b]=a.extend(!0,[],i),k().tests[b]}function t(){return void 0==k()._buffer&&(k()._buffer=g(!1,1)),k()._buffer}function u(){return void 0==k().buffer&&(k().buffer=g(!0,m(),!0)),k().buffer}function v(a,b,c){if(c=c||u().slice(),a===!0)l(),a=0,b=c.length;else for(var d=a;b>d;d++)delete k().validPositions[d],delete k().tests[d];for(var d=a;b>d;d++)c[d]!=f.skipOptionalPartCharacter&&y(d,c[d],!0,!0)}function w(a,b){switch(b.casing){case"upper":a=a.toUpperCase();break;case"lower":a=a.toLowerCase()}return a}function x(b,c){for(var d=f.greedy?c:c.slice(0,1),e=!1,g=0;g<b.length;g++)if(-1!=a.inArray(b[g],d)){e=!0;break}return e}function y(b,c,d,e){function g(b,c,d,e){var g=!1;return a.each(s(b),function(h,i){for(var j=i.match,p=c?1:0,q="",r=(u(),j.cardinality);r>p;r--)q+=D(b-(r-1));if(c&&(q+=c),g=null!=j.fn?j.fn.test(q,k(),b,d,f):c!=j.def&&c!=f.skipOptionalPartCharacter||""==j.def?!1:{c:j.def,pos:b},g!==!1){var s=void 0!=g.c?g.c:c;s=s==f.skipOptionalPartCharacter&&null===j.fn?j.def:s;var t=b;if(void 0!=g.remove&&o(g.remove,g.remove+1,!0),g.refreshFromBuffer){var x=g.refreshFromBuffer;if(d=!0,v(x===!0?x:x.start,x.end),void 0==g.pos&&void 0==g.c)return g.pos=m(),!1;if(t=void 0!=g.pos?g.pos:b,t!=b)return g=a.extend(g,y(t,s,!0)),!1}else if(g!==!0&&void 0!=g.pos&&g.pos!=b&&(t=g.pos,v(b,t),t!=b))return g=a.extend(g,y(t,s,!0)),!1;return 1!=g&&void 0==g.pos&&void 0==g.c?!1:(h>0&&l(!0),n(t,a.extend({},i,{input:w(s,j)}),e)||(g=!1),!1)}}),g}function h(b,c,d,e){var g,h,i=a.extend(!0,{},k().validPositions);for(g=m();g>=0;g--)if(k().validPositions[g]&&void 0!=k().validPositions[g].alternation){h=k().validPositions[g].alternation;break}if(void 0!=h)for(var j in k().validPositions)if(parseInt(j)>parseInt(g)&&void 0===k().validPositions[j].alternation){for(var n=k().validPositions[j],o=n.locator[h],p=k().validPositions[g].locator[h].split(","),q=0;q<p.length;q++)if(o<p[q]){for(var r,s,t=j-1;t>=0;t--)if(r=k().validPositions[t],void 0!=r){s=r.locator[h],r.locator[h]=p[q];break}if(o!=r.locator[h]){for(var v=u().slice(),w=j;w<m()+1;w++)delete k().validPositions[w],delete k().tests[w];l(!0),f.keepStatic=!f.keepStatic;for(var w=j;w<v.length;w++)v[w]!=f.skipOptionalPartCharacter&&y(m()+1,v[w],!1,!0);r.locator[h]=s;var x=y(b,c,d,e);if(f.keepStatic=!f.keepStatic,x)return x;l(),k().validPositions=a.extend(!0,{},i)}}break}return!1}function i(b,c){for(var d=k().validPositions[c],e=d.locator,f=e.length,g=b;c>g;g++)if(!z(g)){var h=s(g),i=h[0],j=-1;a.each(h,function(a,b){for(var c=0;f>c;c++)b.locator[c]&&x(b.locator[c].toString().split(","),e[c].toString().split(","))&&c>j&&(j=c,i=b)}),n(g,a.extend({},i,{input:i.match.def}),!0)}}d=d===!0;for(var j=u(),p=b-1;p>-1&&!k().validPositions[p];p--);for(p++;b>p;p++)void 0==k().validPositions[p]&&((!z(p)||j[p]!=F(p))&&s(p).length>1||j[p]==f.radixPoint||"0"==j[p]&&a.inArray(f.radixPoint,j)<p)&&g(p,j[p],!0);var q=b,r=!1,t=a.extend(!0,{},k().validPositions);if(q<A()&&(r=g(q,c,d,e),!d&&r===!1)){var C=k().validPositions[q];if(!C||null!=C.match.fn||C.match.def!=c&&c!=f.skipOptionalPartCharacter){if((f.insertMode||void 0==k().validPositions[B(q)])&&!z(q))for(var E=q+1,G=B(q);G>=E;E++)if(r=g(E,c,d,e),r!==!1){i(q,E),q=E;break}}else r={caret:B(q)}}if(r===!1&&f.keepStatic&&N(j)&&(r=h(b,c,d,e)),r===!0&&(r={pos:q}),a.isFunction(f.postValidation)&&0!=r&&!d){l(!0);var H=f.postValidation(u(),f);if(!H)return l(!0),k().validPositions=a.extend(!0,{},t),!1}return r}function z(a){var b=q(a);return null!=b.fn?b.fn:!1}function A(){var a;cb=bb.prop("maxLength"),-1==cb&&(cb=void 0);var b,c=m(),d=k().validPositions[c],e=void 0!=d?d.locator.slice():void 0;for(b=c+1;void 0==d||null!=d.match.fn||null==d.match.fn&&""!=d.match.def;b++)d=p(b,e,b-1),e=d.locator.slice();return a=b,void 0==cb||cb>a?a:cb}function B(a){var b=A();if(a>=b)return b;for(var c=a;++c<b&&!z(c)&&(f.nojumps!==!0||f.nojumpsThreshold>c););return c}function C(a){var b=a;if(0>=b)return 0;for(;--b>0&&!z(b););return b}function D(a){return void 0==k().validPositions[a]?F(a):k().validPositions[a].input}function E(b,c,d,e,g){if(e&&a.isFunction(f.onBeforeWrite)){var h=f.onBeforeWrite.call(b,e,c,d,f);if(h){if(h.refreshFromBuffer){var i=h.refreshFromBuffer;v(i===!0?i:i.start,i.end,h.buffer),l(!0),c=u()}d=h.caret||d}}b._valueSet(c.join("")),void 0!=d&&K(b,d),g===!0&&(fb=!0,a(b).trigger("input"))}function F(a,b){return b=b||q(a),void 0!=b.placeholder?b.placeholder:null==b.fn?b.def:f.placeholder.charAt(a%f.placeholder.length)}function G(b,c,d,e){function f(){var a=!1,b=t().slice(i,B(i)).join("").indexOf(h);if(-1!=b&&!z(i)){a=!0;for(var c=t().slice(i,i+b),d=0;d<c.length;d++)if(" "!=c[d]){a=!1;break}}return a}var g=void 0!=e?e.slice():b._valueGet().split(""),h="",i=0;l(),k().p=B(-1),c&&b._valueSet("");var j=t().slice(0,B(-1)).join(""),n=g.join("").match(new RegExp(H(j),"g"));n&&n.length>0&&(g.splice(0,n.length*j.length),i=B(i)),a.each(g,function(c,e){var g=a.Event("keypress");g.which=e.charCodeAt(0),h+=e;var j=m(),l=k().validPositions[j],n=p(j+1,l?l.locator.slice():void 0,j);if(!f()||d){var o=d?c:null==n.match.fn&&n.match.optionality&&j+1<k().p?j+1:k().p;T.call(b,g,!0,!1,d,o),i=o+1,h=""}else T.call(b,g,!0,!1,!0,j+1)}),c&&E(b,u(),a(b).is(":focus")?B(m(0)):void 0,a.Event("checkval"))}function H(b){return a.inputmask.escapeRegex.call(this,b)}function I(b){if(b.data("_inputmask")&&!b.hasClass("hasDatepicker")){var c=[],d=k().validPositions;for(var e in d)d[e].match&&null!=d[e].match.fn&&c.push(d[e].input);var g=(db?c.reverse():c).join(""),h=(db?u().slice().reverse():u()).join("");return a.isFunction(f.onUnMask)&&(g=f.onUnMask.call(b,h,g,f)||g),g}return b[0]._valueGet()}function J(a){if(db&&"number"==typeof a&&(!f.greedy||""!=f.placeholder)){var b=u().length;a=b-a}return a}function K(b,c,d){var e,g=b.jquery&&b.length>0?b[0]:b;if("number"!=typeof c)return g.setSelectionRange?(c=g.selectionStart,d=g.selectionEnd):document.selection&&document.selection.createRange&&(e=document.selection.createRange(),c=0-e.duplicate().moveStart("character",-1e5),d=c+e.text.length),{begin:J(c),end:J(d)};if(c=J(c),d=J(d),d="number"==typeof d?d:c,a(g).is(":visible")){var h=a(g).css("font-size").replace("px","")*d;g.scrollLeft=h>g.scrollWidth?h:0,0==f.insertMode&&c==d&&d++,g.setSelectionRange?(g.selectionStart=c,g.selectionEnd=d):g.createTextRange&&(e=g.createTextRange(),e.collapse(!0),e.moveEnd("character",d),e.moveStart("character",c),e.select())}}function L(b){var c,d,e=u(),f=e.length,g=m(),h={},i=k().validPositions[g],j=void 0!=i?i.locator.slice():void 0;for(c=g+1;c<e.length;c++)d=p(c,j,c-1),j=d.locator.slice(),h[c]=a.extend(!0,{},d);var l=i&&void 0!=i.alternation?i.locator[i.alternation].split(","):[];for(c=f-1;c>g&&(d=h[c].match,(d.optionality||d.optionalQuantifier||i&&void 0!=i.alternation&&void 0!=h[c].locator[i.alternation]&&-1!=a.inArray(h[c].locator[i.alternation].toString(),l))&&e[c]==F(c,d));c--)f--;return b?{l:f,def:h[f]?h[f].match:void 0}:f}function M(a){for(var b=L(),c=a.length-1;c>b&&!z(c);c--);a.splice(b,c+1-b)}function N(b){if(a.isFunction(f.isComplete))return f.isComplete.call(bb,b,f);if("*"==f.repeat)return void 0;{var c=!1,d=L(!0),e=C(d.l);m()}if(void 0==d.def||d.def.newBlockMarker||d.def.optionalQuantifier){c=!0;for(var g=0;e>=g;g++){var h=z(g),i=q(g);if(h&&void 0==k().validPositions[g]&&i.optionality!==!0&&i.optionalQuantifier!==!0||!h&&b[g]!=F(g)){c=!1;break}}}return c}function O(a,b){return db?a-b>1||a-b==1&&f.insertMode:b-a>1||b-a==1&&f.insertMode}function P(b){var c=a._data(b).events;a.each(c,function(b,c){a.each(c,function(a,b){if("inputmask"==b.namespace&&"setvalue"!=b.type){var c=b.handler;b.handler=function(a){if(!this.disabled&&(!this.readOnly||"keydown"==a.type&&a.ctrlKey&&67==a.keyCode)){switch(a.type){case"input":if(fb===!0)return fb=!1,a.preventDefault();break;case"keydown":eb=!1;break;case"keypress":if(eb===!0)return a.preventDefault();eb=!0;break;case"compositionstart":break;case"compositionupdate":fb=!0;break;case"compositionend":}return c.apply(this,arguments)}a.preventDefault()}}})})}function Q(b){function c(b){if(void 0==a.valHooks[b]||1!=a.valHooks[b].inputmaskpatch){var c=a.valHooks[b]&&a.valHooks[b].get?a.valHooks[b].get:function(a){return a.value},d=a.valHooks[b]&&a.valHooks[b].set?a.valHooks[b].set:function(a,b){return a.value=b,a};a.valHooks[b]={get:function(b){var d=a(b);if(d.data("_inputmask")){if(d.data("_inputmask").opts.autoUnmask)return d.inputmask("unmaskedvalue");var e=c(b),f=d.data("_inputmask"),g=f.maskset,h=g._buffer;return h=h?h.join(""):"",e!=h?e:""}return c(b)},set:function(b,c){var e,f=a(b),g=f.data("_inputmask");return g?(e=d(b,a.isFunction(g.opts.onBeforeMask)?g.opts.onBeforeMask.call(mb,c,g.opts)||c:c),f.triggerHandler("setvalue.inputmask")):e=d(b,c),e},inputmaskpatch:!0}}}function d(){var b=a(this),c=a(this).data("_inputmask");return c?c.opts.autoUnmask?b.inputmask("unmaskedvalue"):h.call(this)!=t().join("")?h.call(this):"":h.call(this)}function e(b){var c=a(this).data("_inputmask");c?(i.call(this,a.isFunction(c.opts.onBeforeMask)?c.opts.onBeforeMask.call(mb,b,c.opts)||b:b),a(this).triggerHandler("setvalue.inputmask")):i.call(this,b)}function g(b){a(b).bind("mouseenter.inputmask",function(){var b=a(this),c=this,d=c._valueGet();""!=d&&d!=u().join("")&&(this._valueSet(a.isFunction(f.onBeforeMask)?f.onBeforeMask.call(mb,d,f)||d:d),b.triggerHandler("setvalue.inputmask"))});var c=a._data(b).events,d=c.mouseover;if(d){for(var e=d[d.length-1],g=d.length-1;g>0;g--)d[g]=d[g-1];d[0]=e}}var h,i;if(!b._valueGet){if(Object.getOwnPropertyDescriptor){Object.getOwnPropertyDescriptor(b,"value")}document.__lookupGetter__&&b.__lookupGetter__("value")?(h=b.__lookupGetter__("value"),i=b.__lookupSetter__("value"),b.__defineGetter__("value",d),b.__defineSetter__("value",e)):(h=function(){return b.value},i=function(a){b.value=a},c(b.type),g(b)),b._valueGet=function(a){return db&&a!==!0?h.call(this).split("").reverse().join(""):h.call(this)},b._valueSet=function(a){i.call(this,db?a.split("").reverse().join(""):a)}}}function R(b,c,d,e){function g(){if(f.keepStatic){l(!0);var c,d=[];for(c=m();c>=0;c--)if(k().validPositions[c]){if(void 0!=k().validPositions[c].alternation)break;d.push(k().validPositions[c].input),delete k().validPositions[c]}if(c>0)for(;d.length>0;){k().p=B(m());var e=a.Event("keypress");e.which=d.pop().charCodeAt(0),T.call(b,e,!0,!1,!1,k().p)}}}if((f.numericInput||db)&&(c==a.inputmask.keyCode.BACKSPACE?c=a.inputmask.keyCode.DELETE:c==a.inputmask.keyCode.DELETE&&(c=a.inputmask.keyCode.BACKSPACE),db)){var h=d.end;d.end=d.begin,d.begin=h}if(c==a.inputmask.keyCode.BACKSPACE&&(d.end-d.begin<1||0==f.insertMode)?d.begin=C(d.begin):c==a.inputmask.keyCode.DELETE&&d.begin==d.end&&(d.end=z(d.end)?d.end+1:B(d.end)+1),o(d.begin,d.end,!1,e),e!==!0){g();var i=m(d.begin);i<d.begin?(-1==i&&l(),k().p=B(i)):k().p=d.begin}}function S(c){var d=this,e=a(d),g=c.keyCode,i=K(d);g==a.inputmask.keyCode.BACKSPACE||g==a.inputmask.keyCode.DELETE||h&&127==g||c.ctrlKey&&88==g&&!b("cut")?(c.preventDefault(),88==g&&($=u().join("")),R(d,g,i),E(d,u(),k().p,c,$!=u().join("")),d._valueGet()==t().join("")?e.trigger("cleared"):N(u())===!0&&e.trigger("complete"),f.showTooltip&&e.prop("title",k().mask)):g==a.inputmask.keyCode.END||g==a.inputmask.keyCode.PAGE_DOWN?setTimeout(function(){var a=B(m());f.insertMode||a!=A()||c.shiftKey||a--,K(d,c.shiftKey?i.begin:a,a)},0):g==a.inputmask.keyCode.HOME&&!c.shiftKey||g==a.inputmask.keyCode.PAGE_UP?K(d,0,c.shiftKey?i.begin:0):(f.undoOnEscape&&g==a.inputmask.keyCode.ESCAPE||90==g&&c.ctrlKey)&&c.altKey!==!0?(G(d,!0,!1,$.split("")),e.click()):g!=a.inputmask.keyCode.INSERT||c.shiftKey||c.ctrlKey?0!=f.insertMode||c.shiftKey||(g==a.inputmask.keyCode.RIGHT?setTimeout(function(){var a=K(d);K(d,a.begin)},0):g==a.inputmask.keyCode.LEFT&&setTimeout(function(){var a=K(d);K(d,db?a.begin+1:a.begin-1)},0)):(f.insertMode=!f.insertMode,K(d,f.insertMode||i.begin!=A()?i.begin:i.begin-1)),f.onKeyDown.call(this,c,u(),K(d).begin,f),gb=-1!=a.inArray(g,f.ignorables)}function T(b,c,d,e,g){var h=this,i=a(h),j=b.which||b.charCode||b.keyCode;if(!(c===!0||b.ctrlKey&&b.altKey)&&(b.ctrlKey||b.metaKey||gb))return!0;if(j){46==j&&0==b.shiftKey&&","==f.radixPoint&&(j=44);var m,o=c?{begin:g,end:g}:K(h),p=String.fromCharCode(j),q=O(o.begin,o.end);q&&(k().undoPositions=a.extend(!0,{},k().validPositions),R(h,a.inputmask.keyCode.DELETE,o,!0),o.begin=k().p,f.insertMode||(f.insertMode=!f.insertMode,n(o.begin,e),f.insertMode=!f.insertMode),q=!f.multi),k().writeOutBuffer=!0;var r=db&&!q?o.end:o.begin,t=y(r,p,e);if(t!==!1){if(t!==!0&&(r=void 0!=t.pos?t.pos:r,p=void 0!=t.c?t.c:p),l(!0),void 0!=t.caret)m=t.caret;else{var w=k().validPositions;m=!f.keepStatic&&(void 0!=w[r+1]&&s(r+1,w[r].locator.slice(),r).length>1||void 0!=w[r].alternation)?r+1:B(r)}k().p=m}if(d!==!1){var x=this;if(setTimeout(function(){f.onKeyValidation.call(x,t,f)},0),k().writeOutBuffer&&t!==!1){var z=u();E(h,z,c?void 0:f.numericInput?C(m):m,b,c!==!0),c!==!0&&setTimeout(function(){N(z)===!0&&i.trigger("complete")},0)}else q&&(k().buffer=void 0,k().validPositions=k().undoPositions)}else q&&(k().buffer=void 0,k().validPositions=k().undoPositions);if(f.showTooltip&&i.prop("title",k().mask),c&&a.isFunction(f.onBeforeWrite)){var A=f.onBeforeWrite.call(this,b,u(),m,f);if(A&&A.refreshFromBuffer){var D=A.refreshFromBuffer;v(D===!0?D:D.start,D.end,A.buffer),l(!0),A.caret&&(k().p=A.caret)}}b.preventDefault()}}function U(b){var c=this,d=a(c),e=c._valueGet(!0),g=K(c);if("propertychange"==b.type&&c._valueGet().length<=A())return!0;if("paste"==b.type){var h=e.substr(0,g.begin),i=e.substr(g.end,e.length);h==t().slice(0,g.begin).join("")&&(h=""),i==t().slice(g.end).join("")&&(i=""),window.clipboardData&&window.clipboardData.getData?e=h+window.clipboardData.getData("Text")+i:b.originalEvent&&b.originalEvent.clipboardData&&b.originalEvent.clipboardData.getData&&(e=h+b.originalEvent.clipboardData.getData("text/plain")+i)}var j=e;if(a.isFunction(f.onBeforePaste)){if(j=f.onBeforePaste.call(c,e,f),j===!1)return b.preventDefault(),!1;j||(j=e)}return G(c,!0,!1,db?j.split("").reverse():j.split("")),d.click(),N(u())===!0&&d.trigger("complete"),!1}function V(b){var c=this;G(c,!0,!1),N(u())===!0&&a(c).trigger("complete"),b.preventDefault()}function W(a){var b=this;$=u().join(""),(""==ab||0!=a.originalEvent.data.indexOf(ab))&&(_=K(b))}function X(b){var c=this,d=_||K(c);0==b.originalEvent.data.indexOf(ab)&&(l(),d={begin:0,end:0});var e=b.originalEvent.data;K(c,d.begin,d.end);for(var g=0;g<e.length;g++){var h=a.Event("keypress");h.which=e.charCodeAt(g),eb=!1,gb=!1,T.call(c,h)}setTimeout(function(){var a=k().p;E(c,u(),f.numericInput?C(a):a)},0),ab=b.originalEvent.data}function Y(){}function Z(b){if(bb=a(b),bb.is(":input")&&c(bb.attr("type"))){if(bb.data("_inputmask",{maskset:e,opts:f,isRTL:!1}),f.showTooltip&&bb.prop("title",k().mask),("rtl"==b.dir||f.rightAlign)&&bb.css("text-align","right"),"rtl"==b.dir||f.numericInput){b.dir="ltr",bb.removeAttr("dir");var d=bb.data("_inputmask");d.isRTL=!0,bb.data("_inputmask",d),db=!0}bb.unbind(".inputmask"),bb.closest("form").bind("submit",function(){$!=u().join("")&&bb.change(),bb[0]._valueGet&&bb[0]._valueGet()==t().join("")&&bb[0]._valueSet(""),f.removeMaskOnSubmit&&bb.inputmask("remove")}).bind("reset",function(){setTimeout(function(){bb.triggerHandler("setvalue.inputmask")},0)}),bb.bind("mouseenter.inputmask",function(){var b=a(this),c=this;!b.is(":focus")&&f.showMaskOnHover&&c._valueGet()!=u().join("")&&E(c,u())}).bind("blur.inputmask",function(b){var c=a(this),d=this;if(c.data("_inputmask")){var e=d._valueGet(),g=u().slice();hb=!0,$!=g.join("")&&setTimeout(function(){c.change(),$=g.join("")},0),""!=e&&(f.clearMaskOnLostFocus&&(e==t().join("")?g=[]:M(g)),N(g)===!1&&(c.trigger("incomplete"),f.clearIncomplete&&(l(),g=f.clearMaskOnLostFocus?[]:t().slice())),E(d,g,void 0,b))}}).bind("focus.inputmask",function(){var b=(a(this),this),c=b._valueGet();f.showMaskOnFocus&&(!f.showMaskOnHover||f.showMaskOnHover&&""==c)&&b._valueGet()!=u().join("")&&E(b,u(),B(m())),$=u().join("")}).bind("mouseleave.inputmask",function(){var b=a(this),c=this;if(f.clearMaskOnLostFocus){var d=u().slice(),e=c._valueGet();b.is(":focus")||e==b.attr("placeholder")||""==e||(e==t().join("")?d=[]:M(d),E(c,d))}}).bind("click.inputmask",function(){var b=a(this),c=this;if(b.is(":focus")){var d=K(c);if(d.begin==d.end)if(f.radixFocus&&""!=f.radixPoint&&-1!=a.inArray(f.radixPoint,u())&&(hb||u().join("")==t().join("")))K(c,a.inArray(f.radixPoint,u())),hb=!1;else{var e=db?J(d.begin):d.begin,g=B(m(e));g>e?K(c,z(e)?e:B(e)):K(c,g)}}}).bind("dblclick.inputmask",function(){var a=this;setTimeout(function(){K(a,0,B(m()))},0)}).bind(j+".inputmask dragdrop.inputmask drop.inputmask",U).bind("setvalue.inputmask",function(){var a=this;G(a,!0,!1),$=u().join(""),(f.clearMaskOnLostFocus||f.clearIncomplete)&&a._valueGet()==t().join("")&&a._valueSet("")}).bind("cut.inputmask",function(b){fb=!0;var c=this,d=a(c),e=K(c);R(c,a.inputmask.keyCode.DELETE,e),E(c,u(),k().p,b,$!=u().join("")),c._valueGet()==t().join("")&&d.trigger("cleared"),f.showTooltip&&d.prop("title",k().mask)}).bind("complete.inputmask",f.oncomplete).bind("incomplete.inputmask",f.onincomplete).bind("cleared.inputmask",f.oncleared),bb.bind("keydown.inputmask",S).bind("keypress.inputmask",T),i||bb.bind("compositionstart.inputmask",W).bind("compositionupdate.inputmask",X).bind("compositionend.inputmask",Y),"paste"===j&&bb.bind("input.inputmask",V),Q(b);var g=a.isFunction(f.onBeforeMask)?f.onBeforeMask.call(b,b._valueGet(),f)||b._valueGet():b._valueGet();G(b,!0,!1,g.split(""));var h=u().slice();$=h.join("");var n;try{n=document.activeElement}catch(o){}N(h)===!1&&f.clearIncomplete&&l(),f.clearMaskOnLostFocus&&(h.join("")==t().join("")?h=[]:M(h)),E(b,h),n===b&&K(b,B(m())),P(b)}}var $,_,ab,bb,cb,db=!1,eb=!1,fb=!1,gb=!1,hb=!0;if(void 0!=d)switch(d.action){case"isComplete":return bb=a(d.el),e=bb.data("_inputmask").maskset,f=bb.data("_inputmask").opts,N(d.buffer);case"unmaskedvalue":return bb=d.$input,e=bb.data("_inputmask").maskset,f=bb.data("_inputmask").opts,db=d.$input.data("_inputmask").isRTL,I(d.$input);case"mask":$=u().join(""),Z(d.el);break;case"format":bb=a({}),bb.data("_inputmask",{maskset:e,opts:f,isRTL:f.numericInput}),f.numericInput&&(db=!0);var ib=(a.isFunction(f.onBeforeMask)?f.onBeforeMask.call(bb,d.value,f)||d.value:d.value).split("");return G(bb,!1,!1,db?ib.reverse():ib),a.isFunction(f.onBeforeWrite)&&f.onBeforeWrite.call(this,void 0,u(),0,f),d.metadata?{value:db?u().slice().reverse().join(""):u().join(""),metadata:bb.inputmask("getmetadata")}:db?u().slice().reverse().join(""):u().join("");case"isValid":bb=a({}),bb.data("_inputmask",{maskset:e,opts:f,isRTL:f.numericInput}),f.numericInput&&(db=!0);var ib=d.value.split("");G(bb,!1,!0,db?ib.reverse():ib);for(var jb=u(),kb=L(),lb=jb.length-1;lb>kb&&!z(lb);lb--);return jb.splice(kb,lb+1-kb),N(jb)&&d.value==jb.join("");case"getemptymask":return bb=a(d.el),e=bb.data("_inputmask").maskset,f=bb.data("_inputmask").opts,t();case"remove":var mb=d.el;bb=a(mb),e=bb.data("_inputmask").maskset,f=bb.data("_inputmask").opts,mb._valueSet(I(bb)),bb.unbind(".inputmask"),bb.removeData("_inputmask");var nb;Object.getOwnPropertyDescriptor&&(nb=Object.getOwnPropertyDescriptor(mb,"value")),nb&&nb.get?mb._valueGet&&Object.defineProperty(mb,"value",{get:mb._valueGet,set:mb._valueSet}):document.__lookupGetter__&&mb.__lookupGetter__("value")&&mb._valueGet&&(mb.__defineGetter__("value",mb._valueGet),mb.__defineSetter__("value",mb._valueSet));try{delete mb._valueGet,delete mb._valueSet}catch(ob){mb._valueGet=void 0,mb._valueSet=void 0}break;case"getmetadata":if(bb=a(d.el),e=bb.data("_inputmask").maskset,f=bb.data("_inputmask").opts,a.isArray(e.metadata)){for(var pb,qb=m(),rb=qb;rb>=0;rb--)if(k().validPositions[rb]&&void 0!=k().validPositions[rb].alternation){pb=k().validPositions[rb].alternation;break}return void 0!=pb?e.metadata[k().validPositions[qb].locator[pb]]:e.metadata[0]}return e.metadata}}if(void 0===a.fn.inputmask){var g=navigator.userAgent,h=null!==g.match(new RegExp("iphone","i")),i=(null!==g.match(new RegExp("android.*safari.*","i")),null!==g.match(new RegExp("android.*chrome.*","i")),null!==g.match(new RegExp("android.*firefox.*","i"))),j=(/Kindle/i.test(g)||/Silk/i.test(g)||/KFTT/i.test(g)||/KFOT/i.test(g)||/KFJWA/i.test(g)||/KFJWI/i.test(g)||/KFSOWI/i.test(g)||/KFTHWA/i.test(g)||/KFTHWI/i.test(g)||/KFAPWA/i.test(g)||/KFAPWI/i.test(g),b("paste")?"paste":b("input")?"input":"propertychange");a.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,oncomplete:a.noop,onincomplete:a.noop,oncleared:a.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},alias:null,onKeyDown:a.noop,onBeforeMask:void 0,onBeforePaste:void 0,onBeforeWrite:void 0,onUnMask:void 0,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:a.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",radixFocus:!1,nojumps:!1,nojumpsThreshold:0,keepStatic:void 0,definitions:{9:{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",cardinality:1}},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:void 0,canClearPosition:a.noop,postValidation:void 0},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},masksCache:{},escapeRegex:function(a){var b=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];return a.replace(new RegExp("(\\"+b.join("|\\")+")","gim"),"\\$1")},format:function(b,c,g){var h=a.extend(!0,{},a.inputmask.defaults,c);return d(h.alias,c,h),f({action:"format",value:b,metadata:g},e(h),h)},isValid:function(b,c){var g=a.extend(!0,{},a.inputmask.defaults,c);return d(g.alias,c,g),f({action:"isValid",value:b},e(g),g)}},a.fn.inputmask=function(b,c){function g(b,c,e){var f=a(b);f.data("inputmask-alias")&&d(f.data("inputmask-alias"),{},c);for(var g in c){var h=f.data("inputmask-"+g.toLowerCase());void 0!=h&&("mask"==g&&0==h.indexOf("[")?(c[g]=h.replace(/[\s[\]]/g,"").split("','"),c[g][0]=c[g][0].replace("'",""),c[g][c[g].length-1]=c[g][c[g].length-1].replace("'","")):c[g]="boolean"==typeof h?h:h.toString(),e&&(e[g]=c[g]))}return c}var h,i=a.extend(!0,{},a.inputmask.defaults,c);if("string"==typeof b)switch(b){case"mask":return d(i.alias,c,i),h=e(i),void 0==h?this:this.each(function(){f({action:"mask",el:this},a.extend(!0,{},h),g(this,i))});case"unmaskedvalue":var j=a(this);return j.data("_inputmask")?f({action:"unmaskedvalue",$input:j}):j.val();case"remove":return this.each(function(){var b=a(this);b.data("_inputmask")&&f({action:"remove",el:this})});case"getemptymask":return this.data("_inputmask")?f({action:"getemptymask",el:this}):"";case"hasMaskedValue":return this.data("_inputmask")?!this.data("_inputmask").opts.autoUnmask:!1;case"isComplete":return this.data("_inputmask")?f({action:"isComplete",buffer:this[0]._valueGet().split(""),el:this}):!0;case"getmetadata":return this.data("_inputmask")?f({action:"getmetadata",el:this}):void 0;default:return d(i.alias,c,i),d(b,c,i)||(i.mask=b),h=e(i),void 0==h?this:this.each(function(){f({action:"mask",el:this},a.extend(!0,{},h),g(this,i))})}else{if("object"==typeof b)return i=a.extend(!0,{},a.inputmask.defaults,b),d(i.alias,b,i),h=e(i),void 0==h?this:this.each(function(){f({action:"mask",el:this},a.extend(!0,{},h),g(this,i))});if(void 0==b)return this.each(function(){var b=a(this).attr("data-inputmask");if(b&&""!=b)try{b=b.replace(new RegExp("'","g"),'"');var e=a.parseJSON("{"+b+"}");a.extend(!0,e,c),i=a.extend(!0,{},a.inputmask.defaults,e),i=g(this,i),d(i.alias,e,i),i.alias=void 0,a(this).inputmask("mask",i)}catch(f){}if(a(this).attr("data-inputmask-mask")||a(this).attr("data-inputmask-alias")){i=a.extend(!0,{},a.inputmask.defaults,{});var h={};i=g(this,i,h),d(i.alias,h,i),i.alias=void 0,a(this).inputmask("mask",i)}})}}}return a.fn.inputmask}(jQuery),function(a){return a.extend(a.inputmask.defaults.definitions,{h:{validator:"[01][0-9]|2[0-3]",cardinality:2,prevalidator:[{validator:"[0-2]",cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:"[0-5]",cardinality:1}]},d:{validator:"0[1-9]|[12][0-9]|3[01]",cardinality:2,prevalidator:[{validator:"[0-3]",cardinality:1}]},m:{validator:"0[1-9]|1[012]",cardinality:2,prevalidator:[{validator:"[01]",cardinality:1}]},y:{validator:"(19|20)\\d{2}",cardinality:4,prevalidator:[{validator:"[12]",cardinality:1},{validator:"(19|20)",cardinality:2},{validator:"(19|20)\\d",cardinality:3}]}}),a.extend(a.inputmask.defaults.aliases,{"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:new RegExp("[0-3]"),val1:new RegExp("0[1-9]|[12][0-9]|3[01]"),val2pre:function(b){var c=a.inputmask.escapeRegex.call(this,b);return new RegExp("((0[1-9]|[12][0-9]|3[01])"+c+"[01])")},val2:function(b){var c=a.inputmask.escapeRegex.call(this,b);return new RegExp("((0[1-9]|[12][0-9])"+c+"(0[1-9]|1[012]))|(30"+c+"(0[13-9]|1[012]))|(31"+c+"(0[13578]|1[02]))")}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(a,b,c){if(isNaN(a))return!1;var d=parseInt(a.concat(b.toString().slice(a.length))),e=parseInt(a.concat(c.toString().slice(a.length)));return(isNaN(d)?!1:d>=b&&c>=d)||(isNaN(e)?!1:e>=b&&c>=e)},determinebaseyear:function(a,b,c){var d=(new Date).getFullYear();if(a>d)return a;if(d>b){for(var e=b.toString().slice(0,2),f=b.toString().slice(2,4);e+c>b;)e--;var g=e+f;return a>g?a:g}return d},onKeyDown:function(b){var c=a(this);if(b.ctrlKey&&b.keyCode==a.inputmask.keyCode.RIGHT){var d=new Date;c.val(d.getDate().toString()+(d.getMonth()+1).toString()+d.getFullYear().toString()),c.triggerHandler("setvalue.inputmask")}},getFrontValue:function(a,b,c){for(var d=0,e=0,f=0;f<a.length&&"2"!=a.charAt(f);f++){var g=c.definitions[a.charAt(f)];g?(d+=e,e=g.cardinality):e++}return b.join("").substr(d,e)},definitions:{1:{validator:function(a,b,c,d,e){var f=e.regex.val1.test(a);return d||f||a.charAt(1)!=e.separator&&-1=="-./".indexOf(a.charAt(1))||!(f=e.regex.val1.test("0"+a.charAt(0)))?f:(b.buffer[c-1]="0",{refreshFromBuffer:{start:c-1,end:c},pos:c,c:a.charAt(0)})},cardinality:2,prevalidator:[{validator:function(a,b,c,d,e){var f=a;isNaN(b.buffer[c+1])||(f+=b.buffer[c+1]);var g=1==f.length?e.regex.val1pre.test(f):e.regex.val1.test(f);if(!d&&!g){if(g=e.regex.val1.test(a+"0"))return b.buffer[c]=a,b.buffer[++c]="0",{pos:c,c:"0"};if(g=e.regex.val1.test("0"+a))return b.buffer[c]="0",c++,{pos:c}}return g},cardinality:1}]},2:{validator:function(a,b,c,d,e){var f=e.getFrontValue(b.mask,b.buffer,e);-1!=f.indexOf(e.placeholder[0])&&(f="01"+e.separator);var g=e.regex.val2(e.separator).test(f+a);if(!d&&!g&&(a.charAt(1)==e.separator||-1!="-./".indexOf(a.charAt(1)))&&(g=e.regex.val2(e.separator).test(f+"0"+a.charAt(0))))return b.buffer[c-1]="0",{refreshFromBuffer:{start:c-1,end:c},pos:c,c:a.charAt(0)};if(e.mask.indexOf("2")==e.mask.length-1&&g){var h=b.buffer.join("").substr(4,4)+a;if(h!=e.leapday)return!0;var i=parseInt(b.buffer.join("").substr(0,4),10);return i%4===0?i%100===0?i%400===0?!0:!1:!0:!1}return g},cardinality:2,prevalidator:[{validator:function(a,b,c,d,e){isNaN(b.buffer[c+1])||(a+=b.buffer[c+1]);var f=e.getFrontValue(b.mask,b.buffer,e);-1!=f.indexOf(e.placeholder[0])&&(f="01"+e.separator);var g=1==a.length?e.regex.val2pre(e.separator).test(f+a):e.regex.val2(e.separator).test(f+a);return d||g||!(g=e.regex.val2(e.separator).test(f+"0"+a))?g:(b.buffer[c]="0",c++,{pos:c})},cardinality:1}]},y:{validator:function(a,b,c,d,e){if(e.isInYearRange(a,e.yearrange.minyear,e.yearrange.maxyear)){var f=b.buffer.join("").substr(0,6);if(f!=e.leapday)return!0;var g=parseInt(a,10);return g%4===0?g%100===0?g%400===0?!0:!1:!0:!1}return!1},cardinality:4,prevalidator:[{validator:function(a,b,c,d,e){var f=e.isInYearRange(a,e.yearrange.minyear,e.yearrange.maxyear);if(!d&&!f){var g=e.determinebaseyear(e.yearrange.minyear,e.yearrange.maxyear,a+"0").toString().slice(0,1);if(f=e.isInYearRange(g+a,e.yearrange.minyear,e.yearrange.maxyear))return b.buffer[c++]=g.charAt(0),{pos:c};if(g=e.determinebaseyear(e.yearrange.minyear,e.yearrange.maxyear,a+"0").toString().slice(0,2),f=e.isInYearRange(g+a,e.yearrange.minyear,e.yearrange.maxyear))return b.buffer[c++]=g.charAt(0),b.buffer[c++]=g.charAt(1),{pos:c}}return f},cardinality:1},{validator:function(a,b,c,d,e){var f=e.isInYearRange(a,e.yearrange.minyear,e.yearrange.maxyear);if(!d&&!f){var g=e.determinebaseyear(e.yearrange.minyear,e.yearrange.maxyear,a).toString().slice(0,2);if(f=e.isInYearRange(a[0]+g[1]+a[1],e.yearrange.minyear,e.yearrange.maxyear))return b.buffer[c++]=g.charAt(1),{pos:c};if(g=e.determinebaseyear(e.yearrange.minyear,e.yearrange.maxyear,a).toString().slice(0,2),e.isInYearRange(g+a,e.yearrange.minyear,e.yearrange.maxyear)){var h=b.buffer.join("").substr(0,6);if(h!=e.leapday)f=!0;else{var i=parseInt(a,10);f=i%4===0?i%100===0?i%400===0?!0:!1:!0:!1}}else f=!1;if(f)return b.buffer[c-1]=g.charAt(0),b.buffer[c++]=g.charAt(1),b.buffer[c++]=a.charAt(0),{refreshFromBuffer:{start:c-3,end:c},pos:c}}return f},cardinality:2},{validator:function(a,b,c,d,e){return e.isInYearRange(a,e.yearrange.minyear,e.yearrange.maxyear)},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(b){var c=a.inputmask.escapeRegex.call(this,b);return new RegExp("((0[13-9]|1[012])"+c+"[0-3])|(02"+c+"[0-2])")},val2:function(b){var c=a.inputmask.escapeRegex.call(this,b);return new RegExp("((0[1-9]|1[012])"+c+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+c+"30)|((0[13578]|1[02])"+c+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyDown:function(b){var c=a(this);if(b.ctrlKey&&b.keyCode==a.inputmask.keyCode.RIGHT){var d=new Date;c.val((d.getMonth()+1).toString()+d.getDate().toString()+d.getFullYear().toString()),c.triggerHandler("setvalue.inputmask")}}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyDown:function(b){var c=a(this);if(b.ctrlKey&&b.keyCode==a.inputmask.keyCode.RIGHT){var d=new Date;c.val(d.getFullYear().toString()+(d.getMonth()+1).toString()+d.getDate().toString()),c.triggerHandler("setvalue.inputmask")}}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:new RegExp("[012]"),hrs24:new RegExp("2[0-4]|1[3-9]"),hrs:new RegExp("[01][0-9]|2[0-4]"),ampm:new RegExp("^[a|p|A|P][m|M]"),mspre:new RegExp("[0-5]"),ms:new RegExp("[0-5][0-9]")},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(a,b,c,d,e){if("24"==e.hourFormat&&24==parseInt(a,10))return b.buffer[c-1]="0",b.buffer[c]="0",{refreshFromBuffer:{start:c-1,end:c},c:"0"};var f=e.regex.hrs.test(a);if(!d&&!f&&(a.charAt(1)==e.timeseparator||-1!="-.:".indexOf(a.charAt(1)))&&(f=e.regex.hrs.test("0"+a.charAt(0))))return b.buffer[c-1]="0",b.buffer[c]=a.charAt(0),c++,{refreshFromBuffer:{start:c-2,end:c},pos:c,c:e.timeseparator};if(f&&"24"!==e.hourFormat&&e.regex.hrs24.test(a)){var g=parseInt(a,10);return 24==g?(b.buffer[c+5]="a",b.buffer[c+6]="m"):(b.buffer[c+5]="p",b.buffer[c+6]="m"),g-=12,10>g?(b.buffer[c]=g.toString(),b.buffer[c-1]="0"):(b.buffer[c]=g.toString().charAt(1),b.buffer[c-1]=g.toString().charAt(0)),{refreshFromBuffer:{start:c-1,end:c+6},c:b.buffer[c]}}return f},cardinality:2,prevalidator:[{validator:function(a,b,c,d,e){var f=e.regex.hrspre.test(a);return d||f||!(f=e.regex.hrs.test("0"+a))?f:(b.buffer[c]="0",c++,{pos:c})},cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:function(a,b,c,d,e){var f=e.regex.mspre.test(a);return d||f||!(f=e.regex.ms.test("0"+a))?f:(b.buffer[c]="0",c++,{pos:c})},cardinality:1}]},t:{validator:function(a,b,c,d,e){return e.regex.ampm.test(a+"m")},casing:"lower",cardinality:1}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t\\m",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",placeholder:"hh:mm:ss",alias:"datetime",autoUnmask:!1},"hh:mm":{mask:"h:s",placeholder:"hh:mm",alias:"datetime",autoUnmask:!1},date:{alias:"dd/mm/yyyy"},"mm/yyyy":{mask:"1/y",placeholder:"mm/yyyy",leapday:"donotuse",separator:"/",alias:"mm/dd/yyyy"}}),a.fn.inputmask}(jQuery),function(a){return a.extend(a.inputmask.defaults.definitions,{A:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",cardinality:1,casing:"upper"},"#":{validator:"[0-9A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",cardinality:1,casing:"upper"}}),a.extend(a.inputmask.defaults.aliases,{url:{mask:"ir",placeholder:"",separator:"",defaultPrefix:"http://",regex:{urlpre1:new RegExp("[fh]"),urlpre2:new RegExp("(ft|ht)"),urlpre3:new RegExp("(ftp|htt)"),urlpre4:new RegExp("(ftp:|http|ftps)"),urlpre5:new RegExp("(ftp:/|ftps:|http:|https)"),urlpre6:new RegExp("(ftp://|ftps:/|http:/|https:)"),urlpre7:new RegExp("(ftp://|ftps://|http://|https:/)"),urlpre8:new RegExp("(ftp://|ftps://|http://|https://)")},definitions:{i:{validator:function(){return!0},cardinality:8,prevalidator:function(){for(var a=[],b=8,c=0;b>c;c++)a[c]=function(){var a=c;return{validator:function(b,c,d,e,f){if(f.regex["urlpre"+(a+1)]){var g,h=b;a+1-b.length>0&&(h=c.buffer.join("").substring(0,a+1-b.length)+""+h);var i=f.regex["urlpre"+(a+1)].test(h);if(!e&&!i){for(d-=a,g=0;g<f.defaultPrefix.length;g++)c.buffer[d]=f.defaultPrefix[g],d++;for(g=0;g<h.length-1;g++)c.buffer[d]=h[g],d++;return{pos:d}}return i}return!1},cardinality:a}}();return a}()},r:{validator:".",cardinality:50}},insertMode:!1,autoUnmask:!1},ip:{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{i:{validator:function(a,b,c){return c-1>-1&&"."!=b.buffer[c-1]?(a=b.buffer[c-1]+a,a=c-2>-1&&"."!=b.buffer[c-2]?b.buffer[c-2]+a:"0"+a):a="00"+a,new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(a)},cardinality:1}}},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,64}]@*{1,64}[.*{2,64}][.*{2,6}][.*{1,2}]",greedy:!1,onBeforePaste:function(a){return a=a.toLowerCase(),a.replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}}}),a.fn.inputmask}(jQuery),function(a){return a.extend(a.inputmask.defaults.aliases,{numeric:{mask:function(a){function b(b){for(var c="",d=0;d<b.length;d++)c+=a.definitions[b[d]]?"\\"+b[d]:b[d];return c}if(0!==a.repeat&&isNaN(a.integerDigits)&&(a.integerDigits=a.repeat),a.repeat=0,a.groupSeparator==a.radixPoint&&(a.groupSeparator="."==a.radixPoint?",":","==a.radixPoint?".":"")," "===a.groupSeparator&&(a.skipOptionalPartCharacter=void 0),a.autoGroup=a.autoGroup&&""!=a.groupSeparator,a.autoGroup&&("string"==typeof a.groupSize&&isFinite(a.groupSize)&&(a.groupSize=parseInt(a.groupSize)),isFinite(a.integerDigits))){var c=Math.floor(a.integerDigits/a.groupSize),d=a.integerDigits%a.groupSize;a.integerDigits=parseInt(a.integerDigits)+(0==d?c-1:c)}a.radixFocus=a.radixFocus&&"0"==a.placeholder,a.definitions[";"]=a.definitions["~"];var e=b(a.prefix);return e+="[+]",e+="~{1,"+a.integerDigits+"}",void 0!=a.digits&&(isNaN(a.digits)||parseInt(a.digits)>0)&&(e+=a.digitsOptional?"["+(a.decimalProtect?":":a.radixPoint)+";{"+a.digits+"}]":(a.decimalProtect?":":a.radixPoint)+";{"+a.digits+"}"),e+=b(a.suffix),e+="[-]",a.greedy=!1,e},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,groupSeparator:"",radixPoint:".",radixFocus:!0,groupSize:3,autoGroup:!1,allowPlus:!0,allowMinus:!0,negationSymbol:{front:"-",back:""},integerDigits:"+",prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,min:void 0,max:void 0,postFormat:function(b,c,d,e){var f=!1;b.length>=e.suffix.length&&b.join("").indexOf(e.suffix)==b.length-e.suffix.length&&(b.length=b.length-e.suffix.length,f=!0),c=c>=b.length?b.length-1:c<e.prefix.length?e.prefix.length:c;var g=!1,h=b[c];if(""==e.groupSeparator||-1!=a.inArray(e.radixPoint,b)&&c>=a.inArray(e.radixPoint,b)||new RegExp("[-+]").test(h)){if(f)for(var i=0,j=e.suffix.length;j>i;i++)b.push(e.suffix.charAt(i));return{pos:c}}var k=b.slice();h==e.groupSeparator&&(k.splice(c--,1),h=k[c]),d?k[c]="?":k.splice(c,0,"?");var l=k.join(""),m=l;if(l.length>0&&e.autoGroup||d&&-1!=l.indexOf(e.groupSeparator)){var n=a.inputmask.escapeRegex.call(this,e.groupSeparator);g=0==l.indexOf(e.groupSeparator),l=l.replace(new RegExp(n,"g"),"");var o=l.split(e.radixPoint);if(l=""==e.radixPoint?l:o[0],l!=e.prefix+"?0"&&l.length>=e.groupSize+e.prefix.length)for(var p=new RegExp("([-+]?[\\d?]+)([\\d?]{"+e.groupSize+"})");p.test(l);)l=l.replace(p,"$1"+e.groupSeparator+"$2"),l=l.replace(e.groupSeparator+e.groupSeparator,e.groupSeparator);""!=e.radixPoint&&o.length>1&&(l+=e.radixPoint+o[1])}g=m!=l,b.length=l.length;for(var i=0,j=l.length;j>i;i++)b[i]=l.charAt(i);var q=a.inArray("?",b);if(d?b[q]=h:b.splice(q,1),!g&&f)for(var i=0,j=e.suffix.length;j>i;i++)b.push(e.suffix.charAt(i));return{pos:q,refreshFromBuffer:g,buffer:b}},onBeforeWrite:function(b,c,d,e){if(b&&"blur"==b.type){var f=c.join(""),g=f.replace(e.prefix,"");if(g=g.replace(e.suffix,""),g=g.replace(new RegExp(a.inputmask.escapeRegex.call(this,e.groupSeparator),"g"),""),g=g.replace(a.inputmask.escapeRegex.call(this,e.radixPoint),"."),isFinite(g)&&isFinite(e.min)&&parseFloat(g)<parseFloat(e.min))return e.postFormat((e.prefix+e.min).split(""),0,!0,e);var h=""!=e.radixPoint?c.join("").split(e.radixPoint):[c.join("")],i=h[0].match(e.regex.integerPart(e)),j=2==h.length?h[1].match(e.regex.integerNPart(e)):void 0;!i||i[0]!=e.negationSymbol.front+"0"&&i[0]!=e.negationSymbol.front&&"+"!=i[0]||void 0!=j&&!j[0].match(/^0+$/)||c.splice(i.index,1);var k=a.inArray(e.radixPoint,c);if(-1!=k&&isFinite(e.digits)&&!e.digitsOptional){for(var l=1;l<=e.digits;l++)(void 0==c[k+l]||c[k+l]==e.placeholder.charAt(0))&&(c[k+l]="0");return{refreshFromBuffer:!0,buffer:c}}}if(e.autoGroup){var m=e.postFormat(c,d-1,!0,e);return m.caret=d<=e.prefix.length?m.pos:m.pos+1,m}},regex:{integerPart:function(b){return new RegExp("["+a.inputmask.escapeRegex.call(this,b.negationSymbol.front)+"+]?\\d*")},integerNPart:function(b){return new RegExp("[\\d"+a.inputmask.escapeRegex.call(this,b.groupSeparator)+"]+")}},signHandler:function(a,b,c,d,e){if(!d&&e.allowMinus&&"-"===a||e.allowPlus&&"+"===a){var f=b.buffer.join("").match(e.regex.integerPart(e));if(f&&f[0].length>0)return b.buffer[f.index]==("-"===a?"+":e.negationSymbol.front)?{pos:f.index,c:"-"===a?e.negationSymbol.front:"+",remove:f.index,caret:c}:b.buffer[f.index]==("-"===a?e.negationSymbol.front:"+")?{remove:f.index,caret:c-1}:{pos:f.index,c:"-"===a?e.negationSymbol.front:"+",caret:c+1}}return!1},radixHandler:function(b,c,d,e,f){if(!e&&b===f.radixPoint&&f.digits>0){var g=a.inArray(f.radixPoint,c.buffer),h=c.buffer.join("").match(f.regex.integerPart(f));if(-1!=g&&c.validPositions[g])return c.validPositions[g-1]?{caret:g+1}:{pos:h.index,c:h[0],caret:g+1};if(!h||"0"==h[0]&&h.index+1!=d)return c.buffer[h?h.index:d]="0",{pos:(h?h.index:d)+1}}return!1},leadingZeroHandler:function(b,c,d,e,f){var g=c.buffer.join("").match(f.regex.integerNPart(f)),h=a.inArray(f.radixPoint,c.buffer);if(g&&!e&&(-1==h||h>=d))if(0==g[0].indexOf("0")){d<f.prefix.length&&(d=g.index);var i=a.inArray(f.radixPoint,c._buffer),j=c._buffer&&c.buffer.slice(h).join("")==c._buffer.slice(i).join("")||0==parseInt(c.buffer.slice(h+1).join("")),k=c._buffer&&c.buffer.slice(g.index,h).join("")==c._buffer.slice(f.prefix.length,i).join("")||"0"==c.buffer.slice(g.index,h).join("");if(-1==h||j&&k)return c.buffer.splice(g.index,1),d=d>g.index?d-1:g.index,{pos:d,remove:g.index};if(g.index+1==d||"0"==b)return c.buffer.splice(g.index,1),d=g.index,{pos:d,remove:g.index}}else if("0"===b&&d<=g.index&&g[0]!=f.groupSeparator)return!1;return!0},postValidation:function(b,c){var d=!0,e=b.join(""),f=e.replace(c.prefix,"");return f=f.replace(c.suffix,""),f=f.replace(new RegExp(a.inputmask.escapeRegex.call(this,c.groupSeparator),"g"),""),f=f.replace(a.inputmask.escapeRegex.call(this,c.radixPoint),"."),isFinite(f)&&isFinite(c.max)&&(d=parseFloat(f)<=parseFloat(c.max)),d},definitions:{"~":{validator:function(b,c,d,e,f){var g=f.signHandler(b,c,d,e,f);if(!g&&(g=f.radixHandler(b,c,d,e,f),!g&&(g=e?new RegExp("[0-9"+a.inputmask.escapeRegex.call(this,f.groupSeparator)+"]").test(b):new RegExp("[0-9]").test(b),g===!0&&(g=f.leadingZeroHandler(b,c,d,e,f),g===!0)))){var h=a.inArray(f.radixPoint,c.buffer);g=f.digitsOptional===!1&&d>h&&!e?{pos:d,remove:d}:{pos:d}}return g},cardinality:1,prevalidator:null},"+":{validator:function(a,b,c,d,e){var f=e.signHandler(a,b,c,d,e);return!f&&(d&&e.allowMinus&&a===e.negationSymbol.front||e.allowMinus&&"-"==a||e.allowPlus&&"+"==a)&&(f=!0),f},cardinality:1,prevalidator:null,placeholder:""},"-":{validator:function(a,b,c,d,e){var f=e.signHandler(a,b,c,d,e);return!f&&d&&e.allowMinus&&a===e.negationSymbol.back&&(f=!0),f},cardinality:1,prevalidator:null,placeholder:""},":":{validator:function(b,c,d,e,f){var g=f.signHandler(b,c,d,e,f);if(!g){var h="["+a.inputmask.escapeRegex.call(this,f.radixPoint)+"]";g=new RegExp(h).test(b),g&&c.validPositions[d]&&c.validPositions[d].match.placeholder==f.radixPoint&&(g={caret:d+1})}return g},cardinality:1,prevalidator:null,placeholder:function(a){return a.radixPoint}}},insertMode:!0,autoUnmask:!1,onUnMask:function(b,c,d){var e=b.replace(d.prefix,"");return e=e.replace(d.suffix,""),e=e.replace(new RegExp(a.inputmask.escapeRegex.call(this,d.groupSeparator),"g"),"")},isComplete:function(b,c){var d=b.join(""),e=b.slice();if(c.postFormat(e,0,!0,c),e.join("")!=d)return!1;var f=d.replace(c.prefix,"");return f=f.replace(c.suffix,""),f=f.replace(new RegExp(a.inputmask.escapeRegex.call(this,c.groupSeparator),"g"),""),","===c.radixPoint&&(f=f.replace(a.inputmask.escapeRegex.call(this,c.radixPoint),".")),isFinite(f)},onBeforeMask:function(b,c){if(""!=c.radixPoint&&isFinite(b))b=b.toString().replace(".",c.radixPoint);else{var d=b.match(/,/g),e=b.match(/\./g);e&&d?e.length>d.length?(b=b.replace(/\./g,""),b=b.replace(",",c.radixPoint)):d.length>e.length?(b=b.replace(/,/g,""),b=b.replace(".",c.radixPoint)):b=b.indexOf(".")<b.indexOf(",")?b.replace(/\./g,""):b=b.replace(/,/g,""):b=b.replace(new RegExp(a.inputmask.escapeRegex.call(this,c.groupSeparator),"g"),"")}return 0==c.digits&&(-1!=b.indexOf(".")?b=b.substring(0,b.indexOf(".")):-1!=b.indexOf(",")&&(b=b.substring(0,b.indexOf(",")))),b},canClearPosition:function(b,c,d,e,f){var g=b.validPositions[c].input,h=g!=f.radixPoint&&isFinite(g)||c==d||g==f.groupSeparator||g==f.negationSymbol.front||g==f.negationSymbol.back;if(h&&isFinite(g)){var i=b.buffer.join("").substr(0,c).match(f.regex.integerNPart(f));if(!e){var j=c+1,k=null==i||0==parseInt(i[0].replace(new RegExp(a.inputmask.escapeRegex.call(this,f.groupSeparator),"g"),""));if(k)for(;b.validPositions[j]&&(b.validPositions[j].input==f.groupSeparator||"0"==b.validPositions[j].input);)delete b.validPositions[j],j++}var l=[];for(var m in b.validPositions)l.push(b.validPositions[m].input);i=l.join("").match(f.regex.integerNPart(f));var n=a.inArray(f.radixPoint,b.buffer);if(i&&(-1==n||n>=c))if(0==i[0].indexOf("0"))h=i.index!=c||-1==n;else{var o=parseInt(i[0].replace(new RegExp(a.inputmask.escapeRegex.call(this,f.groupSeparator),"g"),""));-1!=n&&10>o&&"0"==f.placeholder.charAt(0)&&(b.validPositions[c].input="0",b.p=f.prefix.length+1,h=!1)}}return h}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:"0",radixPoint:""}}),a.fn.inputmask}(jQuery),function(a){return a.extend(a.inputmask.defaults.aliases,{phone:{url:"phone-codes/phone-codes.js",maskInit:"+pp(pp)pppppppp",countrycode:"",mask:function(b){b.definitions={p:{validator:function(){return!1},cardinality:1},"#":{validator:"[0-9]",cardinality:1}};var c=[];return a.ajax({url:b.url,async:!1,dataType:"json",success:function(a){c=a},error:function(a,c,d){alert(d+" - "+b.url)}}),c=c.sort(function(a,b){return(a.mask||a)<(b.mask||b)?-1:1}),""!=b.countrycode&&(b.maskInit="+"+b.countrycode+b.maskInit.substring(3)),c.splice(0,0,b.maskInit),c},nojumps:!0,nojumpsThreshold:1,onBeforeMask:function(a,b){var c=a.replace(/^0/g,"");return(c.indexOf(b.countrycode)>1||-1==c.indexOf(b.countrycode))&&(c="+"+b.countrycode+c),c}},phonebe:{alias:"phone",url:"phone-codes/phone-be.js",countrycode:"32",nojumpsThreshold:4}}),a.fn.inputmask}(jQuery),function(a){return a.extend(a.inputmask.defaults.aliases,{Regex:{mask:"r",greedy:!1,repeat:"*",regex:null,regexTokens:null,tokenizer:/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,quantifierFilter:/[0-9]+[^,]/,isComplete:function(a,b){return new RegExp(b.regex).test(a.join(""))},definitions:{r:{validator:function(b,c,d,e,f){function g(a,b){this.matches=[],this.isGroup=a||!1,this.isQuantifier=b||!1,this.quantifier={min:1,max:1},this.repeaterPart=void 0}function h(){var a,b,c=new g,d=[];for(f.regexTokens=[];a=f.tokenizer.exec(f.regex);)switch(b=a[0],b.charAt(0)){case"(":d.push(new g(!0));break;case")":var e=d.pop();d.length>0?d[d.length-1].matches.push(e):c.matches.push(e);break;case"{":case"+":case"*":var h=new g(!1,!0);b=b.replace(/[{}]/g,"");var i=b.split(","),j=isNaN(i[0])?i[0]:parseInt(i[0]),k=1==i.length?j:isNaN(i[1])?i[1]:parseInt(i[1]);if(h.quantifier={min:j,max:k},d.length>0){var l=d[d.length-1].matches;if(a=l.pop(),!a.isGroup){var e=new g(!0);e.matches.push(a),a=e}l.push(a),l.push(h)}else{if(a=c.matches.pop(),!a.isGroup){var e=new g(!0);e.matches.push(a),a=e}c.matches.push(a),c.matches.push(h)}break;default:d.length>0?d[d.length-1].matches.push(b):c.matches.push(b)}c.matches.length>0&&f.regexTokens.push(c)}function i(b,c){var d=!1;c&&(k+="(",m++);for(var e=0;e<b.matches.length;e++){var f=b.matches[e];if(1==f.isGroup)d=i(f,!0);else if(1==f.isQuantifier){var g=a.inArray(f,b.matches),h=b.matches[g-1],j=k;if(isNaN(f.quantifier.max)){for(;f.repeaterPart&&f.repeaterPart!=k&&f.repeaterPart.length>k.length&&!(d=i(h,!0)););d=d||i(h,!0),d&&(f.repeaterPart=k),k=j+f.quantifier.max}else{for(var l=0,o=f.quantifier.max-1;o>l&&!(d=i(h,!0));l++);k=j+"{"+f.quantifier.min+","+f.quantifier.max+"}"}}else if(void 0!=f.matches)for(var p=0;p<f.length&&!(d=i(f[p],c));p++);else{var q;if("["==f.charAt(0)){q=k,q+=f;for(var r=0;m>r;r++)q+=")";var s=new RegExp("^("+q+")$");d=s.test(n)}else for(var t=0,u=f.length;u>t;t++)if("\\"!=f.charAt(t)){q=k,q+=f.substr(0,t+1),q=q.replace(/\|$/,"");for(var r=0;m>r;r++)q+=")";var s=new RegExp("^("+q+")$");if(d=s.test(n))break}k+=f}if(d)break}return c&&(k+=")",m--),d}null==f.regexTokens&&h();var j=c.buffer.slice(),k="",l=!1,m=0;j.splice(d,0,b);for(var n=j.join(""),o=0;o<f.regexTokens.length;o++){var g=f.regexTokens[o];if(l=i(g,g.isGroup))break}return l},cardinality:1}}}}),a.fn.inputmask}(jQuery);(function($){var splitVersion=$.fn.jquery.split(".");var major=parseInt(splitVersion[0]);var minor=parseInt(splitVersion[1]);var JQ_LT_17=(major<1)||(major==1&&minor<7);function eventsData($el){return JQ_LT_17?$el.data('events'):$._data($el[0]).events;}
function moveHandlerToTop($el,eventName,isDelegated){var data=eventsData($el);var events=data[eventName];if(!JQ_LT_17){var handler=isDelegated?events.splice(events.delegateCount-1,1)[0]:events.pop();events.splice(isDelegated?0:(events.delegateCount||0),0,handler);return;}
if(isDelegated){data.live.unshift(data.live.pop());}else{events.unshift(events.pop());}}
function moveEventHandlers($elems,eventsString,isDelegate){var events=eventsString.split(/\s+/);$elems.each(function(){for(var i=0;i<events.length;++i){var pureEventName=$.trim(events[i]).match(/[^\.]+/i)[0];moveHandlerToTop($(this),pureEventName,isDelegate);}});}
function makeMethod(methodName){$.fn[methodName+'First']=function(){var args=$.makeArray(arguments);var eventsString=args.shift();if(eventsString){$.fn[methodName].apply(this,arguments);moveEventHandlers(this,eventsString);}
return this;}}
makeMethod('bind');makeMethod('one');$.fn.delegateFirst=function(){var args=$.makeArray(arguments);var eventsString=args[1];if(eventsString){args.splice(0,2);$.fn.delegate.apply(this,arguments);moveEventHandlers(this,eventsString,true);}
return this;};$.fn.liveFirst=function(){var args=$.makeArray(arguments);args.unshift(this.selector);$.fn.delegateFirst.apply($(document),args);return this;};if(!JQ_LT_17){$.fn.onFirst=function(types,selector){var $el=$(this);var isDelegated=typeof selector==='string';$.fn.on.apply($el,arguments);if(typeof types==='object'){for(type in types)
if(types.hasOwnProperty(type)){moveEventHandlers($el,type,isDelegated);}}else if(typeof types==='string'){moveEventHandlers($el,types,isDelegated);}
return $el;};}})(jQuery);(function($){$.masksLoad=function(url){var maskList;$.ajax({url:url,async:false,dataType:'json',success:function(response){maskList=response;}});return maskList;}
$.masksSort=function(maskList,defs,match,key){maskList.sort(function(a,b){var ia=0,ib=0;for(;(ia<a[key].length&&ib<b[key].length);){var cha=a[key].charAt(ia);var chb=b[key].charAt(ib);if(!match.test(cha)){ia++;continue;}
if(!match.test(chb)){ib++;continue;}
if($.inArray(cha,defs)!=-1&&$.inArray(chb,defs)==-1){return 1;}
if($.inArray(cha,defs)==-1&&$.inArray(chb,defs)!=-1){return-1;}
if($.inArray(cha,defs)==-1&&$.inArray(chb,defs)==-1){if(cha!=chb){return cha<chb?-1:1;}}
ia++;ib++;}
for(;(ia<a[key].length||ib<b[key].length);){if(ia<a[key].length&&!match.test(a[key].charAt(ia))){ia++;continue;}
if(ib<b[key].length&&!match.test(b[key].charAt(ib))){ib++;continue;}
if(ia<a[key].length){return 1;}
if(ib<b[key].length){return-1;}}
return 0;});return maskList;}
$.fn.inputmasks=function(maskOpts,mode){var caret=function(begin,end){if(typeof begin=='number'){end=(typeof end=='number')?end:begin;if(this.setSelectionRange){this.setSelectionRange(begin,end);}else if(this.createTextRange){var range=this.createTextRange();range.collapse(true);range.moveEnd('character',end);range.moveStart('character',begin);range.select();}}else{if(this.setSelectionRange){begin=this.selectionStart;end=this.selectionEnd;}else if(document.selection&&document.selection.createRange){var range=document.selection.createRange();begin=0-range.duplicate().moveStart('character',-100000);end=begin+range.text.length;}
return{begin:begin,end:end};}};var keys=Object.keys||function(obj){if(obj!==Object(obj)){throw new TypeError('Invalid object');}
var keys=[];for(var key in obj){keys[keys.length]=key;}
return keys;};maskOpts=$.extend(true,{onMaskChange:$.noop},maskOpts);var defs={};for(var def in maskOpts.inputmask.definitions){var validator=maskOpts.inputmask.definitions[def].validator;switch(typeof validator){case"string":defs[def]=new RegExp(validator);break;case"object":if("test"in maskOpts.definitions[def].validator){defs[def]=validator;}
break;case"function":defs[def]={test:validator};break;}}
maskOpts.inputmask.definitions[maskOpts.replace]={validator:maskOpts.match.source,cardinality:1};var iphone=navigator.userAgent.match(/iphone/i)!=null;var oldmatch=false;var placeholder=$.extend(true,{},$.inputmask.defaults,maskOpts.inputmask).placeholder;var insertMode=$.extend(true,{},$.inputmask.defaults,maskOpts.inputmask).insertMode;var maskMatch=function(text){var mtxt="";for(var i=0;i<text.length;i++){var ch=text.charAt(i);if(ch==placeholder){break;}
if(maskOpts.match.test(ch)){mtxt+=ch;}}
for(var mid in maskOpts.list){var mask=maskOpts.list[mid][maskOpts.listKey];var pass=true;for(var it=0,im=0;(it<mtxt.length&&im<mask.length);){var chm=mask.charAt(im);var cht=mtxt.charAt(it);if(!maskOpts.match.test(chm)&&!(chm in defs)){im++;continue;}
if(((chm in defs)&&defs[chm].test(cht))||(cht==chm)){it++;im++;}else{pass=false;break;}}
if(pass&&it==mtxt.length){var determined=mask.substr(im).search(maskOpts.match)==-1;mask=mask.replace(new RegExp([maskOpts.match.source].concat(keys(defs)).join('|'),'g'),maskOpts.replace);var completed=mask.substr(im).search(maskOpts.replace)==-1;return{mask:mask,obj:maskOpts.list[mid],determined:determined,completed:completed};}}
return false;}
var caretApply=function(oldMask,newMask,oldPos){if(!oldMask){return 0;}
var pos=0,startPos=0;for(;pos<oldPos.begin;pos++){if(oldMask.charAt(pos)==maskOpts.replace){startPos++;}}
var endPos=0;for(;pos<oldPos.end;pos++){if(oldMask.charAt(pos)==maskOpts.replace){endPos++;}}
for(pos=0;(pos<newMask.length&&(startPos>0||newMask.charAt(pos)!=maskOpts.replace));pos++){if(newMask.charAt(pos)==maskOpts.replace){startPos--;}}
startPos=pos;for(;(pos<newMask.length&&endPos>0);pos++){if(newMask.charAt(pos)==maskOpts.replace){endPos--;}}
endPos=pos;return{begin:startPos,end:endPos};}
var maskUnbind=function(){$(this).unbind("keypress.inputmask",masksKeyPress).unbind("input.inputmask",masksPaste).unbind("paste.inputmask",masksPaste).unbind("dragdrop.inputmask",masksPaste).unbind("drop.inputmask",masksPaste).unbind("keydown.inputmask",masksKeyDown).unbind("setvalue.inputmask",masksSetValue).unbind("blur.inputmask",masksChange);}
var maskRebind=function(){maskUnbind.call(this);$(this).bindFirst("keypress.inputmask",masksKeyPress).bindFirst("input.inputmask",masksPaste).bindFirst("paste.inputmask",masksPaste).bindFirst("dragdrop.inputmask",masksPaste).bindFirst("drop.inputmask",masksPaste).bindFirst("keydown.inputmask",masksKeyDown).bindFirst("setvalue.inputmask",masksSetValue).bind("blur.inputmask",masksChange);}
var maskApply=function(match,newtext){if(match&&(newtext||match.mask!=oldmatch.mask)){var caretPos;if(!newtext){caretPos=caretApply(oldmatch.mask,match.mask,caret.call(this));}
if(newtext){if(this._valueSet){this._valueSet(newtext);}else{this.value=newtext;}}
$(this).inputmask(match.mask,$.extend(true,maskOpts.inputmask,{insertMode:insertMode}));if(!newtext){caret.call(this,caretPos.begin,caretPos.end);}}
oldmatch=match;maskOpts.onMaskChange.call(this,match.obj,match.determined);return true;}
var keyboardApply=function(e,text,insert){var match=maskMatch(text);if(!match||match.obj!=oldmatch.obj||match.determined!=oldmatch.determined){if(match){maskUnbind.call(this);if(insert){maskApply.call(this,match);$(this).trigger(e);}else{$(this).trigger(e);maskApply.call(this,match);}
maskRebind.call(this);}
e.stopImmediatePropagation();return false;}
return true;}
var masksKeyDown=function(e){e=e||window.event;var k=e.which||e.charCode||e.keyCode;if(k==8||k==46||(iphone&&k==127)){var text=this._valueGet();var caretPos=caret.call(this);if(caretPos.begin==caretPos.end||(!insertMode&&caretPos.begin==caretPos.end-1)){var pos=caretPos.begin;do{if(k!=46){pos--;}
var chr=text.charAt(pos);text=text.substring(0,pos)+text.substring(pos+1);}while(pos>0&&pos<text.length&&chr!=placeholder&&!maskOpts.match.test(chr));}else{var test=text.substring(0,caretPos.begin)+text.substring(caretPos.end);if(test.search(maskOpts.match)==-1){text=test;}}
return keyboardApply.call(this,e,text,false);}
if(k==45){insertMode=!insertMode;}
return true;}
var masksKeyPress=function(e){var text=this._valueGet();e=e||window.event;var k=e.which||e.charCode||e.keyCode,c=String.fromCharCode(k);caretPos=caret.call(this);text=text.substring(0,caretPos.begin)+c+text.substring(caretPos.end);return keyboardApply.call(this,e,text,true);}
var masksChange=function(e){var match=maskMatch(this._valueGet());maskApply.call(this,match);maskRebind.call(this);return true;}
var masksSetValue=function(e){maskInit.call(this);e.stopImmediatePropagation();return true;}
var maskInit=function(){var text;if(this._valueGet){text=this._valueGet();}else{text=this.value;}
var match=maskMatch(text);while(!match&&text.length>0){text=text.substr(0,text.length-1);match=maskMatch(text);}
maskApply.call(this,match,text);maskRebind.call(this);}
var masksPaste=function(e){var input=this;setTimeout(function(){maskInit.call(input);},0);e.stopImmediatePropagation();return true;}
switch(mode){case"isCompleted":var res=maskMatch((this[0]._valueGet&&this[0]._valueGet())||this[0].value);return(res&&res.completed);default:this.each(function(){maskInit.call(this);});return this;}}})(jQuery);(function(_,$){$.ceEvent('on','ce.commoninit',function(context){var time_elements=context.find('.cm-cr-mask-time'),phone_elements=context.find('.cm-cr-mask-phone');if(time_elements.length===0&&phone_elements.length===0){return true;}
time_elements.mask('99:99');if(phone_elements.length&&_.call_requests_phone_masks_list){var maskList=$.masksSort(_.call_requests_phone_masks_list,['#'],/[0-9]|#/,"mask");var maskOpts={inputmask:{definitions:{'#':{validator:"[0-9]",cardinality:1}},showMaskOnHover:false,autoUnmask:false},match:/[0-9]/,replace:'#',list:maskList,listKey:"mask"};phone_elements.each(function(){if(_.call_phone_mask){$(this).inputmask({mask:_.call_phone_mask,showMaskOnHover:false,autoUnmask:false});}else{$(this).inputmasks(maskOpts);}});}
if(_.call_phone_mask){$.ceFormValidator('registerValidator',{class_name:'cm-cr-mask-phone-lbl',message:_.tr('call_requests.error_validator_phone'),func:function(id){var input=$('#'+id);if(!$.is.blank(input.val())){return input.inputmask("isComplete");}else{return true;}}});}});$.ceEvent('on','ce.formpre_call_requests_form',function(form,elm){var val_email=form.find('[name="call_data[email]"]').val(),val_phone=form.find('[name="call_data[phone]"]').val(),allow=!!(val_email||val_phone),error_box=form.find('.cm-cr-error-box'),dlg=$.ceDialog('get_last');error_box.toggle(!allow);dlg.ceDialog('reload');if(allow){var product_data=$('[name="'+form.data('caProductForm')+'"]').serializeObject();$.each(product_data,function(key,value){if(key.match(/product_data/)){form.append('<input type="hidden" name="'+key+'" value="'+value+'" />');}});}
return allow;});})(Tygh,Tygh.$);(function(_,$){(function($){var handlers={};var is_ready=false;var pool=[];var methods={showObjects:function(request,limit){handlers.showObjects.apply(this,arguments);},};var static_methods={init:function(settings){var settings=settings||{};handlers.init.call(this,settings,function(){is_ready=true;$.each(pool,function(i,cb){cb();});pool=[];});},getUserLocation:function(callback){handlers.getUserLocation.call(this,function(loc){if(loc){callback({country:loc.country,country_code:loc.country_code,state:loc.state,state_code:loc.state_code,city:loc.city,address:loc.address,});}});}};$.fn.ceMap=function(method){if(methods[method]){var self=this,args=Array.prototype.slice.call(arguments,1);var callback=function(){methods[method].apply(self,args);}
if(is_ready){return callback();}else{pool.push(callback);}}else{$.error('ce.map: method '+method+' does not exist');}};$.ceMap=function(action){if(action=='handlers'){handlers=arguments[1];}else if(static_methods[action]){var args=Array.prototype.slice.call(arguments,1),self=this;var callback=function(){static_methods[action].apply(self,args);};if(is_ready||action=='init'){return callback();}else{pool.push(callback);}}else{$.error('ce.map: method '+method+' does not exist');}}})($);}(Tygh,jQuery));(function(_,$){$.ceMap('handlers',{showObjects:function(request,limit){var $self=this;csymaps.geocode(request,{results:limit||10}).then(function(res){var coords=res.geoObjects.get(0).geometry.getCoordinates();map=new csymaps.Map($self.get(0),{center:coords,zoom:13,});map.behaviors.disable(['scrollZoom']);map.geoObjects.add(res.geoObjects);});},init:function(settings,callback){var default_settings={key:_.maps_provider.yandex_key,lang:_.cart_language,};settings=$.extend(default_settings,settings);var url='//api-maps.yandex.ru/2.1/?ns=csymaps&lang='+settings.lang;if(settings.key){url+='&key='+settings.key;}
$.getScript(url,function(){csymaps.ready(function(){callback();});});},getUserLocation:function(callback){csymaps.geolocation.get({provider:'yandex'}).then(function(res){var geocoder_meta_data=res.geoObjects.get(0).properties.get('metaDataProperty.GeocoderMetaData'),kind=geocoder_meta_data.kind,prop,nested=false;var location={counry:'',country_code:'',state:'',state_code:'',city:'',address:'',};do{geocoder_meta_data=nested||geocoder_meta_data;nested=false;for(prop in geocoder_meta_data){if(geocoder_meta_data.hasOwnProperty(prop)){if(typeof(geocoder_meta_data[prop])==='object'){nested=geocoder_meta_data[prop];}else if(prop=='CountryName'){location.country=geocoder_meta_data[prop];}else if(prop=='CountryNameCode'){location.country_code=geocoder_meta_data[prop];}else if(prop=='AdministrativeAreaName'){location.state=geocoder_meta_data[prop];}else if(prop=='AdministrativeAreaNameCode'){location.state_code=geocoder_meta_data[prop];}else if(prop=='LocalityName'){location.city=geocoder_meta_data[prop];}else if(prop=='DependentLocalityName'||prop=='ThoroughfareName'||prop=='PremiseNumber'){location.address+=geocoder_meta_data[prop]+' ';}}}}while(nested);callback(location);},function(){console.log('error');});},});}(Tygh,Tygh.$));(function(_,$){$.ceEvent('on','ce.commoninit',function(context){var maps=context.find('.cm-map');var geolocations=$('.cm-geolocation-address',context).add('.cm-geolocation-city',context).add('.cm-geolocation-state',context).add('.cm-geolocation-country',context);if(maps.length||geolocations.length){$.ceMap('init');if(maps.length){maps.each(function(){$(this).ceMap('showObjects',$(this).data('caGeocode'),1);});}
if(geolocations.length){$.ceMap('getUserLocation',function(loc){$.each(geolocations,function(i,elm){var $elm=$(elm);if($elm.hasClass('cm-geolocation-address')){$elm.val(loc.address);}else if($elm.hasClass('cm-geolocation-city')){$elm.val(loc.city);}else if($elm.hasClass('cm-geolocation-state')){setTimeout(function(){if(loc.state_code){$elm.val(loc.state_code);}else{var el=$('option',$elm).filter(':contains('+loc.state+')').eq(0);;if(el.length){$elm.val(el.val());}}
$elm.trigger('change');});}else if($elm.hasClass('cm-geolocation-country')){$elm.val(loc.country_code);$elm.trigger('change');}});});}}});}(Tygh,jQuery));(function(_,$){$(document).on('click','.cm-login-provider,.cm-link-provider',function(e){var jelm=$(e.target);var login_provider=false;var link_provider=false;var url="";if(jelm.hasClass('cm-login-provider')||jelm.parents('.cm-login-provider').length>0){login_provider=true;}
if(jelm.hasClass('cm-link-provider')||jelm.parents('.cm-link-provider').length>0){link_provider=true;}
if(login_provider&&!jelm.hasClass('cm-login-provider')){jelm=jelm.closest('.cm-login-provider');}else if(link_provider&&!jelm.hasClass('cm-link-provider')){jelm=jelm.closest('.cm-link-provider');}
var idp=jelm.data('idp');var open_id=false;switch(idp){case"wordpress":case"blogger":case"flickr":case"livejournal":var open_id=true;if(idp=="blogger"){var un=prompt("Please enter your blog name");}else{var un=prompt("Please enter your username");}
break;case"openid":var open_id=true;var un=prompt("Please enter your OpenID URL");}
if(!open_id){if(login_provider){url='auth.login_provider?provider='+idp+'&redirect_url='+encodeURIComponent($('input[name=redirect_url]').val())+'&_ts='+(new Date()).getTime();}else{url='profiles.link_provider?provider='+idp+'&_ts='+(new Date()).getTime();}
if(_.embedded){url+='&embedded=true';}
window.open(fn_url(url),"hybridauth_social_sing_on","location=0,status=0,scrollbars=0,width=800,height=500");}else{var oi=un;if(!un){return false;}
switch(idp){case"wordpress":oi="http://"+un+".wordpress.com";break;case"livejournal":oi="http://"+un+".livejournal.com";break;case"blogger":oi="http://"+un+".blogspot.com";break;case"flickr":oi="http://www.flickr.com/photos/"+un+"/";break;}
if(login_provider){url='auth.login_provider?provider=OpenID&_ts='+(new Date()).getTime()+'&openid_identifier='+escape(oi);}else{url='profiles.link_provider?provider=OpenID&_ts='+(new Date()).getTime()+'&openid_identifier='+escape(oi);}
if(_.embedded){url+='&embedded=true';}
window.open(fn_url(url),"hybridauth_social_sing_on","location=0,status=0,scrollbars=0,width=800,height=500");}});$(document).on('click','.cm-unlink-provider',function(e){var jelm=$(e.target);if(!jelm.hasClass('cm-unlink-provider')){jelm=jelm.closest('.cm-unlink-provider');}
if(confirm(_.tr('text_are_you_sure_to_proceed'))){var idp=jelm.data('idp');$.ceAjax('request',fn_url('profiles.unlink_provider?provider='+idp),{method:'post',result_ids:'hybrid_providers'});}});$(document).on('change','.cm-select-provider',function(e){var jelm=$(e.target),option=$('option:selected',jelm),provider=option.data('provider'),id=option.data('id');$.ceAjax('request',fn_url('hybrid_auth.select_provider?provider='+provider+'&id='+id),{method:'get',result_ids:'content_keys_'+id+',content_params_'+id});});})(Tygh,Tygh.$);(function(_,$){$.ceEvent('on','ce.update_object_status_callback',function(){var order_id=$('#order_id').val();$.ceAjax('request',fn_url('pochta.search_tracking&order_id='+order_id),{result_ids:'content_pochta_information'});});}(Tygh,Tygh.$));(function(_,$){$(document).ready(function(){$(document).on('focus','.cm-yad-zipcode',function(e){var address=$('.cm-yad-address').val();var city=$('.cm-yad-city').val();var url='yandex_delivery.get_index';url+='?address='+encodeURIComponent(address);url+='&city='+encodeURIComponent(city);$.ceAjax('request',fn_url(url),{callback:function(data){if(typeof(data.get_index)!=='undefined'){$('.cm-yad-zipcode').val(data.get_index.value);}}});});});}(Tygh,Tygh.$));